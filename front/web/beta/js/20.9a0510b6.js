(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"96ba":function(t,e,a){"use strict";a.r(e);a("4de4"),a("d3b7"),a("b0c0"),a("caad"),a("2532");var o=function(){var t=this,e=t._self._c;return"NUEVO"==t.status?e("q-page",{staticClass:"q-pa-sm bg-grey-3"},[e("div",{staticClass:"q-pa-sm q-pa-md panel-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-3"},[e("p",{staticClass:"q-ml-md fs28 page-title",staticStyle:{color:"#16122f"}},[e("strong",[t._v("NUEVO PEDIDO")])])]),e("div",{staticClass:"col-xs-12 col-md-6",staticStyle:{"text-align":"center"}},[e("q-input",{attrs:{dense:"",debounce:"200",color:"dark",placeholder:"Buscar producto"},on:{input:function(e){t.filter=e.toUpperCase()}},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),e("div",{staticClass:"col-sm-12 col-md-3 pull-right"},[e("q-btn",{staticClass:"col-xs-3",staticStyle:{"margin-top":"10px"},attrs:{color:"warning",icon:"edit",size:"13px"},nativeOn:{click:function(e){return t.editOrder(t.cartId)}}},[e("q-tooltip",{attrs:{"content-class":"bg-warning"}},[t._v("Editar Pedido")])],1),1===this.role||20===this.role||23===this.role?e("q-btn",{staticStyle:{"margin-left":"8px","margin-top":"10px"},attrs:{color:"red",icon:"block",label:"CANCELAR"},on:{click:function(e){return t.cancel()}}}):t._e()],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-10"},[e("div",{staticStyle:{"padding-top":"20px"}},[e("q-table",{attrs:{flat:"",bordered:"",data:t.filteredProducts,columns:t.columns,"row-key":"product",pagination:t.pagination,filter:t.filter},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"name",staticStyle:{width:"5%","text-align":"left"},attrs:{props:a}},[e("label",[t._v(t._s(a.row.name))])]),e("q-td",{key:"code",staticStyle:{width:"5%","text-align":"center"},attrs:{props:a}},[e("label",[t._v(t._s(a.row.code))])]),e("q-td",{key:"precio_piece",staticStyle:{width:"5%","text-align":"right"},attrs:{props:a}},[e("label",[t._v(t._s(t.currencyFormatter.format(a.row.price))+" / Pza")])]),e("q-td",{key:"actions",staticStyle:{width:"5%","text-align":"left"},attrs:{props:a}},[e("q-btn",{staticClass:"col-xs-6",attrs:{color:"positive",icon:"add_shopping_cart",flat:"",disable:t.cardCND,size:"15px"},nativeOn:{click:function(e){return t.openAddDetailModal(a.row)}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Agregar a carrito")])],1)],1)],1)]}}],null,!1,2678179934)})],1)]),e("div",{staticClass:"row col-sm-12 col-md-2"},[e("div",{staticClass:"row bg-white border-panel",staticStyle:{width:"100%"}},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-md-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 col-md-12"},[e("q-btn",{staticStyle:{width:"100%"},attrs:{color:"positive",stack:"",icon:"check",label:"Checkout",disable:0==t.shoppingCartInBulkDetails.length||1!=this.role&&20!=this.role},nativeOn:{click:function(e){return t.openCheckout.apply(null,arguments)}}},[e("strong",[t._v(t._s(t.currencyFormatter.format(t.totalPrice)))])])],1),e("div",{staticClass:"col-xs-12 col-md-12",staticStyle:{"padding-top":"8px"}},[e("q-btn",{staticStyle:{width:"100%"},attrs:{color:"warning","icon-right":"comment",label:"Comentarios",disable:0==t.shoppingCartInBulkDetails.length||t.cardCND},nativeOn:{click:function(e){return t.comments.apply(null,arguments)}}})],1)])]),e("div",{staticClass:"col-xs-12 col-md-12"},t._l(t.shoppingCartInBulkDetails,(function(a){return e("div",{key:a.id,staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"col-xs-11 col-md-7 col-lg-10"},[e("label",[t._v(t._s(a.product_name)+" "),e("strong",[t._v("("+t._s(a.code)+")")])])]),e("div",{staticClass:"col-xs-1 col-md-5 col-lg-2"},[e("q-btn",{staticClass:"pull-right",attrs:{color:"negative",flat:"",icon:"delete",disable:t.cardCND,size:"size:10px;"},nativeOn:{click:function(e){return t.removeInBulkDetail(a.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-negative"}},[t._v("Eliminar")])],1)],1),e("div",{staticClass:"col-xs-12 col-md-12 col-lg-12"},[e("label",[t._v(" "+t._s(a.line_name))])]),e("div",{staticClass:"col-xs-12 col-md-12 col-lg-12 pull-right"},[e("label",[e("strong",[t._v(t._s(t.currencyFormatter.format(a.unit_price))+" Ã— "+t._s(t.formatter.format(a.qty))+" = "+t._s(t.currencyFormatter.format(a.amount)))])])])])],1)],1)})),0)])])])])]),e("q-dialog",{attrs:{persistent:""},model:{value:t.addInBulkDetailModal,callback:function(e){t.addInBulkDetailModal=e},expression:"addInBulkDetailModal"}},[e("q-card",{staticStyle:{"min-width":"400px"}},[e("q-card-section",{staticClass:"bg-blue-7 text-white"},[e("div",{staticClass:"text-h6"},[t._v("Agregar producto")])]),e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cantidad",mask:"#","reverse-fill-mask":"",rules:t.inBulkDetailQtyRules,suffix:"/".concat(t.formatter.format(t.inBulkDetailAvailableQty)," Pza.")},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addInBulkDetail()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeAddInBulkDetailModal()}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.inBulkDetailQty,callback:function(e){t.inBulkDetailQty=e},expression:"inBulkDetailQty"}})],1),e("div",{class:t.isFreeDetail?"col-xs-6 q-pr-xs":"col-xs-5 q-pr-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Precio pza.",disable:t.conditionDisable},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.pzaPrice,callback:function(e){t.pzaPrice=e},expression:"pzaPrice"}})],1),t.isFreeDetail?t._e():e("div",{staticClass:"col-xs-2 col-md-2"},[1===t.cndButton?e("q-btn",{staticClass:"pad",attrs:{disable:!t.$store.getters["users/roles"].includes(1),flat:"",icon:"edit",color:"warning"},on:{click:function(e){return t.editPrice()}}}):t._e(),1!==t.cndButton?e("q-btn",{staticClass:"pad",attrs:{disable:!t.$store.getters["users/roles"].includes(1),flat:"",icon:"cancel",color:"negative"},on:{click:function(e){return t.editPricev2(2)}}}):t._e()],1),e("div",{class:t.isFreeDetail?"col-xs-6 q-pl-xs":"col-xs-5 q-pl-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Importe",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.inBulkPrice,callback:function(e){t.inBulkPrice=e},expression:"inBulkPrice"}})],1)])]),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Cancelar"},on:{click:function(e){return t.closeAddInBulkDetailModal()}}}),e("q-btn",{attrs:{color:"positive",label:"Agregar"},on:{click:function(e){return t.addInBulkDetail()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.openCheckoutModal,callback:function(e){t.openCheckoutModal=e},expression:"openCheckoutModal"}},[e("q-card",{staticStyle:{"min-width":"700px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"text-h6 text-white text-center"},[t._v("Capturar para continuar")])]),e("q-card-section",["CONTADO"===t.term?e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha de Pago",rules:t.paymentDateRules,error:t.$v.payment_date.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:t.payment_date,callback:function(e){t.payment_date=e},expression:"payment_date"}},[e("q-popup-proxy",{ref:"paymentDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{locale:t.myLocale,mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return t.$refs.paymentDate.hide()}},model:{value:t.payment_date,callback:function(e){t.payment_date=e},expression:"payment_date"}})],1)])],1)],1),e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:t.paymentMethodRules,error:t.$v.payment_method.$error,label:"Forma de pago"},on:{input:function(e){t.payment_method=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"attach_money"}})]},proxy:!0}],null,!1,2568092296),model:{value:t.payment_method,callback:function(e){t.payment_method=e},expression:"payment_method"}})],1),e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:t.paymentReferenceRules,error:t.$v.payment_reference.$error,label:"Referencia"},on:{input:function(e){t.payment_reference=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"insert_drive_file"}})]},proxy:!0}],null,!1,1062554705),model:{value:t.payment_reference,callback:function(e){t.payment_reference=e},expression:"payment_reference"}})],1),e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-uploader",{ref:"fileDocumentPaymentRef",attrs:{url:t.fileDocumentUrlPayment,method:"POST",label:"Ticket de Pago","max-files":"1",flat:"","auto-upload":"","no-thumbnails":"",headers:[{name:"Authorization",value:"Bearer "+this.JWT}]},on:{uploaded:t.afterUploadDocumentFilePayment}})],1)]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Subtotal",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.subtotal,callback:function(e){t.subtotal=e},expression:"subtotal"}})],1),e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Descuento %",error:t.$v.discount.$error,rules:t.discountRules},on:{input:function(e){return t.verifyDiscount()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-percentage"}})]},proxy:!0}],null,!1,2294609098),model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}})],1),e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Descuento $",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-tags"}})]},proxy:!0}],null,!1,1089855827),model:{value:t.calcDiscount,callback:function(e){t.calcDiscount=e},expression:"calcDiscount"}})],1),e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Total",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.calcTotal,callback:function(e){t.calcTotal=e},expression:"calcTotal"}})],1)])]),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",icon:"fas fa-times-circle",label:"Cancelar"}}),e("q-btn",{attrs:{color:"positive",icon:"fas fa-cart-arrow-down",label:"ACEPTAR"},on:{click:function(e){return t.request()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmCancelModal,callback:function(e){t.confirmCancelModal=e},expression:"confirmCancelModal"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("Alerta")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center text-center"},[e("label",{staticStyle:{"font-size":"23px"}},[t._v("Â¿EstÃ¡ seguro de Cancelar el Pedido?")])]),e("br"),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.cancelar()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.modalComment,callback:function(e){t.modalComment=e},expression:"modalComment"}},[e("q-card",{staticStyle:{"min-width":"40%"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("AGREGAR COMENTARIOS AL PEDIDO")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("q-separator"),e("br"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-1"}),e("div",{staticClass:"col-sm-10"},[e("q-input",{staticStyle:{background:"#D8D1CF"},attrs:{filled:"",clearable:"",autogrow:"",label:"Comentarios sobre el pedido."},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"chat"}})]},proxy:!0}],null,!1,3369045202),model:{value:t.commentscart,callback:function(e){t.commentscart=e},expression:"commentscart"}})],1)]),e("div",{staticClass:"col-sm-1"}),e("br"),e("q-separator"),e("q-card-actions",{staticStyle:{"vertical-align":"bottom"},attrs:{align:"right"}},[e("q-btn",{staticStyle:{"background-color":"#21ba45"},attrs:{flat:"",label:"Agregar",color:"white"},on:{click:function(e){return t.addComments()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.editOrderModal,callback:function(e){t.editOrderModal=e},expression:"editOrderModal"}},[e("q-card",{staticStyle:{"min-width":"40%"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("EDITAR PEDIDO")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("q-separator"),e("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[e("div",{staticClass:"text-overline",staticStyle:{"font-size":"16px"}},[t._v("Datos del cliente")]),e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.filteredCustomerOptions,label:"Cliente","emit-value":"","map-options":""},on:{filter:t.filtrarClientes,input:function(e){return t.getOfficebyClient()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.officeClientsOptions,"use-input":"",label:"Sucursal Cliente","emit-value":"","map-options":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.clientofficeDestiny,callback:function(e){t.clientofficeDestiny=e},expression:"clientofficeDestiny"}})],1)])])])]),e("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[e("div",{staticClass:"text-overline",staticStyle:{"font-size":"16px"}},[t._v("Origen de venta")]),e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.branchOffices,label:"Sucursal de envÃ­o","emit-value":"","map-options":""},on:{input:function(e){return t.searchStorage(t.branch)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.storageOptions,label:"AlmacÃ©n",rules:t.storageShoppingRules,error:t.$v.storageShopping.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}],null,!1,3703881239),model:{value:t.storageShopping,callback:function(e){t.storageShopping=e},expression:"storageShopping"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.sellerOptions,label:"Vendedor",disable:"","emit-value":"","map-options":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.seller,callback:function(e){t.seller=e},expression:"seller"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.taxInvoice.$error,options:[{label:"FACTURA",value:0},{label:"REMISIÃ“N",value:1}],rules:t.taxInvoicesRules,label:"Â¿Desea factura o remisiÃ³n?"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-cash-register"}})]},proxy:!0}],null,!1,951207439),model:{value:t.taxInvoice,callback:function(e){t.taxInvoice=e},expression:"taxInvoice"}})],1)])])])]),e("q-separator"),e("q-card-actions",{staticStyle:{"vertical-align":"bottom"},attrs:{align:"right"}},[e("q-btn",{staticStyle:{"background-color":"#21ba45"},attrs:{flat:"",label:"Editar",color:"white"},on:{click:function(e){return t.editShoppingCart()}}})],1)],1)],1)],1):e("q-page",{staticClass:"q-pa-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-8"},[e("span",{staticClass:"q-ml-md grey-8 fs28 page-title"},[t._v("Detalles del pedido #"+t._s(t.$route.params.id))])]),e("div",{staticClass:"col-sm-4 pull-right"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{attrs:{align:"right"}},[e("q-breadcrumbs-el",{attrs:{label:"Pedidos",to:"/shopping-carts"}}),e("q-breadcrumbs-el",{attrs:{label:"Ver"}})],1)],1)])]),e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"q-pa-md"},[t.shoppingCartInBulkDetails.length>0?e("br"):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-table",{attrs:{title:"Fibra abierta",dense:"","hide-bottom":"",data:t.shoppingCartInBulkDetails,columns:t.inBulkColumns,"row-key":"product_name"},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"qty",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," KG.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," MXN")))]),e("q-td",{key:"amount",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," MXN")))])],1)]}}],null,!1,2888862776)}):t._e()],1),e("div",{staticClass:"q-pa-md pull-right"},[e("h4",[t._v("IMPORTE TOTAL: "+t._s("".concat(t.currencyFormatter.format(t.totalPrice)," MXN")))])])])])])])},r=[],i=(a("14d9"),a("99af"),a("159b"),a("a9e3"),a("a15b"),a("aabb")),s=a("b5ae"),n=s.required,l=s.decimal,c=s.requiredIf,u=s.maxValue,d=s.integer,p={name:"EditShoppingCart",validations:{inBulkDetailQty:{required:n,decimal:l},customer:{required:n},branch:{required:n},seller:{required:n},clientofficeDestiny:{required:n},payment_date:{required:c((function(){return"CONTADO"===this.term}))},payment_method:{required:c((function(){return"CONTADO"===this.term}))},payment_reference:{required:c((function(){return"CONTADO"===this.term}))},discount:{required:n,maxValue:u(100),integer:d},storageShopping:{required:n},taxInvoice:{required:n}},data:function(){return{myLocale:{days:"Domingo_Lunes_Martes_MiÃ©rcoles_Jueves_Viernes_SÃ¡bado".split("_"),daysShort:"Dom_Lun_Mar_MiÃ©_Jue_Vie_SÃ¡b".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1},taxInvoice:null,authorized_discount:0,discount:0,term:null,payment_method:null,payment_date:null,payment_reference:null,payment_document:!1,oc_date:null,oc_reference:null,oc_document:!1,filter:null,pagination:{sortBy:"id",descending:!0,rowsPerPage:25},cartId:0,editOrderModal:!1,customer:null,seller:null,clientofficeDestiny:null,role:null,branch:null,cardCND:!1,formatter:new Intl.NumberFormat("en-US"),currencyFormatter:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),openCheckoutModal:!1,isFreeDetail:!1,products:[],confirmCancelModal:!1,branchOffices:[],filteredCustomerOptions:[],customerOptions:[],officeClientsOptions:[],sellerOptions:[],memoryPrice:null,customer_id:null,commentscart:null,categories:0,inBulkProducts:[],toogle:0,unitPrices:null,pzaPrice:null,conditionDisable:!0,cndButton:1,shoppingCartInBulkDetails:[],categoryOptions:[{value:0,label:"TODOS"}],includeNotAvailable:!0,price:{min:0,max:200},serverUrl:"http://api.alpez.beta.wasp.mx/",addInBulkDetailModal:!1,modalComment:!1,selectedProduct:null,inBulkDetailQty:null,status:null,columns:[{name:"name",align:"center",label:"PRODUCTO",field:"name",sortable:!0},{name:"code",align:"center",label:"CÃ“DIGO",field:"code",sortable:!0},{name:"precio_piece",align:"center",label:"PRECIO / PZA",field:"precio_piece",sortable:!0},{name:"actions",align:"center",label:"ACCIONES",field:"actions",sortable:!0}],inBulkColumns:[{name:"product_name",align:"left",label:"Producto",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"LÃ­nea",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"CategorÃ­a",field:"category_name",sortable:!0},{name:"qty",align:"right",label:"Cantidad",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"Precio pza.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"Importe",field:"amount",sortable:!0}],storageShopping:null,storageOptions:[]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(12)||this.$store.getters["users/roles"].includes(4)||this.$store.getters["users/roles"].includes(20)||this.$router.push("/")},mounted:function(){this.fetchFromServer()},computed:{taxInvoicesRules:function(t){var e=this;return[function(t){return e.$v.taxInvoice.required||"El campo de Factura o RemisiÃ³n es requerido."}]},storageShoppingRules:function(){var t=this;return[function(e){return t.$v.storageShopping.required||"El campo AlmacÃ©n es requerido."}]},calcDiscount:function(){var t=0;return null!=this.discount&&(t=this.totalPrice*this.discount/100),this.currencyFormatter.format(t)},calcTotal:function(){var t=0;if(null!=this.discount){var e=this.totalPrice*this.discount/100;t=this.totalPrice-e}return this.currencyFormatter.format(t)},discountRules:function(t){var e=this;return[function(t){return e.$v.discount.required||"El campo Descuento es requerido."},function(t){return e.$v.discount.integer||"El campo Descuento debe ser entero"},function(t){return e.$v.discount.maxValue||"El campo Descuento no debe exceder del 100%"}]},subtotal:function(){var t=0;return null!=this.totalPrice&&(t=this.currencyFormatter.format(this.totalPrice)),t},JWT:function(){return localStorage.getItem("JWT")},fileDocumentUrlOC:function(){return"".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file/").concat(this.$route.params.id)},fileDocumentUrlCitation:function(){return"".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file3/").concat(this.$route.params.id)},fileDocumentUrlPayment:function(){return"".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file2/").concat(this.$route.params.id)},customerRules:function(t){var e=this;return[function(t){return e.$v.customer.required||"El campo Nombre es requerido."}]},ocReferenceRules:function(t){var e=this;return[function(t){return e.$v.oc_reference.required||"El campo Orden de Compra es requerido."}]},ocDateRules:function(t){var e=this;return[function(t){return e.$v.oc_date.required||"El campo Fecha de Orden de Compra es requerido."}]},paymentReferenceRules:function(t){var e=this;return[function(t){return e.$v.payment_reference.required||"El campo Referencia es requerido."}]},paymentDateRules:function(t){var e=this;return[function(t){return e.$v.payment_date.required||"El campo Fecha de Pago es requerido."}]},paymentMethodRules:function(t){var e=this;return[function(t){return e.$v.payment_method.required||"El campo Forma de Pago es requerido."}]},officeClientRules:function(t){var e=this;return[function(t){return e.$v.clientofficeDestiny.required||"El la sucursal del cliente es requerida."}]},branchRules:function(t){var e=this;return[function(t){return e.$v.branch.required||"El campo de Sucursal es requerido."}]},sellerRules:function(t){var e=this;return[function(t){return e.$v.seller.required||"El campo de Vendedor es requerido."}]},filteredProducts:function(){var t=this,e=[],a=[];return this.inBulkProducts.forEach((function(t){e.push(Number(t.product_id))})),this.products.forEach((function(o){t.includeNotAvailable?o.price>=t.price.min&&o.price<=t.price.max&&a.push(o):e.includes(Number(o.id))&&o.price>=t.price.min&&o.price<=t.price.max&&a.push(o)})),null===this.filter&&""!==this.filter||(a=a.filter((function(e){return e.name.includes(t.filter)||e.code.includes(t.filter)}))),a},minPrice:function(){return 0},maxPrice:function(){var t=0;return this.products.forEach((function(e){Number(e.price)>Number(t)&&(t=Number(e.price))})),t},unitPrice:function(){return null!=this.selectedProduct&&null!=this.selectedProduct.id?this.selectedProduct.price:this.currencyFormatter.format(0)},inBulkPrice:function(){return null!=this.selectedProduct&&null!=this.selectedProduct.id&&null!=this.inBulkDetailQty?this.currencyFormatter.format(this.inBulkDetailQty*this.pzaPrice):this.currencyFormatter.format(0)},totalPrice:function(){var t=0;return this.shoppingCartInBulkDetails.forEach((function(e){t+=Number(e.amount)})),t},inBulkDetailQtyRules:function(t){var e=this;return[function(t){return e.$v.inBulkDetailQty.required||"El campo Cantidad es requerido."},function(t){return e.$v.inBulkDetailQty.decimal||"El campo Cantidad debe ser numÃ©rico."}]},inBulkDetailAvailableQty:function(){var t=this;if(null!=this.selectedProduct&&null!=this.selectedProduct.id){var e=this.inBulkProducts.filter((function(e){return Number(e.product_id)===Number(t.selectedProduct.id)}));if(1===e.length){var a=e[0].stock;return a}}return 0}},methods:{searchStorage:function(t){var e=this;this.storageShopping=null,i["a"].get("/storages/getStoragesOfBranch/".concat(t)).then((function(t){var a=t.data;a.result&&(e.storageOptions=a.storage,console.log(e.storageOptions))})).catch()},searchStorage2:function(t){var e=this;i["a"].get("/storages/getStoragesOfBranch/".concat(t)).then((function(t){var a=t.data;a.result&&(e.storageOptions=a.storage,console.log(e.storageOptions))})).catch()},verifyDiscount:function(){null!=this.authorized_discount&&null!=this.discount&&this.discount>this.authorized_discount&&(this.$q.notify({message:"El descuento capturado supera el descuento autorizado del "+this.authorized_discount+"%",position:"top",color:"warning"}),this.discount=0)},invertDate:function(t){if(null===t)return null;var e=t.split("/").reverse().join("-");return e},afterUploadDocumentFileOC:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(this.oc_document=!0)},afterUploadDocumentFilePayment:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(this.payment_document=!0)},afterUploadDocumentFileCitation:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"})},cancelar:function(){var t=this;this.$q.loading.show(),i["a"].put("/shopping-carts/cancel/".concat(this.$route.params.id)).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.$router.push("/shopping-carts"),t.$q.loading.hide()):t.$q.loading.hide()}))},cancel:function(){this.confirmCancelModal=!0},fetchFromServer:function(){var t=this;this.role=this.$store.getters["users/roles"][0],1===this.role||20===this.role||4===this.role?this.cardCND=!1:this.cardCND=!0,this.cartId=this.$route.params.id,i["a"].get("/shopping-carts/".concat(this.$route.params.id)).then((function(e){var a=e.data;if(a.shoppingCart){console.log(a),t.$q.loading.show(),t.customer={label:a.shoppingCart.customer_name,value:a.shoppingCart.customer_id},t.getOfficebyClient(),t.seller=a.shoppingCart.user_id,t.branch=a.shoppingCart.idbo,t.status=a.shoppingCart.status,t.customer_id=a.shoppingCart.customer_id,t.commentscart=a.shoppingCart.comments,t.storageShopping={label:a.shoppingCart.name_storage,value:a.shoppingCart.id_storage},t.taxInvoice=1===a.shoppingCart.tax_invoice?{label:"REMISIÃ“N",value:1}:{label:"FACTURA",value:1};var o=a.shoppingCart.id_storage;t.term=a.shoppingCart.term,t.authorized_discount=Number(a.shoppingCart.authorized_discount),t.searchStorage2(t.branch),console.log(t.branch),i["a"].get("/storages/getStoragesbyShoppingCart/".concat(t.$route.params.id)).then((function(e){var a=e.data;t.bulk=a[0],console.log("Mi numero"),console.log(t.bulk),i["a"].get("/storages/".concat(o,"/bulk-products")).then((function(e){var a=e.data;t.inBulkProducts=a.products,console.log("mi inbulk"),console.log(t.inBulkProducts),i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(t.$route.params.id)).then((function(e){var a=e.data;console.log(a),t.shoppingCartInBulkDetails=a.details}))}))})),i["a"].get("/products/productsWithPrice/".concat(a.shoppingCart.price_list)).then((function(e){var a=e.data;t.products=a.products,t.price.min=t.minPrice,t.price.max=t.maxPrice,t.$q.loading.hide()}))}else t.$router.push("/shopping-carts")}))},addToFavorites:function(t){alert("Agregar a favoritos")},openCompareModal:function(t){alert("Comparar producto")},openDetailsModal:function(t){alert("Ver detalles")},openAddDetailModal:function(t){var e=this,a=[];a.productId=Number(t.id),a.customerId=Number(this.customer_id),a.categoryId=Number(t.category_id),console.log(t),i["a"].post("/shopping-carts/memory-prices",a).then((function(a){var o=a.data;console.log(o),!0===o.result?e.pzaPrice=o.price:e.pzaPrice=t.price,e.selectedProduct=t,e.addInBulkDetailModal=!0,console.log("yo estoy aqui"),e.isFreeDetail=!1}))},openAddFreeDetailModal:function(t){var e=[];e.productId=Number(t.id),e.customerId=Number(this.customer_id),e.categoryId=Number(t.category_id),this.pzaPrice=0,this.selectedProduct=t,this.addInBulkDetailModal=!0,this.isFreeDetail=!0},closeAddInBulkDetailModal:function(){this.addInBulkDetailModal=!1,this.selectedProduct=null,this.inBulkDetailQty=null,this.cndButton=1},addInBulkDetail:function(){var t=this;if(this.$v.inBulkDetailQty.$reset(),this.$v.inBulkDetailQty.$touch(),this.$v.inBulkDetailQty.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;if(Number(this.inBulkDetailQty)<=0||null===this.inBulkDetailQty)this.$q.dialog({title:"Error",message:"La Cantidad debe ser mayor a 0.",persistent:!0});else if(0===Number(this.pzaPrice)&&this.isFreeDetail){this.$q.loading.show();var e=[];e.shoppingCartId=Number(this.$route.params.id),e.productId=Number(this.selectedProduct.id),e.qty=Number(this.inBulkDetailQty),e.price=Number(this.pzaPrice),i["a"].post("/shopping-cart-in-bulk-details",e).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(t.$route.params.id)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,t.$q.loading.hide(),t.closeAddInBulkDetailModal(),t.cndButton=1})):t.$q.loading.hide()}))}else if(Number(this.pzaPrice)<=0)this.$q.dialog({title:"Error",message:"El precio del producto debe ser mayor a 0.",persistent:!0});else{this.$q.loading.show();var a=[];a.shoppingCartId=Number(this.$route.params.id),a.productId=Number(this.selectedProduct.id),a.qty=Number(this.inBulkDetailQty),a.price=Number(this.pzaPrice),i["a"].post("/shopping-cart-in-bulk-details",a).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(t.$route.params.id)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,t.$q.loading.hide(),t.closeAddInBulkDetailModal(),t.cndButton=1})):t.$q.loading.hide()}))}},removeInBulkDetail:function(t){var e=this;this.$q.loading.show(),i["a"].delete("/shopping-cart-in-bulk-details/".concat(t)).then((function(t){var a=t.data;e.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e.$route.params.id)).then((function(t){var a=t.data;e.shoppingCartInBulkDetails=a.details,e.$q.loading.hide()})):e.$q.loading.hide()}))},openCheckout:function(){this.openCheckoutModal=!0},request:function(){var t=this;if(this.$v.payment_method.$reset(),this.$v.payment_method.$touch(),this.$v.payment_date.$reset(),this.$v.payment_date.$touch(),this.$v.payment_reference.$reset(),this.$v.payment_reference.$touch(),this.$v.discount.$reset(),this.$v.discount.$touch(),this.$v.discount.$error||this.$v.payment_method.$error||this.$v.payment_date.$error||this.$v.payment_reference.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;this.$q.loading.show();var e={};e.total_cost=this.totalPrice,e.payment_method=this.payment_method,e.payment_reference=this.payment_reference,e.payment_date=this.invertDate(this.payment_date),e.oc_date=this.invertDate(this.oc_date),e.oc_reference=this.oc_reference,e.oc_term=this.term,e.discount=Number(this.discount),i["a"].put("/shopping-carts/request/".concat(this.$route.params.id),e).then((function(e){var a=e.data;console.log(a),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.limit_message&&t.$q.notify({timeout:8e3,message:a.limit_message.content,position:"top",color:"warning"}),a.expired_message&&t.$q.notify({message:a.expired_message.content,position:"top",color:"warning"}),a.result?(t.$router.push("/shopping-carts"),t.$q.loading.hide()):t.$q.loading.hide()}))},editPrice:function(){this.inBulkDetailQty>0?(this.conditionDisable=!1,this.cndButton=0,this.pzaPrice=null):this.$q.notify({message:"Agregue una cantidad del producto",position:"top",color:"warning"})},editPricev2:function(t){this.conditionDisable=!0,this.cndButton=1},comments:function(){this.modalComment=!0},addComments:function(){var t=this,e=[];e.cartId=Number(this.$route.params.id),e.cartComments=this.commentscart,i["a"].post("/shopping-carts/addCommentsToCart",e).then((function(e){var a=e.data;a.result?(t.modalComment=!1,t.$q.loading.hide()):t.$q.loading.hide()}))},editOrder:function(t){t&&(this.getClients(),this.getSellers(),this.editOrderModal=!0)},getClients:function(){var t=this,e=this.$store.getters["users/id"];i["a"].get("/customers/getCustomersBySeller/".concat(e)).then((function(e){var a=e.data;t.customerOptions=a.options})),i["a"].get("/branch-offices/options").then((function(e){var a=e.data;t.branchOffices=a.options,t.$q.loading.hide()}))},getSellers:function(){var t=this;i["a"].get("/users/getSeller").then((function(e){var a=e.data;t.sellerOptions=a.options,t.$q.loading.hide()}))},filtrarClientes:function(t,e,a){var o=this;e((function(){var e=t.toLowerCase();o.filteredCustomerOptions=o.customerOptions.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},getOfficebyClient:function(){var t=this;this.officeClientsOptions=[];var e=[];e.customer=this.customer.value,console.log(e),i["a"].post("/customers/officeoptions",e).then((function(e){var a=e.data;console.log(a.options),a.result&&(t.officeClientsOptions=a.options,0!==a.options.length&&(console.log(a.options[0].label),t.clientofficeDestiny={label:a.options[0].label,value:a.options[0].value}))}))},editShoppingCart:function(){var t=this;if(this.$v.customer.$reset(),this.$v.customer.$touch(),this.$v.seller.$reset(),this.$v.seller.$touch(),this.$v.clientofficeDestiny.$reset(),this.$v.clientofficeDestiny.$touch(),this.$v.branch.$reset(),this.$v.branch.$touch(),this.$v.storageShopping.$reset(),this.$v.storageShopping.$touch(),this.$v.seller.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.clientofficeDestiny.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.customer.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.branch.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.storageShopping.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;this.$q.loading.show();var e=[];e.shoppingCartId=Number(this.cartId),e.customer=Number(this.customer.value),e.officecustomer=Number(this.clientofficeDestiny.value),e.originbranch=Number(this.branch),e.seller=Number(this.seller),e.storage_id=this.storageShopping.value,e.tax_invoice=this.taxInvoice.value,console.log(e),i["a"].post("/shopping-carts/updateCart",e).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.$q.loading.hide(),t.fetchFromServer(),t.customer=null,t.seller=null,t.clientofficeDestiny=null,t.branch=null,t.editOrderModal=!1):t.$q.loading.hide()}))}}},m=p,h=(a("bbf5"),a("2877")),f=a("9989"),g=a("27f9"),v=a("0016"),b=a("6a67"),y=a("9c40"),q=a("05c0"),_=a("eaac"),C=a("bd08"),k=a("db86"),$=a("f09f"),x=a("a370"),D=a("068f"),S=a("eb85"),w=a("24e8"),P=a("4b7e"),O=a("ddd8"),B=a("7cbe"),I=a("52ee"),N=a("ee89"),E=a("ead5"),M=a("079e"),A=a("7f67"),F=a("eebe"),Q=a.n(F),R=Object(h["a"])(m,o,r,!1,null,null,null);e["default"]=R.exports;Q()(R,"components",{QPage:f["a"],QInput:g["a"],QIcon:v["a"],QBtnToggle:b["a"],QBtn:y["a"],QTooltip:q["a"],QTable:_["a"],QTr:C["a"],QTd:k["a"],QCard:$["a"],QCardSection:x["a"],QImg:D["a"],QSeparator:S["a"],QDialog:w["a"],QCardActions:P["a"],QSelect:O["a"],QPopupProxy:B["a"],QDate:I["a"],QUploader:N["a"],QBreadcrumbs:E["a"],QBreadcrumbsEl:M["a"]}),Q()(R,"directives",{ClosePopup:A["a"]})},"9e00":function(t,e,a){},bbf5:function(t,e,a){"use strict";a("9e00")}}]);
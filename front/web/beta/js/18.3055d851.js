(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{2905:function(t,e,o){"use strict";o("f662")},"64d5":function(t,e,o){"use strict";o.r(e);o("4de4"),o("d3b7"),o("b0c0");var a=function(){var t=this,e=t._self._c;return"NUEVO"==t.status?e("q-page",{staticClass:"q-pa-sm bg-grey-3"},[e("div",{staticClass:"q-pa-sm q-pa-md panel-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-3"},[e("p",{staticClass:"q-ml-md fs28 page-title",staticStyle:{color:"#16122f"}},[e("strong",[t._v("NUEVO PEDIDO")])])]),e("div",{staticClass:"col-xs-12 col-md-3",staticStyle:{"text-align":"center"}},[e("q-btn-toggle",{attrs:{"toggle-color":"primary",options:[{value:"0",slot:"one"},{value:"1",slot:"two"}]},scopedSlots:t._u([{key:"one",fn:function(){return[e("div",{staticClass:"row items-center"},[e("i",{staticClass:"fas fa-grip-horizontal fa-lg",staticStyle:{"margin-right":"4px"}}),e("div",{staticClass:"text-center"},[t._v("\n            Cuadricula\n          ")])])]},proxy:!0},{key:"two",fn:function(){return[e("div",{staticClass:"row items-center"},[e("q-icon",{attrs:{name:"list"}}),e("div",{staticClass:"text-center"},[t._v("\n            Lista\n          ")])],1)]},proxy:!0}],null,!1,1483450199),model:{value:t.cardStyle,callback:function(e){t.cardStyle=e},expression:"cardStyle"}})],1),e("div",{staticClass:"col-xs-12 col-md-3",staticStyle:{"text-align":"center"}},[e("q-input",{directives:[{name:"focusshearch",rawName:"v-focusshearch",value:t.focusShearchProducts,expression:"focusShearchProducts"}],attrs:{dense:"",debounce:"200",color:"dark",placeholder:"Buscar producto"},on:{input:function(e){return t.GetProductsByFilter()}},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),e("div",{staticClass:"col-sm-12 col-md-3 pull-right"},[t.shoppingCartInBulkDetails.length>0?e("q-btn",{staticClass:"col-xs-3",staticStyle:{"margin-top":"10px","margin-right":"5px"},attrs:{color:"blue",icon:"fas fa-file-pdf",size:"13px"},nativeOn:{click:function(e){return t.quotationNotePDF()}}},[e("q-tooltip",{attrs:{"content-class":"bg-blue"}},[t._v("Cotización")])],1):t._e(),e("q-btn",{staticClass:"col-xs-3",staticStyle:{"margin-top":"10px"},attrs:{color:"warning",icon:"edit",size:"13px"},nativeOn:{click:function(e){return t.editOrder(t.cartId)}}},[e("q-tooltip",{attrs:{"content-class":"bg-warning"}},[t._v("Editar Pedido")])],1),1===t.roleId||20===t.roleId||23===t.roleId||4===t.roleId||9===t.roleId||27===t.roleId||22===t.roleId||28===t.roleId||29===t.roleId||17===t.roleId?e("q-btn",{staticStyle:{"margin-left":"8px","margin-top":"10px"},attrs:{color:"red",icon:"block",label:"CANCELAR"},on:{click:function(e){return t.cancel()}}}):t._e()],1)])]),e("div",{staticClass:"q-col-gutter-md row items-start fstpadding"},["0"===t.cardStyle?e("div",{staticClass:"row col-sm-12 col-md-10"},t._l(t.filteredProducts,(function(o){return e("div",{key:o.id,staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},[e("q-card",{staticStyle:{"margin-bottom":"10px","margin-left":"5px","margin-right":"5px"}},[e("div",{staticClass:"q-pa-md"},[e("q-img",{staticStyle:{height:"180px",width:"100%"},attrs:{src:o.photo?t.serverUrl+"assets/images/products/"+o.photo:t.serverUrl+"images/logo.png"},scopedSlots:t._u([{key:"error",fn:function(){return[e("div",{staticClass:"absolute-full flex flex-center bg-gray text-white"},[t._v("\n                SIN IMAGEN\n              ")])]},proxy:!0}],null,!0)})],1),e("q-card-section",{staticClass:"bg-grey-4",staticStyle:{"padding-top":"0px","padding-bottom":"0px"}},[e("div",{staticClass:"row text-subtitle1 text-center"},[null!=o.photo?e("q-btn",{staticClass:"col-xs-6",attrs:{color:"blue",icon:"photo",flat:"",size:"15px"},nativeOn:{click:function(e){return t.viewPhoto(o)}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Ver Fotos")])],1):t._e(),e("q-btn",{staticClass:"col-xs-6",attrs:{color:"positive",icon:"add_shopping_cart",disable:t.cardCND,flat:"",size:"15px"},nativeOn:{click:function(e){return t.openAddDetailModal(o)}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Agregar a carrito")])],1)],1)]),e("q-card-section",[e("div",{staticClass:"row no-wrap items-center"},[e("div",{staticClass:"col text-primary"},[e("div",{staticStyle:{height:"20px","line-height":"22px","font-size":"16px"}},[t._v("\n                  "+t._s(o.name)+"\n                ")])])])]),e("q-card-section",{staticClass:"q-pt-none"},[e("strong",[t._v(t._s(t.currencyFormatter.format(o.price))+" / Pza.")]),e("q-separator"),e("div",{staticClass:"text-subtitle1"},[t._v("\n              "+t._s(o.code)+"\n            ")])],1)],1)],1)})),0):t._e(),"1"===t.cardStyle?e("div",{staticClass:"col-sm-12 col-md-10"},[e("div",[e("q-table",{attrs:{flat:"",bordered:"",data:t.filteredProducts,columns:t.columns,"row-key":"product",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(o){return[e("q-tr",{attrs:{props:o}},[e("q-td",{key:"name",staticStyle:{width:"5%","text-align":"left"},attrs:{props:o}},[e("label",[t._v(t._s(o.row.name))])]),e("q-td",{key:"code",staticStyle:{width:"5%","text-align":"center"},attrs:{props:o}},[e("label",[t._v(t._s(o.row.code))])]),e("q-td",{key:"precio_piece",staticStyle:{width:"5%","text-align":"right"},attrs:{props:o}},[e("label",[t._v(t._s(t.currencyFormatter.format(o.row.price))+" / Pza")])]),e("q-td",{key:"actions",staticStyle:{width:"5%","text-align":"left"},attrs:{props:o}},[null!=o.row.photo?e("q-btn",{staticClass:"col-xs-6",attrs:{color:"blue",icon:"photo",flat:"",size:"15px"},nativeOn:{click:function(e){return t.viewPhoto(o.row)}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Ver Fotos")])],1):t._e(),e("q-btn",{staticClass:"col-xs-6",attrs:{color:"positive",icon:"add_shopping_cart",flat:"",size:"15px"},nativeOn:{click:function(e){return t.openAddDetailModal(o.row)}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Agregar a carrito")])],1)],1)],1)]}}],null,!1,2256823868)})],1)]):t._e(),e("q-dialog",{attrs:{persistent:""},model:{value:t.photoModal,callback:function(e){t.photoModal=e},expression:"photoModal"}},[e("q-card",{staticStyle:{"min-width":"25%"}},[e("q-card-section",{staticClass:"row bg-teal-6 text-white"},[e("div",{staticClass:"col-xs-12 col-sm-10 text-h6"},[t._v("Foto: "+t._s(t.photoProductCode))]),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col-xs-12 col-sm-2 pull-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),e("q-card-section",{staticStyle:{"max-height":"60vh"}},[e("q-card-section",{staticStyle:{"max-height":"60vh"}},[1==t.cndcarousel?e("q-carousel",{attrs:{animated:"",arrows:"",navigation:"",infinite:""},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},t._l(t.slides,(function(t){return e("q-carousel-slide",{key:t.id,attrs:{name:t.id,"img-src":t.url}},[e("div",{staticClass:"text-right"})])})),1):t._e()],1)],1),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}})],1)],1),e("div",{staticClass:"row col-sm-12 col-md-2"},[e("div",{staticClass:"row bg-white border-panel",staticStyle:{width:"100%"}},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-md-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 col-md-12"},[e("q-btn",{staticStyle:{width:"100%"},attrs:{color:"positive",stack:"",icon:"check",label:"Checkout",disable:0==t.shoppingCartInBulkDetails.length||1!=t.roleId&&20!=t.roleId&&4!=t.roleId&&29!=t.roleId&&27!=t.roleId&&22!=t.roleId&&28!=t.roleId&&29!=t.roleId&&17!=t.roleId},nativeOn:{click:function(e){return t.openCheckout.apply(null,arguments)}}},[e("strong",[t._v(t._s(t.currencyFormatter.format(1.16*t.totalPrice)))])])],1),e("div",{staticClass:"col-xs-12 col-md-12",staticStyle:{"padding-top":"8px"}},[e("q-btn",{staticStyle:{width:"100%"},attrs:{color:"warning","icon-right":"comment",label:"NOTAS",disable:0==t.shoppingCartInBulkDetails.length||t.cardCND},nativeOn:{click:function(e){return t.comments.apply(null,arguments)}}})],1)])]),e("div",{staticClass:"col-xs-12 col-md-12"},t._l(t.shoppingCartInBulkDetails,(function(o){return e("div",{key:o.id,staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"col-xs-11 col-md-7 col-lg-10"},[e("label",[t._v(t._s(o.product_name)+" "),e("strong",[t._v("("+t._s(o.code)+")")])])]),e("div",{staticClass:"col-xs-1 col-md-5 col-lg-2"},[e("q-btn",{staticClass:"pull-right",attrs:{color:"negative",flat:"",icon:"delete",disable:t.cardCND,size:"size:10px;"},nativeOn:{click:function(e){return t.removeInBulkDetail(o.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-negative"}},[t._v("Eliminar")])],1)],1),e("div",{staticClass:"col-xs-12 col-md-12 col-lg-12"},[e("label",[t._v(" "+t._s(o.line_name))])]),e("div",{staticClass:"col-xs-12 col-md-12 col-lg-12 pull-right"},[e("label",[e("strong",[t._v(t._s(t.currencyFormatter.format(1.16*o.unit_price))+" × "+t._s(t.formatter.format(o.qty))+" = "+t._s(t.currencyFormatter.format(1.16*o.amount)))])])])])],1)],1)})),0)])])])])],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.addInBulkDetailModal,callback:function(e){t.addInBulkDetailModal=e},expression:"addInBulkDetailModal"}},[e("q-card",{staticStyle:{"min-width":"400px"}},[e("q-card-section",{staticClass:"bg-blue-7 text-white"},[e("div",{staticClass:"text-h6"},[t._v("Agregar producto")])]),e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12"},[e("q-input",{directives:[{name:"focusqty",rawName:"v-focusqty",value:t.focusAddQty,expression:"focusAddQty"}],attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cantidad","reverse-fill-mask":"",rules:t.inBulkDetailQtyRules,suffix:"/".concat(t.formatter.format(t.selectedProduct?t.selectedProduct.stock:0)," Pza.")},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addInBulkDetail()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeAddInBulkDetailModal()}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.inBulkDetailQty,callback:function(e){t.inBulkDetailQty=e},expression:"inBulkDetailQty"}})],1),1!==t.type_order?e("div",{staticClass:"col-xs-12 q-mb-sm"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"DD/MM/YYYY",label:"Entrega"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"date_range"}})]},proxy:!0}],null,!1,3313346584),model:{value:t.dateShopping,callback:function(e){t.dateShopping=e},expression:"dateShopping"}},[e("q-popup-proxy",{ref:"date1",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{mask:"DD/MM/YYYY","today-btn":""},model:{value:t.dateShopping,callback:function(e){t.dateShopping=e},expression:"dateShopping"}})],1)])],1)],1):t._e(),e("div",{class:t.isFreeDetail?"col-xs-6 q-pr-xs":"col-xs-5 q-pr-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Precio pza.",disable:t.conditionDisable},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.pzaPrice,callback:function(e){t.pzaPrice=e},expression:"pzaPrice"}})],1),t.isFreeDetail?t._e():e("div",{staticClass:"col-xs-2 col-md-2"},[1!==t.cndButton||4!==t.roleId&&20!==t.roleId&&1!==t.roleId&&22!==t.roleId&&29!==t.roleId?t._e():e("q-btn",{staticClass:"pad",attrs:{flat:"",icon:"edit",color:"warning"},on:{click:function(e){return t.editPrice()}}}),1===t.cndButton||4!==t.roleId&&20!==t.roleId&&1!==t.roleId&&22!==t.roleId&&29!==t.roleId?t._e():e("q-btn",{staticClass:"pad",attrs:{flat:"",icon:"cancel",color:"negative"},on:{click:function(e){return t.editPricev2(2)}}})],1),e("div",{class:t.isFreeDetail?"col-xs-6 q-pl-xs":"col-xs-5 q-pl-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Importe",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.inBulkPrice,callback:function(e){t.inBulkPrice=e},expression:"inBulkPrice"}})],1)])]),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Cancelar"},on:{click:function(e){return t.closeAddInBulkDetailModal()}}}),e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"positive",label:"Agregar"},on:{click:function(e){return t.addInBulkDetail()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.openCheckoutModal,callback:function(e){t.openCheckoutModal=e},expression:"openCheckoutModal"}},[e("q-card",{staticStyle:{"min-width":"700px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"text-h6 text-white text-center"},[t._v("Capturar para continuar")])]),e("q-card-section",[1===t.type_order?e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.oc_reference.$error,label:"# Orden de Compra"},on:{input:function(e){t.oc_reference=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"code"}})]},proxy:!0}],null,!1,4244721825),model:{value:t.oc_reference,callback:function(e){t.oc_reference=e},expression:"oc_reference"}})],1),e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-uploader",{ref:"fileDocumentOCRef",attrs:{url:t.fileDocumentUrlOC,method:"POST",label:"Orden de Compra","max-files":"1",flat:"","auto-upload":"","no-thumbnails":"",headers:[{name:"Authorization",value:"Bearer "+this.JWT}]},on:{uploaded:t.afterUploadDocumentFileOC}})],1)]):t._e(),"CONTADO"===t.term?e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha de Pago",rules:t.paymentDateRules,error:t.$v.payment_date.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:t.payment_date,callback:function(e){t.payment_date=e},expression:"payment_date"}},[e("q-popup-proxy",{ref:"paymentDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{locale:t.myLocale,mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return t.$refs.paymentDate.hide()}},model:{value:t.payment_date,callback:function(e){t.payment_date=e},expression:"payment_date"}})],1)])],1)],1),e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:t.paymentMethodRules,error:t.$v.payment_method.$error,label:"Forma de pago"},on:{input:function(e){t.payment_method=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"attach_money"}})]},proxy:!0}],null,!1,2568092296),model:{value:t.payment_method,callback:function(e){t.payment_method=e},expression:"payment_method"}})],1),e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:t.paymentReferenceRules,error:t.$v.payment_reference.$error,label:"Referencia"},on:{input:function(e){t.payment_reference=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"insert_drive_file"}})]},proxy:!0}],null,!1,1062554705),model:{value:t.payment_reference,callback:function(e){t.payment_reference=e},expression:"payment_reference"}})],1),e("div",{staticClass:"col-xs-6 q-pa-xs"},[e("q-uploader",{ref:"fileDocumentPaymentRef",attrs:{url:t.fileDocumentUrlPayment,method:"POST",label:"Ticket de Pago","max-files":"1",flat:"","auto-upload":"","no-thumbnails":"",headers:[{name:"Authorization",value:"Bearer "+this.JWT}]},on:{uploaded:t.afterUploadDocumentFilePayment}})],1)]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Subtotal",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.subtotal,callback:function(e){t.subtotal=e},expression:"subtotal"}})],1),e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Descuento %",error:t.$v.discount.$error,rules:t.discountRules},on:{input:function(e){return t.verifyDiscount()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-percentage"}})]},proxy:!0}],null,!1,2294609098),model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}})],1),e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Descuento $",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-tags"}})]},proxy:!0}],null,!1,1089855827),model:{value:t.calcDiscount,callback:function(e){t.calcDiscount=e},expression:"calcDiscount"}})],1),e("div",{staticClass:"col-xs-3 q-pa-xs"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Total (IVA)",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}],null,!1,1498120564),model:{value:t.calcTotal,callback:function(e){t.calcTotal=e},expression:"calcTotal"}})],1)])]),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",icon:"fas fa-times-circle",label:"Cancelar"},on:{click:function(e){return t.closeCheckout()}}}),e("q-btn",{attrs:{color:"positive",icon:"fas fa-cart-arrow-down",label:"ACEPTAR"},on:{click:function(e){return t.request()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmCancelModal,callback:function(e){t.confirmCancelModal=e},expression:"confirmCancelModal"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("Alerta")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center text-center"},[e("label",{staticStyle:{"font-size":"23px"}},[t._v("¿Está seguro de Cancelar el Pedido?")])]),e("br"),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.cancelar()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.modalComment,callback:function(e){t.modalComment=e},expression:"modalComment"}},[e("q-card",{staticStyle:{"min-width":"40%"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("AGREGAR COMENTARIOS AL PEDIDO")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("q-separator"),e("br"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-1"}),e("div",{staticClass:"col-sm-10"},[e("q-input",{staticStyle:{background:"#D8D1CF"},attrs:{filled:"",clearable:"",autogrow:"",label:"Comentarios sobre el pedido."},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"chat"}})]},proxy:!0}],null,!1,3369045202),model:{value:t.commentscart,callback:function(e){t.commentscart=e},expression:"commentscart"}})],1)]),e("div",{staticClass:"col-sm-1"}),e("br"),e("q-separator"),e("q-card-actions",{staticStyle:{"vertical-align":"bottom"},attrs:{align:"right"}},[e("q-btn",{staticStyle:{"background-color":"#21ba45"},attrs:{flat:"",label:"Agregar",color:"white"},on:{click:function(e){return t.addComments()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.editOrderModal,callback:function(e){t.editOrderModal=e},expression:"editOrderModal"}},[e("q-card",{staticStyle:{"min-width":"90%","min-height":"100%"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("EDITAR PEDIDO")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("q-separator"),e("q-card-section",[e("div",{staticClass:"text-overline",staticStyle:{"font-size":"16px"}},[t._v("Tipo de Pedido")]),e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pl-md q-pt-md"},[e("div",{staticClass:"row q-col-gutter-xs q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-md-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.type_order_edt.$error,options:[{label:"MOSTRADOR",value:1},{label:"CONSIGNACIÓN",value:2},{label:"MAYOREO",value:3}],"use-input":"",label:"Tipo","map-options":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.type_order_edt,callback:function(e){t.type_order_edt=e},expression:"type_order_edt"}})],1),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("div",{staticClass:"col-xs-12 col-sm-6"},[e("q-select",{attrs:{filled:"",color:"dark","bg-color":"secondary",error:t.$v.loan.$error,label:"Prestamo",options:t.selectLoan,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},on:{input:function(e){return t.checkLoan()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0},{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[t._v("\n                    No hay Resultados\n                  ")])],1)]},proxy:!0}],null,!1,1296454376),model:{value:t.loan,callback:function(e){t.loan=e},expression:"loan"}})],1)]),e("div",{staticClass:"col-xs-12 col-md-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:[{label:"NORMAL",value:0},{label:"ESPECIAL",value:1}],"use-input":"",label:"Pedido","emit-value":"","map-options":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"grade"}})]},proxy:!0}],null,!1,3634351801),model:{value:t.special_order,callback:function(e){t.special_order=e},expression:"special_order"}})],1)])])])]),e("q-card-section",[e("div",{staticClass:"text-overline",staticStyle:{"font-size":"16px"}},[t._v("Datos del cliente")]),e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pl-md q-pt-md q-pr-md"},[e("div",{staticClass:"row q-col-gutter-xs q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-md-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.filteredCustomerOptions,label:"Cliente","use-input":""},on:{filter:t.filtrarClientes,input:function(e){t.getOfficebyClient(),t.getContactOfInput()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1),e("div",{staticClass:"col-xs-12 col-md-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.optionsContactsFilter,"use-input":"",label:"Con Atencion a:"},on:{filter:t.filtrarContacts},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.contactCustomer,callback:function(e){t.contactCustomer=e},expression:"contactCustomer"}})],1),e("div",{staticClass:"col-xs-12 col-md-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.officeClientsOptions,"use-input":"",label:"Sucursal Cliente","emit-value":"","map-options":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.clientofficeDestiny,callback:function(e){t.clientofficeDestiny=e},expression:"clientofficeDestiny"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.commercial_terms.$error,label:"Condiciones Comerciales"},on:{input:function(e){t.commercial_terms=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}],null,!1,395819190),model:{value:t.commercial_terms,callback:function(e){t.commercial_terms=e},expression:"commercial_terms"}})],1),e("div",{staticClass:"col-md-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"VIGENCIA"},model:{value:t.validity,callback:function(e){t.validity=e},expression:"validity"}},[e("q-popup-proxy",{ref:"date",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-3"},[e("q-date",{attrs:{"today-btn":""},model:{value:t.validity,callback:function(e){t.validity=e},expression:"validity"}})],1)])],1)],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.lab.$error,label:"L.A.B"},on:{input:function(e){t.lab=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}],null,!1,395819190),model:{value:t.lab,callback:function(e){t.lab=e},expression:"lab"}})],1)])])])]),e("q-card-section",{staticStyle:{"max-height":"40vh"}},[e("div",{staticClass:"text-overline",staticStyle:{"font-size":"16px"}},[t._v("Origen de venta")]),e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pt-md q-pl-md q-pr-md"},[e("div",{staticClass:"row q-col-gutter-xs q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-md-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.branchOffices,label:"Sucursal de envío","emit-value":"","map-options":""},on:{input:function(e){return t.searchStorage(t.branch)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}})],1),e("div",{staticClass:"col-xs-12 col-md-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.storageOptions,label:"Almacén",rules:t.storageShoppingRules,error:t.$v.storageShopping.$error},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}],null,!1,3703881239),model:{value:t.storageShopping,callback:function(e){t.storageShopping=e},expression:"storageShopping"}})],1),e("div",{staticClass:"col-xs-12 col-md-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.sellerOptions,label:"Vendedor",disable:"","emit-value":"","map-options":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"person"}})]},proxy:!0}],null,!1,3962637177),model:{value:t.seller,callback:function(e){t.seller=e},expression:"seller"}})],1),e("div",{staticClass:"col-xs-12 col-md-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.taxInvoice.$error,options:[{label:"FACTURA",value:0},{label:"REMISIÓN",value:1}],rules:t.taxInvoicesRules,label:"¿Desea factura o remisión?","map-options":"","emit-value":""},on:{input:t.checkRemision},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-cash-register"}})]},proxy:!0}],null,!1,951207439),model:{value:t.taxInvoice,callback:function(e){t.taxInvoice=e},expression:"taxInvoice"}})],1)])])])]),e("q-card-actions",{staticStyle:{"vertical-align":"bottom"},attrs:{align:"right"}},[e("q-btn",{staticStyle:{"background-color":"#21ba45"},attrs:{flat:"",label:"Editar",color:"white"},on:{click:function(e){return t.editShoppingCart()}}})],1)],1)],1)],1):e("q-page",{staticClass:"q-pa-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-8"},[e("span",{staticClass:"q-ml-md grey-8 fs28 page-title"},[t._v("Detalles del pedido #"+t._s(t.$route.params.id))])]),e("div",{staticClass:"col-sm-4 pull-right"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{attrs:{align:"right"}},[e("q-breadcrumbs-el",{attrs:{label:"Pedidos",to:"/shopping-carts"}}),e("q-breadcrumbs-el",{attrs:{label:"Ver"}})],1)],1)])]),e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"q-pa-md"},[t.shoppingCartInBulkDetails.length>0?e("br"):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-table",{attrs:{title:"Fibra abierta",dense:"","hide-bottom":"",data:t.shoppingCartInBulkDetails,columns:t.inBulkColumns,"row-key":"product_name"},scopedSlots:t._u([{key:"body",fn:function(o){return[e("q-tr",{attrs:{props:o}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:o}},[t._v(t._s(o.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"15%"},attrs:{props:o}},[t._v(t._s(o.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:o}},[t._v(t._s(o.row.category_name))]),e("q-td",{key:"qty",staticStyle:{width:"20%"},attrs:{props:o}},[t._v(t._s("".concat(t.formatter.format(o.row.qty)," KG.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"20%"},attrs:{props:o}},[t._v(t._s("".concat(t.currencyFormatter.format(o.row.unit_price)," MXN")))]),e("q-td",{key:"amount",staticStyle:{width:"15%"},attrs:{props:o}},[t._v(t._s("".concat(t.currencyFormatter.format(o.row.amount)," MXN")))])],1)]}}],null,!1,2888862776)}):t._e()],1),e("div",{staticClass:"q-pa-md pull-right"},[e("h4",[t._v("IMPORTE TOTAL: "+t._s("".concat(t.currencyFormatter.format(t.totalPrice)," MXN")))])])])])])])},r=[],i=o("7ec2"),n=o.n(i),s=o("c973"),l=o.n(s),c=(o("99af"),o("159b"),o("a9e3"),o("14d9"),o("a15b"),o("caad"),o("2532"),o("ac1f"),o("5319"),o("aabb")),u=o("b5ae"),d=u.required,p=u.requiredIf,m=u.maxValue,h=u.integer,f=u.decimal,g={name:"EditShoppingCart",validations:{inBulkDetailQty:{required:d,decimal:f},customer:{required:d},branch:{required:d},seller:{required:d},clientofficeDestiny:{required:d},payment_date:{required:p((function(){return"CONTADO"===this.term}))},payment_method:{required:p((function(){return"CONTADO"===this.term}))},payment_reference:{required:p((function(){return"CONTADO"===this.term}))},oc_reference:{},commercial_terms:{},validity:{},lab:{},loan:{},discount:{required:d,maxValue:m(100),integer:h},storageShopping:{required:d},taxInvoice:{required:d},type_order_edt:{required:d}},data:function(){return{special_order:0,myLocale:{days:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),daysShort:"Dom_Lun_Mar_Mié_Jue_Vie_Sáb".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1},cardStyle:"0",cndcarousel:!1,photoProductId:null,photoProductCode:null,photoModal:!1,slide:0,slides:[],taxInvoice:null,storageShopping:null,storageOptions:[],authorized_discount:0,discount:0,term:null,payment_method:null,payment_date:null,payment_reference:null,payment_document:!1,oc_date:null,oc_reference:null,oc_document:!1,filter:null,cartId:0,editOrderModal:!1,customer:null,seller:null,clientofficeDestiny:null,role:null,branch:null,cardCND:!1,formatter:new Intl.NumberFormat("en-US"),currencyFormatter:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),openCheckoutModal:!1,isFreeDetail:!1,products:[],confirmCancelModal:!1,branchOffices:[],filteredCustomerOptions:[],customerOptions:[],officeClientsOptions:[],sellerOptions:[],memoryPrice:null,customer_id:null,commentscart:null,categories:0,inBulkProducts:[],toogle:0,unitPrices:null,pzaPrice:null,conditionDisable:!0,cndButton:1,filteredProducts:[],shoppingCartInBulkDetails:[],selectLoan:[{label:"NO",value:0},{label:"SI",value:1}],categoryOptions:[{value:0,label:"TODOS"}],includeNotAvailable:!0,price:{min:0,max:200},loan:null,serverUrl:"http://api.alpez.beta.wasp.mx/",addInBulkDetailModal:!1,modalComment:!1,selectedProduct:null,inBulkDetailQty:null,dateShoppingInBulk:null,commentShoppingInbulk:null,status:null,pagination:{sortBy:"id",descending:!0,rowsPerPage:25},columns:[{name:"name",align:"center",label:"PRODUCTO",field:"name",sortable:!0},{name:"code",align:"center",label:"CÓDIGO",field:"code",sortable:!0},{name:"precio_piece",align:"center",label:"PRECIO / PZA",field:"precio_piece",sortable:!0},{name:"actions",align:"center",label:"ACCIONES",field:"actions",sortable:!0}],inBulkColumns:[{name:"product_name",align:"left",label:"Producto",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"Línea",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"Categoría",field:"category_name",sortable:!0},{name:"qty",align:"right",label:"Cantidad",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"Precio pza.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"Importe",field:"amount",sortable:!0}],type_order:0,branchOfficeCliente:0,shoppingCartCantInvoice:[],dateShopping:null,type_order_edt:1,contactCustomer:null,optionsContactsFilter:[],optionContacts:[],commercial_terms:null,validity:null,lab:null,timer:0,controller:null,auxStorage:null,focusShearchProducts:!0,focusAddQty:!1,focusShoppingOrder:!1}},beforeRouteEnter:function(t,e,o){o((function(t){var e=t.$store.getters["users/rol"];console.log(e),1===e||3===e||7===e||2===e||20===e||4===e||27===e||22===e||29===e||28===e||17===e?o():o("/")}))},mounted:function(){this.fetchFromServer()},computed:{roleId:function(){var t=this.$store.getters["users/rol"];return parseInt(t)},taxInvoicesRules:function(t){var e=this;return[function(t){return e.$v.taxInvoice.required||"El campo de Factura o Remisión es requerido."}]},storageShoppingRules:function(){var t=this;return[function(e){return t.$v.storageShopping.required||"El campo Almacén es requerido."}]},calcDiscount:function(){var t=0;return null!=this.discount&&(t=this.totalPrice*this.discount/100),this.currencyFormatter.format(t)},calcTotal:function(){var t=0;if(null!=this.discount){var e=this.totalPrice*this.discount/100;t=1.16*this.totalPrice-e}return this.currencyFormatter.format(t)},discountRules:function(t){var e=this;return[function(t){return e.$v.discount.required||"El campo Descuento es requerido."},function(t){return e.$v.discount.integer||"El campo Descuento debe ser entero"},function(t){return e.$v.discount.maxValue||"El campo Descuento no debe exceder del 100%"}]},subtotal:function(){var t=0;return null!=this.totalPrice&&(t=this.currencyFormatter.format(this.totalPrice)),t},JWT:function(){return localStorage.getItem("JWT")},fileDocumentUrlOC:function(){return"".concat("http://api.alpez.beta.wasp.mx/","documents/file/").concat(this.$route.params.id)},fileDocumentUrlCitation:function(){return"".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file3/").concat(this.$route.params.id)},fileDocumentUrlPayment:function(){return"".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file2/").concat(this.$route.params.id)},customerRules:function(t){var e=this;return[function(t){return e.$v.customer.required||"El campo Nombre es requerido."}]},ocReferenceRules:function(t){var e=this;return[function(t){return e.$v.oc_reference.required||"El campo Orden de Compra es requerido."}]},ocDateRules:function(t){var e=this;return[function(t){return e.$v.oc_date.required||"El campo Fecha de Orden de Compra es requerido."}]},paymentReferenceRules:function(t){var e=this;return[function(t){return e.$v.payment_reference.required||"El campo Referencia es requerido."}]},paymentDateRules:function(t){var e=this;return[function(t){return e.$v.payment_date.required||"El campo Fecha de Pago es requerido."}]},paymentMethodRules:function(t){var e=this;return[function(t){return e.$v.payment_method.required||"El campo Forma de Pago es requerido."}]},officeClientRules:function(t){var e=this;return[function(t){return e.$v.clientofficeDestiny.required||"El la sucursal del cliente es requerida."}]},branchRules:function(t){var e=this;return[function(t){return e.$v.branch.required||"El campo de Sucursal es requerido."}]},sellerRules:function(t){var e=this;return[function(t){return e.$v.seller.required||"El campo de Vendedor es requerido."}]},minPrice:function(){return 0},maxPrice:function(){var t=0;return this.products.forEach((function(e){Number(e.price)>Number(t)&&(t=Number(e.price))})),t},unitPrice:function(){return null!=this.selectedProduct&&null!=this.selectedProduct.id?this.selectedProduct.price:this.currencyFormatter.format(0)},inBulkPrice:function(){return null!=this.selectedProduct&&null!=this.selectedProduct.id&&null!=this.inBulkDetailQty?this.currencyFormatter.format(this.inBulkDetailQty*this.pzaPrice):this.currencyFormatter.format(0)},totalPrice:function(){var t=0;return this.shoppingCartInBulkDetails.forEach((function(e){t+=Number(e.amount)})),t},inBulkDetailQtyRules:function(t){var e=this;return[function(t){return e.$v.inBulkDetailQty.required||"El campo Cantidad es requerido."},function(t){return e.$v.inBulkDetailQty.decimal||"El campo Cantidad debe ser numérico."}]},inBulkDetailAvailableQty:function(){var t=this;if(null!=this.selectedProduct&&null!=this.selectedProduct.id){var e=this.inBulkProducts.filter((function(e){return Number(e.product_id)===Number(t.selectedProduct.id)}));if(1===e.length){var o=e[0].stock;return o}}return 0},canGenerateInvoice:function(){var t=!0;return this.shoppingCartCantInvoice.forEach((function(e){(!1===e.stock||Number(e.qty)>Number(e.stock))&&(t=!1)})),t}},directives:{focusshearch:{update:function(t,e){e.value&&t.focus()}},focusqty:{update:function(t,e){e.value&&t.focus()}}},methods:{closeCheckout:function(){this.openCheckoutModal=!1,this.focusShoppingOrder=!1,this.focusShearchProducts=!0},checkRemision:function(){1===this.taxInvoice&&1===this.loan.value&&(this.$q.notify({message:"Para una remisión el pedido no debe ser tipo prestamo.",position:"top",color:"warning"}),this.taxInvoice=0)},checkLoan:function(){console.log(),1===this.loan?this.taxInvoice=0:this.taxInvoice=null},filtrarContacts:function(t,e,o){var a=this;e((function(){var e=t.toLowerCase();a.optionsContactsFilter=a.optionContacts.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1&&"TODOS"!==t.label}))}))},getContactOfInput:function(){var t=this,e=this.customer.value;this.contactCustomer=null,c["a"].get("/customer-contacts/getContacts/".concat(e)).then((function(e){var o=e.data;o.result&&(t.optionContacts=o.contacts)}))},getContactCustomer:function(t){var e=this;c["a"].get("/customer-contacts/getContacts/".concat(t)).then((function(t){var o=t.data;o.result&&(e.optionContacts=o.contacts)}))},GetProductsByFilter:function(){var t=this;c["a"].get("/shopping-carts/".concat(this.$route.params.id)).then((function(e){var o=e.data,a=null;null!=t.filter&&(a=t.filter);var r=o.shoppingCart.id_storage,i=[];i.priceLevel=o.shoppingCart.price_list,i.filter=a,i.type_order=o.shoppingCart.type_order,i.idStorage=r,t.controller&&c["a"].cancel(),t.controller=c["a"].post("/products/productsWithPriceByFilter",i).then((function(e){var o=e.data;t.products=o.products,t.price.min=t.minPrice,t.price.max=t.maxPrice,t.$q.loading.hide();var a=[];t.products.forEach((function(e){t.includeNotAvailable?e.price>=t.price.min&&e.price<=t.price.max&&a.push(e):Number(e.stock)>0&&e.price>=t.price.min&&e.price<=t.price.max&&a.push(e)})),t.filteredProducts=a,t.controller=null}))}))},quotationNotePDF:function(){var t="si",e="http://api.alpez.beta.wasp.mx/"+"shopping-carts/quotationNotePDF/".concat(this.$route.params.id,"/").concat(t);window.open(e,"_blank")},searchStorage:function(t){var e=this;this.storageShopping=null,c["a"].get("/storages/getStoragesOfBranch/".concat(t)).then((function(t){var o=t.data;o.result&&(e.storageOptions=o.storage)})).catch()},searchStorage2:function(t){var e=this;c["a"].get("/storages/getStoragesOfBranch/".concat(t)).then((function(t){var o=t.data;o.result&&(e.storageOptions=o.storage)})).catch()},verifyDiscount:function(){null!=this.authorized_discount&&null!=this.discount&&Number(this.discount)>Number(this.authorized_discount)&&(this.$q.notify({message:"El descuento capturado supera el descuento autorizado del "+this.authorized_discount+"%",position:"top",color:"warning"}),this.discount=0)},invertDate:function(t){if(null===t)return null;var e=t.split("/").reverse().join("-");return e},afterUploadDocumentFileOC:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(this.oc_document=!0)},afterUploadDocumentFilePayment:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(this.payment_document=!0)},afterUploadDocumentFileCitation:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"})},cancelar:function(){var t=this;this.$q.loading.show(),c["a"].put("/shopping-carts/cancel/".concat(this.$route.params.id)).then((function(e){var o=e.data;t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?(t.$router.push("/shopping-carts"),t.$q.loading.hide()):t.$q.loading.hide()}))},cancel:function(){this.confirmCancelModal=!0},fetchFromServer:function(){var t=this;this.role=this.$store.getters["users/rol"],1===this.role||20===this.role||4===this.role||29===this.role||27===this.role||22===this.role||28===this.role||29===this.role||17===this.role?this.cardCND=!1:this.cardCND=!0,this.cartId=this.$route.params.id,c["a"].get("/shopping-carts/".concat(this.$route.params.id)).then((function(e){var o=e.data;if(o.shoppingCart){t.type_order=o.shoppingCart.type_order,t.special_order=o.shoppingCart.special_order,t.$q.loading.show(),t.customer={label:o.shoppingCart.customer_name,value:o.shoppingCart.customer_id},t.getOfficebyClient(),t.seller=o.shoppingCart.user_id,t.branch=o.shoppingCart.idbo,t.status=o.shoppingCart.status,t.customer_id=o.shoppingCart.customer_id,t.commentscart=o.shoppingCart.comments,t.commercial_terms=o.shoppingCart.commercial_terms,t.validity=o.shoppingCart.validity,t.lab=o.shoppingCart.lab,t.storageShopping={label:o.shoppingCart.name_storage,value:o.shoppingCart.id_storage},t.taxInvoice=o.shoppingCart.tax_invoice,t.loan=0===o.shoppingCart.loan?{label:"NO",value:0}:{label:"SI",value:1};var a=o.shoppingCart.id_storage;t.term=o.shoppingCart.term,t.authorized_discount=Number(o.shoppingCart.authorized_discount),t.branchOfficeCliente=o.shoppingCart.branchofficedestiny,t.special_order=o.shoppingCart.special_order,t.auxStorage=o.shoppingCart.id_storage,t.getContactCustomer(o.shoppingCart.customer_id),null!==o.shoppingCart.contact_client_id?t.contactCustomer={label:o.shoppingCart.name_contact,value:o.shoppingCart.contact_client_id}:t.contactCustomer=null,t.type_order_edt={value:o.shoppingCart.type_order,label:o.shoppingCart.name_type_pay},t.searchStorage2(t.branch),c["a"].get("/storages/getStoragesbyShoppingCart/".concat(t.$route.params.id)).then((function(e){var o=e.data;t.bulk=o[0],c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(t.$route.params.id)).then((function(e){var o=e.data;t.shoppingCartInBulkDetails=o.details}))})),c["a"].get("/products/productsWithPrice/".concat(o.shoppingCart.price_list,"/").concat(o.shoppingCart.type_order,"/").concat(a)).then((function(e){var o=e.data;t.products=o.products,t.price.min=t.minPrice,t.price.max=t.maxPrice,t.$q.loading.hide();var a=[];console.log(o.products),t.products.forEach((function(e){t.includeNotAvailable?e.price>=t.price.min&&e.price<=t.price.max&&a.push(e):Number(e.stock>0)&&e.price>=t.price.min&&e.price<=t.price.max&&a.push(e)})),null===t.filter&&""!==t.filter||(a=a.filter((function(e){return e.name.includes(t.filter)||e.code.includes(t.filter)}))),t.filteredProducts=a}))}else t.$router.push("/shopping-carts")}))},addToFavorites:function(t){alert("Agregar a favoritos")},openCompareModal:function(t){alert("Comparar producto")},openDetailsModal:function(t){alert("Ver detalles")},openAddDetailModal:function(t){var e=[];this.focusAddQty=!0,e.productId=Number(t.id),e.customerId=Number(this.customer_id),e.categoryId=Number(t.category_id),this.pzaPrice=t.price,this.$q.loading.show(),this.selectedProduct=t,this.addInBulkDetailModal=!0,this.isFreeDetail=!1,this.filter=null,this.GetProductsByFilter(),this.$q.loading.hide()},openAddFreeDetailModal:function(t){var e=[];e.productId=Number(t.id),e.customerId=Number(this.customer_id),e.categoryId=Number(t.category_id),this.pzaPrice=0,this.selectedProduct=t,this.addInBulkDetailModal=!0,this.isFreeDetail=!0},closeAddInBulkDetailModal:function(){this.addInBulkDetailModal=!1,this.selectedProduct=null,this.inBulkDetailQty=null,this.cndButton=1,this.commentShoppingInbulk=null,this.dateShoppingInBulk=null,this.dateShopping=null,this.focusShearchProducts=!0},addInBulkDetail:function(){var t=this;return l()(n()().mark((function e(){var o,a,r;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$v.inBulkDetailQty.$reset(),t.$v.inBulkDetailQty.$touch(),!t.$v.inBulkDetailQty.$error){e.next=5;break}return t.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),e.abrupt("return",!1);case 5:if(o=!1,null===t.dateShopping){e.next=12;break}return e.next=9,c["a"].get("/shopping-cart-in-bulk-details/getDate/".concat(t.$formatDate(t.dateShopping))).then((function(t){var e=t.data;console.log(e.result),o=e.result}));case 9:if(!1!==o){e.next=12;break}return t.$q.dialog({title:"Error",message:"Por favor elija una fecha actual o venidera.",persistent:!0}),e.abrupt("return",!1);case 12:Number(t.inBulkDetailQty)<=0||null===t.inBulkDetailQty?t.$q.dialog({title:"Error",message:"La Cantidad debe ser mayor a 0.",persistent:!0}):0===Number(t.pzaPrice)&&t.isFreeDetail?(t.$q.loading.show(),a=[],a.shoppingCartId=Number(t.$route.params.id),a.productId=Number(t.selectedProduct.id),a.qty=Number(t.inBulkDetailQty),a.price=Number(t.pzaPrice),a.dateShoppingInBulk=null===t.dateShopping?null:t.dateShopping.replace(/\//g,"-"),c["a"].post("/shopping-cart-in-bulk-details",a).then((function(e){var o=e.data;t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(t.$route.params.id)).then((function(e){var o=e.data;t.shoppingCartInBulkDetails=o.details,t.$q.loading.hide(),t.closeAddInBulkDetailModal(),t.focusShearchProducts=!0,t.cndButton=1})):t.$q.loading.hide()}))):Number(t.pzaPrice)<=0?t.$q.dialog({title:"Error",message:"El precio del producto debe ser mayor a 0.",persistent:!0}):(t.$q.loading.show(),r=[],r.shoppingCartId=Number(t.$route.params.id),r.productId=Number(t.selectedProduct.id),r.qty=Number(t.inBulkDetailQty),r.price=Number(t.pzaPrice),r.dateShoppingInBulk=null===t.dateShopping?null:t.dateShopping.replace(/\//g,"-"),c["a"].post("/shopping-cart-in-bulk-details",r).then((function(e){var o=e.data;t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(t.$route.params.id)).then((function(e){var o=e.data;t.shoppingCartInBulkDetails=o.details,t.$q.loading.hide(),t.closeAddInBulkDetailModal(),t.focusShearchProducts=!0,t.cndButton=1})):t.$q.loading.hide()})));case 13:case"end":return e.stop()}}),e)})))()},removeInBulkDetail:function(t){var e=this;this.$q.loading.show(),c["a"].delete("/shopping-cart-in-bulk-details/".concat(t)).then((function(t){var o=t.data;e.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e.$route.params.id)).then((function(t){var o=t.data;e.shoppingCartInBulkDetails=o.details,e.$q.loading.hide()})):e.$q.loading.hide()}))},openCheckout:function(){this.focusShearchProducts=!1,this.focusShoppingOrder=!0,this.openCheckoutModal=!0},showLoading:function(){var t=this;this.$q.loading.show({message:'<b>process</b> is in progress.<br/><span class="text-primary">Hang on...</span>',html:!0}),this.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=0}),1e4)},request:function(){var t=this;return l()(n()().mark((function e(){var o;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$v.oc_reference.$reset(),t.$v.oc_reference.$touch(),t.$v.payment_method.$reset(),t.$v.payment_method.$touch(),t.$v.payment_date.$reset(),t.$v.payment_date.$touch(),t.$v.payment_reference.$reset(),t.$v.payment_reference.$touch(),t.$v.discount.$reset(),t.$v.discount.$touch(),!(t.$v.discount.$error||t.$v.payment_method.$error||t.$v.payment_date.$error||t.$v.payment_reference.$error)){e.next=15;break}return t.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),e.abrupt("return",!1);case 15:if(o={},o.total_cost=t.totalPrice,o.payment_method=t.payment_method,o.payment_reference=t.payment_reference,o.payment_date=t.invertDate(t.payment_date),o.oc_date=t.invertDate(t.oc_date),o.oc_reference=t.oc_reference,o.oc_term=t.term,o.discount=Number(t.discount),1===t.type_order){e.next=30;break}return t.$q.loading.show({spinnerColor:"primary",spinnerSize:140,backgroundColor:"white",message:"Cargando..",messageColor:"black"}),e.next=28,c["a"].put("/shopping-carts/request/".concat(t.$route.params.id),o).then((function(e){var o=e.data;t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.limit_message&&t.$q.notify({timeout:8e3,message:o.limit_message.content,position:"top",color:"warning"}),o.expired_message&&t.$q.notify({message:o.expired_message.content,position:"top",color:"warning"}),o.result?(t.$router.push("/shopping-carts/orders/".concat(t.$route.params.id)),t.$q.loading.hide()):t.$q.loading.hide()}));case 28:e.next=33;break;case 30:return t.$q.loading.show(),e.next=33,c["a"].put("/inmediate-sales/request/".concat(t.$route.params.id),o).then((function(e){var o=e.data;o.result||t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.limit_message&&t.$q.notify({timeout:8e3,message:o.limit_message.content,position:"top",color:"warning"}),o.expired_message&&t.$q.notify({message:o.expired_message.content,position:"top",color:"warning"}),o.result?t.autorizedStatus():t.$q.loading.hide()}));case 33:case"end":return e.stop()}}),e)})))()},autorizedStatus:function(){var t=this;return l()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].put("/inmediate-sales/".concat(t.$route.params.id,"/approve")).then((function(e){var o=e.data;o.result||t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?t.searchStock():t.$q.loading.hide()}));case 2:case"end":return e.stop()}}),e)})))()},searchStock:function(){var t=this;return l()(n()().mark((function e(){var o,a,r;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new Date,a=o.getDate()+"-"+(o.getMonth()+1)+"-"+o.getFullYear(),r=[],r.customerBranchOfficeId=t.branchOfficeCliente,r.saleDate=a,r.comments="VENTA EN SUCURSAL",e.next=8,c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(t.$route.params.id)).then((function(e){var o=e.data;console.log(o),t.shoppingCartCantInvoice=o.details,t.canGenerateInvoice?t.invoicedStatus(r):(t.$q.notify({message:"El pedido no se puede remisionar debido a que no hay stock existente",position:"top",color:"warning"}),t.$q.loading.hide(),t.$router.push("/shopping-carts/orders/".concat(t.$route.params.id)))}));case 8:t.$q.loading.hide();case 9:case"end":return e.stop()}}),e)})))()},invoicedStatus:function(t){var e=this;return l()(n()().mark((function o(){return n()().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,c["a"].put("/shopping-carts/".concat(e.$route.params.id,"/generate-invoice"),t).then((function(t){var o=t.data;e.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?(e.$router.push("/storage-exits/".concat(o.invoice.id)),e.$q.loading.hide()):e.$q.loading.hide()}));case 2:case"end":return o.stop()}}),o)})))()},editPrice:function(){this.focusAddQty=!1,this.focusShearchProducts=!1,this.inBulkDetailQty>0?(this.conditionDisable=!1,this.cndButton=0,this.pzaPrice=null):this.$q.notify({message:"Agregue una cantidad del producto",position:"top",color:"warning"})},editPricev2:function(t){this.conditionDisable=!0,this.cndButton=1},comments:function(){this.modalComment=!0},addComments:function(){var t=this,e=[];e.cartId=Number(this.$route.params.id),e.cartComments=this.commentscart,c["a"].post("/shopping-carts/addCommentsToCart",e).then((function(e){var o=e.data;o.result?(t.modalComment=!1,t.$q.loading.hide()):t.$q.loading.hide()}))},editOrder:function(t){t&&(this.getClients(),this.getSellers(),this.focusShearchProducts=!1,this.editOrderModal=!0)},getClients:function(){var t=this,e=this.$store.getters["users/id"];c["a"].get("/customers/getCustomersBySeller/".concat(e)).then((function(e){var o=e.data;t.customerOptions=o.options})),c["a"].get("/branch-offices/options").then((function(e){var o=e.data;t.branchOffices=o.options,t.$q.loading.hide()}))},getSellers:function(){var t=this;c["a"].get("/users/getSeller").then((function(e){var o=e.data;t.sellerOptions=o.options,t.$q.loading.hide()}))},filtrarClientes:function(t,e,o){var a=this;e((function(){var e=t.toLowerCase();a.filteredCustomerOptions=a.customerOptions.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},getOfficebyClient:function(){var t=this;this.officeClientsOptions=[];var e=[];e.customer=this.customer.value,c["a"].post("/customers/officeoptions",e).then((function(e){var o=e.data;o.result&&(t.officeClientsOptions=o.options,0!==o.options.length&&(t.clientofficeDestiny={label:o.options[0].label,value:o.options[0].value}))}))},editShoppingCart:function(){var t=this;if(this.$v.customer.$reset(),this.$v.customer.$touch(),this.$v.seller.$reset(),this.$v.seller.$touch(),this.$v.clientofficeDestiny.$reset(),this.$v.clientofficeDestiny.$touch(),this.$v.branch.$reset(),this.$v.branch.$touch(),this.$v.storageShopping.$reset(),this.$v.storageShopping.$touch(),this.$v.type_order_edt.$reset(),this.$v.type_order_edt.$touch(),this.$v.commercial_terms.$reset(),this.$v.commercial_terms.$touch(),this.$v.validity.$reset(),this.$v.validity.$touch(),this.$v.lab.$reset(),this.$v.lab.$touch(),this.$v.loan.$reset(),this.$v.loan.$touch(),this.$v.type_order_edt.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.seller.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.clientofficeDestiny.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.storageShopping.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.customer.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;if(this.$v.branch.$error)return this.$q.dialog({title:"Error",message:"Por favor, llene todos los campos.",persistent:!0}),!1;this.auxStorage!==this.storageShopping.value&&c["a"].delete("/shopping-cart-in-bulk-details/deleteInbulk/".concat(this.cartId)).then((function(e){var o=e.data;o.result&&t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"})})),this.$q.loading.show();var e=[];e.shoppingCartId=Number(this.cartId),e.customer=Number(this.customer.value),e.officecustomer=Number(this.clientofficeDestiny.value),e.originbranch=Number(this.branch),e.seller=Number(this.seller),e.storage_id=this.storageShopping.value,e.tax_invoice=this.taxInvoice,e.type_order=this.type_order_edt.value,e.contact_client_id=this.contactCustomer,e.commercial_terms=this.commercial_terms,e.validity=this.validity,e.lab=this.lab,e.loan=this.loan,e.special_order=this.special_order,c["a"].post("/shopping-carts/updateCart",e).then((function(e){var o=e.data;t.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?(t.$q.loading.hide(),t.fetchFromServer(),t.seller=null,t.clientofficeDestiny=null,t.branch=null,t.editOrderModal=!1):t.$q.loading.hide()}))},viewPhoto:function(t){var e=this;c["a"].get("/products/getPhotos/".concat(t.id)).then((function(o){var a=o.data;a.photos.length>0?(e.cndcarousel=!0,e.slide=a.photos[0].id):e.cndcarousel=!1;for(var r=[],i=0;i<a.photos.length;i++)r.push({id:a.photos[i].id,url:e.serverUrl+"assets/images/products/"+a.photos[i].url});e.slides=r,e.photoProductId=t.id,e.photoProductCode=t.code})),this.photoModal=!0}}},v=g,b=(o("2905"),o("2877")),y=o("9989"),C=o("6a67"),_=o("0016"),q=o("27f9"),x=o("9c40"),k=o("05c0"),$=o("f09f"),S=o("068f"),w=o("a370"),D=o("eb85"),I=o("eaac"),P=o("bd08"),O=o("db86"),N=o("24e8"),B=o("880c"),E=o("62cd"),A=o("4b7e"),M=o("ddd8"),F=o("7cbe"),Q=o("52ee"),z=o("ee89"),R=o("66e5"),T=o("4074"),U=o("ead5"),L=o("079e"),V=o("7f67"),J=o("eebe"),Y=o.n(J),G=Object(b["a"])(v,a,r,!1,null,null,null);e["default"]=G.exports;Y()(G,"components",{QPage:y["a"],QBtnToggle:C["a"],QIcon:_["a"],QInput:q["a"],QBtn:x["a"],QTooltip:k["a"],QCard:$["a"],QImg:S["a"],QCardSection:w["a"],QSeparator:D["a"],QTable:I["a"],QTr:P["a"],QTd:O["a"],QDialog:N["a"],QCarousel:B["a"],QCarouselSlide:E["a"],QCardActions:A["a"],QSelect:M["a"],QPopupProxy:F["a"],QDate:Q["a"],QUploader:z["a"],QItem:R["a"],QItemSection:T["a"],QBreadcrumbs:U["a"],QBreadcrumbsEl:L["a"]}),Y()(G,"directives",{ClosePopup:V["a"]})},f662:function(t,e,o){}}]);
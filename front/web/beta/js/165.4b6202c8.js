(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[165],{"9d58":function(t,e,a){"use strict";a.r(e);a("caad"),a("2532");var s=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"bg-grey-3"},[e("div",{staticClass:"q-pa-sm panel-header"},[e("div",{staticClass:"row q-col-gutter-md"},[e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[e("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),e("q-breadcrumbs-el",{attrs:{label:"Pedidos",to:"/shopping-carts"}}),e("q-breadcrumbs-el",{domProps:{textContent:t._s(t.$route.params.id)}})],1)],1)]),e("div",{staticClass:"col-sm-9 pull-right"},[e("div",{staticClass:"q-pa-sm gutter-sm"},["NUEVO"===t.cartStatus||1!==this.role&&20!==this.role&&17!==this.role?t._e():e("q-btn",{attrs:{color:"teal-6",icon:"assignment"},on:{click:function(e){return t.downloadOC()}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Orden de Compra")])],1),"NUEVO"===t.cartStatus||1!==this.role&&20!==this.role&&17!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"positive",icon:"fas fa-dollar-sign"},on:{click:function(e){return t.downloadTicket()}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Ticket de Pago")])],1),"NUEVO"===t.cartStatus||1!==this.role&&20!==this.role&&17!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"cyan",icon:"description"},on:{click:function(e){return t.downloadFormatDate()}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Formato de Cita")])],1),"NUEVO"===t.cartStatus||1!==this.role&&20!==this.role&&17!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"purple",icon:"mail"},on:{click:function(e){return t.confirmSendPDF()}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Enviar email")])],1),"AUTORIZADO"===t.cartStatus||"REMISIONADO"===t.cartStatus||"PARCIAL"===t.cartStatus&&(1===this.role||20===this.role||17===this.role)?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"red",icon:"fas fa-file-pdf"},on:{click:function(e){return t.downloadPDF()}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Descargar PDF")])],1):t._e(),"SOLICITADO"===t.cartStatus||"AUTORIZADO"===t.cartStatus&&(1===this.role||20===this.role||23===this.role)?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"red",icon:"block",label:"CANCELAR"},on:{click:function(e){return t.cancel()}}}):t._e(),"SOLICITADO"===t.cartStatus||"AUTORIZADO"===t.cartStatus&&(1===this.role||20===this.role||23===this.role)?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"warning",icon:"edit",label:"Modificar"},on:{click:function(e){return t.confirm()}}}):t._e(),"SOLICITADO"!==t.cartStatus||1!==this.role&&20!==this.role&&23!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"warning",icon:"edit",label:"Editar Comentario"},on:{click:function(e){return t.editComents()}}}),"SOLICITADO"!==t.cartStatus||1!==this.role&&23!==this.role&&!this.$store.getters["users/roles"].includes(25)?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"positive",icon:"check",label:"Aprobar"},on:{click:function(e){return t.approve()}}}),"AUTORIZADO"===t.cartStatus||"PARCIAL"===t.cartStatus&&(1===this.role||2===this.role)?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{disable:1!=this.role&&2!=this.role,color:"positive",icon:"check",label:"REMISIONAR"},on:{click:function(e){return t.openGenerateInvoiceModal()}}}):t._e()],1)])])]),e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Fecha",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.created,callback:function(e){t.$set(t.shoppingCart.fields,"created",e)},expression:"shoppingCart.fields.created"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Sucursal de env√≠o",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.origen,callback:function(e){t.$set(t.shoppingCart.fields,"origen",e)},expression:"shoppingCart.fields.origen"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Vendedor",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-user"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.user_name,callback:function(e){t.$set(t.shoppingCart.fields,"user_name",e)},expression:"shoppingCart.fields.user_name"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Estatus",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-battery-full"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.status,callback:function(e){t.$set(t.shoppingCart.fields,"status",e)},expression:"shoppingCart.fields.status"}})],1),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cliente",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.customer_name,callback:function(e){t.$set(t.shoppingCart.fields,"customer_name",e)},expression:"shoppingCart.fields.customer_name"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Precio lista",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-list"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.price_list,callback:function(e){t.$set(t.shoppingCart.fields,"price_list",e)},expression:"shoppingCart.fields.price_list"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Subtotal",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.totalPrice,callback:function(e){t.totalPrice=e},expression:"totalPrice"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"IEPS",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.thisIeps,callback:function(e){t.thisIeps=e},expression:"thisIeps"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"IVA",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.thisIva,callback:function(e){t.thisIva=e},expression:"thisIva"}})],1),e("div",{staticClass:"col-xs-12 col-sm-10"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",disable:"SOLICITADO"!==t.cartStatus&&(1!==this.role||20!==this.role||23!=this.roles),label:"Comentarios"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"chat"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.comments,callback:function(e){t.$set(t.shoppingCart.fields,"comments",e)},expression:"shoppingCart.fields.comments"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Total",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.thisTotal,callback:function(e){t.thisTotal=e},expression:"thisTotal"}})],1),e("div",{staticClass:"col-xs-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha de Orden de Compra",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.oc_date,callback:function(e){t.$set(t.shoppingCart.fields,"oc_date",e)},expression:"shoppingCart.fields.oc_date"}},[e("q-popup-proxy",{ref:"ocDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{locale:t.myLocale,mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return t.$refs.ocDate.hide()}},model:{value:t.shoppingCart.fields.oc_date,callback:function(e){t.$set(t.shoppingCart.fields,"oc_date",e)},expression:"shoppingCart.fields.oc_date"}})],1)])],1)],1),e("div",{staticClass:"col-xs-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"# Orden de Compra",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"code"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.oc_reference,callback:function(e){t.$set(t.shoppingCart.fields,"oc_reference",e)},expression:"shoppingCart.fields.oc_reference"}})],1),"CONTADO"===t.term?e("div",{staticClass:"col-xs-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha de Pago",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:t.shoppingCart.fields.payment_date,callback:function(e){t.$set(t.shoppingCart.fields,"payment_date",e)},expression:"shoppingCart.fields.payment_date"}},[e("q-popup-proxy",{ref:"paymentDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{locale:t.myLocale,mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return t.$refs.paymentDate.hide()}},model:{value:t.shoppingCart.fields.payment_date,callback:function(e){t.$set(t.shoppingCart.fields,"payment_date",e)},expression:"shoppingCart.fields.payment_date"}})],1)])],1)],1):t._e(),"CONTADO"===t.term?e("div",{staticClass:"col-xs-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Forma de pago",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"attach_money"}})]},proxy:!0}],null,!1,2568092296),model:{value:t.shoppingCart.fields.payment_method,callback:function(e){t.$set(t.shoppingCart.fields,"payment_method",e)},expression:"shoppingCart.fields.payment_method"}})],1):t._e(),"CONTADO"===t.term?e("div",{staticClass:"col-xs-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Referencia",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"insert_drive_file"}})]},proxy:!0}],null,!1,1062554705),model:{value:t.shoppingCart.fields.payment_reference,callback:function(e){t.$set(t.shoppingCart.fields,"payment_reference",e)},expression:"shoppingCart.fields.payment_reference"}})],1):t._e(),e("div",{staticClass:"col-xs-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Descuento aplicado",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-percentage"}})]},proxy:!0}]),model:{value:t.appliedDiscount,callback:function(e){t.appliedDiscount=e},expression:"appliedDiscount"}})],1)]),"SOLICITADO"===t.cartStatus?e("div",{staticClass:"q-pa-md"},[t.shoppingCartInBulkDetails.length>0?e("br"):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-table",{attrs:{title:"PRODUCTOS",dense:"","hide-bottom":"",data:t.shoppingCartInBulkDetails,columns:t.inBulkColumnsSOL,pagination:t.pagination,"row-key":"product_name"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"qty",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," Pzas.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," ")))]),e("q-td",{key:"amount",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," ")))])],1)]}}],null,!1,2212089996)}):t._e()],1):t._e(),"AUTORIZADO"===t.cartStatus||"REMISIONADO"===t.cartStatus||"CANCELADO"==t.cartStatus||"PARCIAL"==t.cartStatus?e("div",{staticClass:"q-pa-md"},[t.shoppingCartInBulkDetails.length>0?e("br"):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-table",{attrs:{title:"PRODUCTOS",dense:"","hide-bottom":"",data:t.shoppingCartInBulkDetails,columns:t.inBulkColumnsAUT,"row-key":"product_name",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"invoice_id",staticStyle:{width:"10%"},attrs:{props:a}},[e("label",{staticStyle:{"text-decoration":"underline black",cursor:"pointer"},on:{click:function(e){return t.openActions(a.row.invoice_id)}}},[t._v(t._s(a.row.invoice_id))])]),e("q-td",{key:"qty",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," Pzas.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," ")))]),e("q-td",{key:"amount",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," ")))]),"REMISIONADO"===a.row.status?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"positive","text-color":"white"}},[t._v("\n                    REMISIONADO\n                  ")])],1):t._e(),"CANCELADO"===a.row.status?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"red","text-color":"white"}},[t._v("\n                    CANCELADO\n                  ")])],1):t._e(),"POSTERGADO"===a.row.status?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"deep-purple-7","text-color":"white"}},[t._v("\n                    PEDIDO POSTERGADO\n                  ")])],1):t._e(),"AUTORIZADO"===a.row.status&&!0===a.row.condition?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"positive","text-color":"white"}},[e("label",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openModaliBD(1,a.row.qty,a.row.product_id,a.row.shopping_cart_id,a.row.id)}}},[t._v(t._s("".concat(t.formatter.format(a.row.stock)," Pzas.")))])])],1):t._e(),"AUTORIZADO"===a.row.status&&!1===a.row.condition?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"negative","text-color":"white"}},[e("label",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openModaliBD(1,a.row.qty,a.row.product_id,a.row.shopping_cart_id,a.row.id)}}},[t._v(t._s("".concat(t.formatter.format(a.row.stock)," Pzas.")))])])],1):t._e(),"AUTORIZADO"===a.row.status&&!1===a.row.stock?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"negative","text-color":"white"}},[e("label",[t._v("SIN STOCK")])])],1):t._e(),e("q-td",{key:"status",staticStyle:{width:"5%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"REMISIONADO"==a.row.status?"positive":"AUTORIZADO"==a.row.status?"warning":"POSTERGADO"==a.row.status?"deep-purple-7":"CANCELADO"==a.row.status?"red":"primary","text-color":"white"}},[t._v("\n                    "+t._s(a.row.status)+"\n                  ")])],1)],1)]}}],null,!1,4141919179)}):t._e()],1):t._e()])])]),e("q-dialog",{attrs:{persistent:""},model:{value:t.generateInvoiceModal,callback:function(e){t.generateInvoiceModal=e},expression:"generateInvoiceModal"}},[e("q-card",{staticStyle:{"min-width":"400px"}},[e("q-card-section",{staticClass:"bg-teal-14 text-white"},[e("div",{staticClass:"text-h6"},[t._v("REMISIONAR PEDIDO")])]),e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha de venta",rules:t.saleDateRules},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.saleDate,callback:function(e){t.saleDate=e},expression:"saleDate"}},[e("q-popup-proxy",{ref:"invoiceSaleDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{locale:t.myLocale,mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return t.$refs.invoiceSaleDate.hide()}},model:{value:t.saleDate,callback:function(e){t.saleDate=e},expression:"saleDate"}})],1)])],1)],1),e("div",{staticClass:"col-xs-12"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",rules:t.customerBranchOfficeRules,label:"Cliente",disable:""},model:{value:t.shoppingCart.fields.customer_name,callback:function(e){t.$set(t.shoppingCart.fields,"customer_name",e)},expression:"shoppingCart.fields.customer_name"}})],1),e("div",{staticClass:"col-xs-12"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:t.destiny,options:t.customerBranchOfficeOptions,"emit-value":"","map-options":"",label:"Sucursal de cliente",rules:t.customerBranchOfficeRules},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-store-alt"}})]},proxy:!0}]),model:{value:t.customerBranchOffice,callback:function(e){t.customerBranchOffice=e},expression:"customerBranchOffice"}})],1),e("div",{staticClass:"col-xs-12"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",label:"Comentarios",type:"textarea"},on:{input:function(e){t.comments=e.toUpperCase()}},model:{value:t.comments,callback:function(e){t.comments=e},expression:"comments"}})],1)])]),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",icon:"fas fa-times-circle",label:"Cerrar"},on:{click:function(e){return t.closeGenerateInvoiceModal()}}}),e("q-btn",{attrs:{color:"positive",icon:"fas fa-check",label:"Remisionar"},on:{click:function(e){return t.generateInvoice()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmPartialORder,callback:function(e){t.confirmPartialORder=e},expression:"confirmPartialORder"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}}),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center"},[e("label",{staticStyle:{"font-size":"23px","text-align":"justify"}},[t._v(t._s(t.textv2))])]),e("br"),e("br"),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.openmodalGenerateInvoice()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmModal,callback:function(e){t.confirmModal=e},expression:"confirmModal"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("Alerta")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center"},[e("label",{staticStyle:{"font-size":"23px"}},[t._v(t._s(t.text))])]),e("br"),e("br"),t.buttonModal?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.edit()}}})],1):t._e()],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmCancelModal,callback:function(e){t.confirmCancelModal=e},expression:"confirmCancelModal"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("Alerta")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center text-center"},[e("label",{staticStyle:{"font-size":"23px"}},[t._v("¬øEst√° seguro de Cancelar el Pedido?")])]),e("br"),t.buttonModal?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.cancelar()}}})],1):t._e()],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.modalinBulkDetails,callback:function(e){t.modalinBulkDetails=e},expression:"modalinBulkDetails"}},[e("q-card",[e("div",{staticStyle:{width:"400px"}},[e("div",{staticClass:"bg-teal-6 q-pt-md q-pb-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 text-h6",staticStyle:{color:"white"}},[t._v("¬†¬†PARCIALIZACI√ìN DE PEDIDOS")]),e("div",{staticClass:"col-sm-2 pull-right q-pr-xs"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"col-md-7 col-xs-7 q-pa-md"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"#","reverse-fill-mask":"",label:"Cantidad."},on:{input:function(e){return t.inBulk_calculation()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}]),model:{value:t.baleQty,callback:function(e){t.baleQty=e},expression:"baleQty"}})],1),e("div",{staticClass:"col-md-5 col-xs-5 q-pa-md q-mt-md"},[e("q-btn",{attrs:{color:"positive",label:"Parcializar"},on:{click:function(e){return t.partializationinBulk()}}})],1)]),e("div",{staticClass:"row",staticStyle:{"margin-top":"15px"}},[e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 q-pl-md",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[t._v("DISPONIBLE")])])])]),e("q-separator",{staticStyle:{"margin-top":"10px"},attrs:{inset:""}}),e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 q-pa-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("label",[t._v(" "+t._s("".concat(t.formatter.format(t.dataBalesWeight)," Pzas."))+" ")])])])])],1)])])],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmModalPDF,callback:function(e){t.confirmModalPDF=e},expression:"confirmModalPDF"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6"},[t._v("CONFIRMACI√ìN DE ENVIO")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center"},[e("label",{staticStyle:{"font-size":"23px"}},[t._v("¬øDesea enviar el PDF del pedido al cliente?")])]),e("br"),e("br"),t.buttonModal?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.sendPDF()}}})],1):t._e()],1)],1)],1)},o=[],i=(a("14d9"),a("d3b7"),a("159b"),a("a9e3"),a("4de4"),a("99af"),a("b64b"),a("a15b"),a("aabb")),r=a("b5ae"),n=r.required,l={name:"EditRequestedOrder",validations:{saleDate:{required:n},customerBranchOffice:{required:n}},data:function(){return{myLocale:{days:"Domingo_Lunes_Martes_Mi√©rcoles_Jueves_Viernes_S√°bado".split("_"),daysShort:"Dom_Lun_Mar_Mi√©_Jue_Vie_S√°b".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1},term:null,confirmModalPDF:!1,confirmCancelModal:!1,role:null,cartStatus:"",confirmModal:!1,destiny:!1,text:"",textv2:"",buttonModal:!0,cndEditOrder:!0,cndPartialOrder:!1,confirmPartialORder:!1,modalBaleDetails:!1,modalinBulkDetails:!1,baleQty:0,dataBales:[],dataBalesWeight:0,dataBalesSum:0,idDetail:0,typePart:null,shoppingCart:{fields:{id:null,origen:null,customer_id:null,customer_name:null,price_list:null,user_id:null,user_name:null,user_email:null,status:null,comments:null,oc_date:null,oc_reference:null,payment_date:null,payment_reference:null,payment_method:null,applied_discount:null}},serverUrl:"http://api.alpez.beta.wasp.mx/",formatter:new Intl.NumberFormat("en-US"),currencyFormatter:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),inBulkColumnsSOL:[{name:"product_name",align:"left",label:"PRODUCTO",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"L√çNEA",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"CATEGOR√çA",field:"category_name",sortable:!0},{name:"qty",align:"right",label:"CANTIDAD",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"PRECIO PZA.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"IMPORTE",field:"amount",sortable:!0}],inBulkColumnsAUT:[{name:"product_name",align:"left",label:"PRODUCTO",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"L√çNEA",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"CATEGOR√çA",field:"category_name",sortable:!0},{name:"invoice_id",align:"left",label:"REMISI√ìN NO.",field:"invoice_id",sortable:!0},{name:"qty",align:"right",label:"CANTIDAD",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"PRECIO PZA.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"IMPORTE",field:"amount",sortable:!0},{name:"stock",align:"center",label:"STOCK",field:"stock",sortable:!0},{name:"status",align:"center",label:"ESTATUS",field:"status",sortable:!1}],pagination:{rowsPerPage:50},shoppingCartBaleDetails:[],shoppingCartInBulkDetails:[],shoppingCartLaminateDetails:[],customerBranchOfficeOptions:[],driverOptions:[],generateInvoiceModal:!1,saleDate:null,customerBranchOffice:null,driver:null,comments:null}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(4)||this.$store.getters["users/roles"].includes(2)||this.$store.getters["users/roles"].includes(23)||this.$store.getters["users/roles"].includes(12)||this.$store.getters["users/roles"].includes(20)||this.$router.push("/")},created:function(){this.fetchFromServer()},computed:{appliedDiscount:function(){var t=0;return null!=this.shoppingCart.fields.applied_discount&&(t=this.shoppingCart.fields.applied_discount),t+"%"},partialOrder:function(){var t=!1,e=0;return this.shoppingCartBaleDetails.length>0&&this.shoppingCartBaleDetails.forEach((function(a){"AUTORIZADO"===a.status&&(a.bale_qty?e+=Number(a.bale_qty):a.bales_qty?e+=Number(a.bales_qty):e+=Number(0),a.qty>e&&(t=!0))})),this.shoppingCartInBulkDetails.length>0&&this.shoppingCartInBulkDetails.forEach((function(e){"AUTORIZADO"===e.status&&e.stock>e.qty&&(t=!1)})),this.shoppingCartLaminateDetails.length>0&&this.shoppingCartLaminateDetails.forEach((function(e){"AUTORIZADO"===e.status&&e.stock>e.qty&&(t=!1)})),t},status:function(){var t=!0;return this.shoppingCartBaleDetails.forEach((function(e){"REMISIONADO"===e.status&&(t=!1)})),this.shoppingCartInBulkDetails.forEach((function(e){"REMISIONADO"===e.status&&(t=!1)})),this.shoppingCartLaminateDetails.forEach((function(e){"REMISIONADO"===e.status&&(t=!1)})),t},totalPrice:function(){var t=0,e=0;return this.shoppingCartInBulkDetails.forEach((function(a){t=Number(a.amount)/1.16/(Number(a.ieps)/100+1),e+=t})),this.currencyFormatter.format(e)},thisIeps:function(){var t=0,e=0;return this.shoppingCartInBulkDetails.forEach((function(a){t=Number(a.amount)/1.16-Number(a.amount)/1.16/(Number(a.ieps)/100+1),e+=t})),this.currencyFormatter.format(e)},thisIva:function(){var t=0,e=0;return this.shoppingCartInBulkDetails.forEach((function(a){t=Number(a.amount)-Number(a.amount/1.16),e+=t})),this.currencyFormatter.format(e)},thisTotal:function(){var t=0;return this.shoppingCartInBulkDetails.forEach((function(e){t+=Number(e.amount)})),this.currencyFormatter.format(t)},canGenerateInvoice:function(){var t=!1,e=this.shoppingCartInBulkDetails.filter((function(t){return t.condition&&"AUTORIZADO"===t.status})),a=0;return e&&(a=e.length),a>0&&(t=!0),t},saleDateRules:function(t){var e=this;return[function(t){return e.$v.saleDate.required||"El campo Fecha de venta es requerido."}]},customerBranchOfficeRules:function(t){var e=this;return[function(t){return e.$v.customerBranchOffice.required||"El campo Sucursal de cliente es requerido."}]},driverRules:function(t){var e=this;return[function(t){return e.$v.driver.required||"El campo Chofer es requerido."}]}},methods:{downloadOC:function(){console.log(this.shoppingCart.fields),this.shoppingCart.fields.oc_document?window.open("".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file1/").concat(this.shoppingCart.fields.id,"/",1,"/download"),"_blank"):this.$q.notify({message:"El pedido no tiene una Orden de Compra subida",position:"top",color:"warning"})},downloadTicket:function(){this.shoppingCart.fields.payment_document?window.open("".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file1/").concat(this.shoppingCart.fields.id,"/",2,"/download"),"_blank"):this.$q.notify({message:"El pedido no tiene un Ticket de Pago subido",position:"top",color:"warning"})},downloadFormatDate:function(){this.shoppingCart.fields.citation_document?window.open("".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file1/").concat(this.shoppingCart.fields.id,"/",3,"/download"),"_blank"):this.$q.notify({message:"El pedido no tiene un Formato de Cita subido",position:"top",color:"warning"})},fetchFromServer:function(){var t=this;this.role=this.$store.getters["users/roles"][0],this.$q.loading.show();var e=this.$route.params.id;i["a"].get("/shopping-carts/".concat(e)).then((function(a){var s=a.data;s.shoppingCart?(t.term=s.shoppingCart.oc_term,t.cartStatus=s.shoppingCart.status,s.shoppingCart.branchofficedestiny&&(t.customerBranchOffice=s.shoppingCart.branchofficedestiny,t.destiny=!0),t.shoppingCart.fields=s.shoppingCart,"SOLICITADO"===t.cartStatus?i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,t.$q.loading.hide()})):"DESCUENTO"===t.cartStatus?i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,t.$q.loading.hide()})):"AUTORIZADO"===t.cartStatus||"REMISIONADO"===t.cartStatus||"PARCIAL"===t.cartStatus?i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;console.log(a),t.shoppingCartInBulkDetails=a.details,i["a"].get("/customer-branch-offices/options").then((function(e){var a=e.data;t.customerBranchOfficeOptions=a.options.filter((function(e){return Number(e.customer)===Number(t.shoppingCart.fields.customer_id)})),t.$q.loading.hide()}))})):"CANCELADO"===t.cartStatus&&i["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,t.$q.loading.hide()}))):t.$router.push("/requested-orders")}))},approve:function(){var t=this;this.$q.loading.show(),i["a"].put("/shopping-carts/".concat(this.$route.params.id,"/approve")).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.$router.push("/shopping-carts"),t.$q.loading.hide()):t.$q.loading.hide()}))},cancelar:function(){var t=this;this.$q.loading.show(),i["a"].put("/shopping-carts/cancel/".concat(this.$route.params.id)).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.$router.push("/shopping-carts"),t.$q.loading.hide()):t.$q.loading.hide()}))},cancel:function(){this.confirmCancelModal=!0},confirm:function(){this.text="","SOLICITADO"===this.cartStatus?(this.confirmModal=!0,this.text="¬øDesea modificar el estatus de este pedido?",this.buttonModal=!0):"AUTORIZADO"===this.cartStatus&&(!0===this.status?(this.confirmModal=!0,this.text="¬øDesea modificar el estatus de este pedido?",this.buttonModal=!0):(this.confirmModal=!0,this.text="El pedido no se puede modificar, debido a que tiene productos remisionados.",this.buttonModal=!1))},editComents:function(){var t=this,e=[];e.cartId=Number(this.$route.params.id),e.comment=this.shoppingCart.fields.comments,i["a"].post("/shopping-carts/changeComments",e).then((function(e){var a=e.data;a.result?(t.$router.push("/shopping-carts"),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})):t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})}))},edit:function(){var t=this,e=[];e.cartId=Number(this.$route.params.id),i["a"].post("/shopping-carts/changeStatus",e).then((function(e){var a=e.data;a.result?(t.$router.push("/shopping-carts"),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})):t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})}))},openModaliBD:function(t,e,a,s,o){this.typePart=t,this.idDetail=o,this.baleQtyComparator=e,this.baleQty=e,this.bCalcProduct=a,this.bCalcSc=s,this.modalinBulkDetails=!0,this.inBulk_calculation(t,e,a,s)},inBulk_calculation:function(t,e){var a=this;if(this.baleQty=Number(this.baleQty),this.baleQtyComparator=Number(this.baleQtyComparator),this.dataBales=[],this.baleQty>this.baleQtyComparator)this.$q.dialog({title:"Error",message:"El calculo excede la cantidad del pedido, por favor verifique las cantidades.",persistent:!0});else{var s=[];s.baleQty=this.baleQty,s.cart_id=this.bCalcSc,s.product=this.bCalcProduct,1===this.typePart&&i["a"].post("/shopping-cart-in-bulk-details/getinBulkDetails",s).then((function(t){var e=t.data;a.dataBales=e.details,a.dataBalesSum=e.qtyBales,a.dataBalesWeight=e.qty,a.typePart=1}))}},partializationinBulk:function(){var t=this,e=[];e.idDetail=this.idDetail,e.baleQty=this.baleQty,e.baleQtyComparator=this.baleQtyComparator,e.product=this.bCalcProduct,console.log(this.baleQtyComparator),console.log(this.baleQty),this.baleQty>this.baleQtyComparator?this.$q.notify({message:"La Cantidad excede el limite",position:"top",color:"warning"}):1===this.typePart&&i["a"].post("/shopping-cart-in-bulk-details/partialization",e).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.modalinBulkDetails=!1,t.fetchFromServer()):t.modalinBulkDetails=!1}))},openmodalGenerateInvoice:function(){this.confirmPartialORder=!1,this.generateInvoiceModal=!0},openGenerateInvoiceModal:function(){!1===this.partialOrder?this.generateInvoiceModal=!0:(this.confirmPartialORder=!0,this.textv2="El stock del producto no cumple con la cantidad solicitada, se realizara la remision por la cantidad existente y se creara un detalle con el faltante.")},closeGenerateInvoiceModal:function(){this.generateInvoiceModal=!1,this.saleDate=null,this.driver=null,this.comments=null},generateInvoice:function(){var t=this;if(this.canGenerateInvoice){if(this.$v.saleDate.$reset(),this.$v.saleDate.$touch(),this.$v.customerBranchOffice.$reset(),this.$v.customerBranchOffice.$touch(),this.$v.saleDate.$error||this.$v.customerBranchOffice.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var e=[];e.saleDate=this.invertDate(this.saleDate),e.customerBranchOfficeId=this.customerBranchOffice,e.comments=this.comments,i["a"].put("/shopping-carts/".concat(this.$route.params.id,"/generate-invoice"),e).then((function(e){var a=e.data;if(a.message2)for(var s=0;s<Object.keys(a.message2).length;s++)t.$q.notify({message:a.message2[s].content,position:"top",color:a.result?"positive":"warning"});else t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"});a.result?(t.closeGenerateInvoiceModal(),t.$q.loading.hide(),t.fetchFromServer()):(t.closeGenerateInvoiceModal(),t.$q.loading.hide())}))}else this.$q.notify({message:"El pedido no se puede remisionar debido a que no hay stock existente",position:"top",color:"warning"})},invertDate:function(t){if(null!==t)var e=t.split("/").reverse().join("-");return e},sendPDF:function(){var t=this;this.$q.loading.show();var e=[];e.cartId=Number(this.$route.params.id),i["a"].post("/shopping-carts/sendPDF",e).then((function(e){var a=e.data;a.result?(t.$q.loading.hide(),t.$q.notify({message:"Correo enviado exitosamente",position:"top",color:a.result?"positive":"warning"}),t.confirmModalPDF=!1):(t.$q.loading.hide(),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),t.confirmModalPDF=!1)}))},downloadPDF:function(){var t="http://api.alpez.beta.wasp.mx/"+"shopping-carts/pdf/".concat(this.$route.params.id);window.open(t,"_blank")},confirmSendPDF:function(){this.confirmModalPDF=!0},openActions:function(t){this.$router.push("/storage-exits/".concat(t))}}},c=l,d=a("2877"),p=a("9989"),u=a("ead5"),m=a("079e"),h=a("9c40"),f=a("05c0"),g=a("27f9"),b=a("0016"),v=a("ddd8"),y=a("7cbe"),C=a("52ee"),_=a("eaac"),q=a("bd08"),k=a("db86"),w=a("b047"),D=a("24e8"),S=a("f09f"),O=a("a370"),x=a("4b7e"),I=a("eb85"),A=a("7f67"),$=a("eebe"),P=a.n($),B=Object(d["a"])(c,s,o,!1,null,null,null);e["default"]=B.exports;P()(B,"components",{QPage:p["a"],QBreadcrumbs:u["a"],QBreadcrumbsEl:m["a"],QBtn:h["a"],QTooltip:f["a"],QInput:g["a"],QIcon:b["a"],QSelect:v["a"],QPopupProxy:y["a"],QDate:C["a"],QTable:_["a"],QTr:q["a"],QTd:k["a"],QChip:w["a"],QDialog:D["a"],QCard:S["a"],QCardSection:O["a"],QCardActions:x["a"],QSeparator:I["a"]}),P()(B,"directives",{ClosePopup:A["a"]})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{"755c":function(e,r,i){"use strict";i.r(r);i("b0c0");var t=function(){var e=this,r=e._self._c;return r("q-page",{staticClass:"bg-grey-3"},[r("div",{staticClass:"q-pa-sm panel-header"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-3"},[r("div",{staticClass:"q-pa-md q-gutter-sm"},[r("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[r("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),r("q-breadcrumbs-el",{attrs:{label:"Choferes",to:"/drivers"}}),r("q-breadcrumbs-el",{attrs:{label:"Nuevo Chofer"}})],1)],1)])])]),r("div",{staticClass:"q-pa-md bg-grey-3"},[r("div",{staticClass:"row bg-white border-panel"},[r("div",{staticClass:"col q-pa-md"},[r("div",{staticClass:"row",staticStyle:{"padding-bottom":"15px"}},[e._v("\n          Información General\n        ")]),r("div",{staticClass:"row q-col-gutter-xs"},[r("div",{staticClass:"col-xs-12 col-sm-5 col-md-5 col-lg-5"},[r("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.driver.fields.name.$error,label:"Nombre",rules:e.nameRules},on:{input:function(r){e.driver.fields.name=r.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.driver.fields.name,callback:function(r){e.$set(e.driver.fields,"name",r)},expression:"driver.fields.name"}})],1),r("div",{staticClass:"col-xs-12 col-sm-3 col-md-3 col-lg-3"},[r("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.driver.fields.rfc.$error,label:"RFC",rules:e.rfcRules},on:{input:function(r){e.driver.fields.rfc=r.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"insert_drive_file"}})]},proxy:!0}]),model:{value:e.driver.fields.rfc,callback:function(r){e.$set(e.driver.fields,"rfc",r)},expression:"driver.fields.rfc"}})],1),r("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 col-lg-4"},[r("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.driver.fields.license.$error,label:"Licencia",rules:e.licenseRules},on:{input:function(r){e.driver.fields.license=r.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"fas fa-id-card"}})]},proxy:!0}]),model:{value:e.driver.fields.license,callback:function(r){e.$set(e.driver.fields,"license",r)},expression:"driver.fields.license"}})],1)]),r("div",{staticClass:"col-xs-12 col-sm-6 pull-right"},[r("q-btn",{attrs:{color:"positive",icon:"save",label:"Guardar"},on:{click:function(r){return e.createDriver()}}})],1)])])])])},s=[],n=i("7ec2"),o=i.n(n),c=i("c973"),a=i.n(c),l=i("ded3"),u=i.n(l),d=(i("caad"),i("2532"),i("14d9"),i("99af"),i("4de4"),i("d3b7"),i("aabb")),f=i("b5ae"),v=f.required,p=f.maxLength,b={name:"NewDriver",validations:{driver:{fields:{name:{required:v,maxLength:p(100)},rfc:{required:v,maxLength:p(15)},license:{required:v,maxLength:p(20)}}}},data:function(){return{driver:{fields:{name:null,rfc:null,license:null,street:null,estado_id:null,municipio_id:null,postal_code_id:null,suburb_id:null,indoor_number:null,outdoor_number:null,between_street:null,city_id:null}},postal_codes:[],postal_codes_options:[],suburbs:[],suburbs_options:[],cities:[],cityOptions:[],selectMunicipio:[],MunicipioOptions:[],selectEstados:[],estadoOptions:[]}},computed:{nameRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.name.required||"El campo Nombre es requerido."},function(e){return r.$v.driver.fields.name.maxLength||"El campo Nombre no debe exceder los 100 dígitos."}]},rfcRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.rfc.required||"El campo RFC es requerido."},function(e){return r.$v.driver.fields.rfc.maxLength||"El campo RFC no debe exceder los 15 dígitos."}]},licenseRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.license.required||"El campo Licencia es requerido."},function(e){return r.$v.driver.fields.license.maxLength||"El campo Licencia no debe exceder los 20 dígitos."}]},streetRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.street.required||"El campo Calle es requerido."},function(e){return r.$v.driver.fields.street.maxLength||"El campo Calle no debe exceder los 100 dígitos."}]},cpRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.postal_code_id.required||"El campo código postal es requerido."}]},outdoor_numberRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.outdoor_number.required||"El campo Número exterior es requerido."}]},suburbRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.suburb_id.required||"El campo Colonia es requerido."}]},between_streetRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.between_street.required||"El campo Entre calles es requerido."}]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(2)||this.$store.getters["users/roles"].includes(8)||this.$router.push("/")},created:function(){this.getEstados()},methods:{createDriver:function(){var e=this;if(this.$v.driver.fields.$reset(),this.$v.driver.fields.$touch(),this.$v.driver.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var r=u()({},this.driver.fields);d["a"].post("/drivers",r).then((function(r){var i=r.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(e.$q.loading.hide(),e.$router.push("/drivers/".concat(i.id))):e.$q.loading.hide()}))},getEstados:function(){var e=this;this.selectEstados=[],d["a"].get("/branch-offices/states").then((function(r){var i=r.data;e.selectEstados=i.options})).catch((function(e){return e}))},getPostalCodes:function(){var e=arguments,r=this;return a()(o()().mark((function i(){var t;return o()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t=e.length>0&&void 0!==e[0]?e[0]:"",t=""===t?"0":t,i.next=4,d["a"].get("/branch-offices/postal_codes/".concat(t,"/").concat(r.driver.fields.municipio_id)).then((function(e){var i=e.data;r.postal_codes=i.options})).catch((function(e){return e}));case 4:case"end":return i.stop()}}),i)})))()},getMunicipiosbyEstado:function(e){var r=arguments,i=this;return a()(o()().mark((function t(){var s;return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=r.length>1&&void 0!==r[1]&&r[1],i.driver.fields.postal_code_id=s?null:i.driver.fields.postal_code_id,i.driver.fields.municipio_id=null,i.driver.fields.city_id=null,i.selectMunicipio=[],i.getcities(e),t.next=8,d["a"].get("/branch-offices/municipalities/".concat(e,"/").concat(i.driver.fields.postal_code_id)).then((function(e){var r=e.data;i.selectMunicipio=r.options})).catch((function(e){return e}));case 8:case"end":return t.stop()}}),t)})))()},getcities:function(e){var r=this;return a()(o()().mark((function i(){return o()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r.cities=[],i.next=3,d["a"].get("/branch-offices/cities/".concat(e,"/").concat(r.driver.fields.postal_code_id)).then((function(e){var i=e.data;r.cities=i.options})).catch((function(e){return e}));case 3:case"end":return i.stop()}}),i)})))()},getSuburbsByPostalCode:function(e){var r=this;return a()(o()().mark((function i(){return o()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r.suburbs=[],r.driver.fields.suburb_id=null,r.driver.fields.municipio_id=null,r.driver.fields.estado_id=null,r.driver.fields.city_id=null,r.selectMunicipio=[],null===e){i.next=19;break}return r.driver.fields.estado_id=r.postal_codes.filter((function(r){return r.value===e}))[0].state_id,r.estadoOptions=r.selectEstados.filter((function(e){return e.value===r.driver.fields.estado_id})),i.next=11,r.getMunicipiosbyEstado(r.driver.fields.estado_id);case 11:return r.driver.fields.municipio_id=r.postal_codes.filter((function(r){return r.value===e}))[0].municipality_id,r.MunicipioOptions=r.selectMunicipio.filter((function(e){return e.value===r.driver.fields.municipio_id})),i.next=15,r.getcities(r.driver.fields.estado_id);case 15:return r.driver.fields.city_id=r.postal_codes.filter((function(r){return r.value===e}))[0].city_id,r.cityOptions=r.cities.filter((function(e){return e.value===r.driver.fields.city_id})),i.next=19,d["a"].get("/branch-offices/suburbs/".concat(e)).then((function(e){var i=e.data;r.suburbs=i.options,r.suburbs_options=i.options})).catch((function(e){return e}));case 19:case"end":return i.stop()}}),i)})))()},filterMunicipio:function(e,r,i){var t=this;r((function(){var r=e.toLowerCase();t.MunicipioOptions=t.selectMunicipio.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))},filterEstado:function(e,r,i){var t=this;r((function(){var r=e.toLowerCase();t.estadoOptions=t.selectEstados.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))},filterPostalCodes:function(e,r,i){var t=this;r(a()(o()().mark((function r(){var i;return o()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.toLowerCase(),r.next=3,t.getPostalCodes(i);case 3:case"end":return r.stop()}}),r)}))))},filterSuburbs:function(e,r,i){var t=this;r((function(){var r=e.toLowerCase();t.suburbs_options=t.suburbs.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))},filterCity:function(e,r,i){var t=this;r((function(){var r=e.toLowerCase();t.cityOptions=t.cities.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))}}},m=b,h=i("2877"),g=i("9989"),_=i("ead5"),q=i("079e"),x=i("27f9"),w=i("0016"),C=i("9c40"),$=i("ddd8"),y=i("66e5"),E=i("4074"),L=i("eebe"),k=i.n(L),O=Object(h["a"])(m,t,s,!1,null,null,null);r["default"]=O.exports;k()(O,"components",{QPage:g["a"],QBreadcrumbs:_["a"],QBreadcrumbsEl:q["a"],QInput:x["a"],QIcon:w["a"],QBtn:C["a"],QSelect:$["a"],QItem:y["a"],QItemSection:E["a"]})}}]);
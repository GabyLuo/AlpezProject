(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{f023:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("q-page",[t("div",{staticClass:"q-pa-sm panel-header"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8"},[t("q-btn",{attrs:{color:"primary",icon:"keyboard_backspace",label:"Regresar"},on:{click:function(t){return e.backToGrid()}}}),t("span",{staticClass:"q-ml-md grey-8 fs28 page-title"},[e._v("Nueva apertura de paca")])],1),t("div",{staticClass:"col-sm-4"},[t("div",{staticClass:"q-pa-md q-gutter-sm"},[t("q-breadcrumbs",{attrs:{align:"right"}},[t("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),t("q-breadcrumbs-el",{attrs:{label:"Apertura de pacas",to:"/bale-opening"}}),t("q-breadcrumbs-el",{attrs:{label:"Nuevo"}})],1)],1)])])]),t("div",{staticClass:"q-pa-md bg-grey-3"},[t("div",{staticClass:"row bg-white border-panel"},[t("div",{staticClass:"col q-pa-md"},[t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-4 text-center"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.branchOfficeOptions,label:"Sucursal",rules:e.branchOfficeRules},on:{input:function(t){return e.updateBranchOffice()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-store-alt"}})]},proxy:!0}]),model:{value:e.baleOpening.fields.branchOffice,callback:function(t){e.$set(e.baleOpening.fields,"branchOffice",t)},expression:"baleOpening.fields.branchOffice"}})],1),t("div",{staticClass:"col-xs-12 col-sm-4 text-center"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.storageOptions,label:"Almacén de pacas",rules:e.baleStorageRules,disable:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}]),model:{value:e.baleOpening.fields.baleStorage,callback:function(t){e.$set(e.baleOpening.fields,"baleStorage",t)},expression:"baleOpening.fields.baleStorage"}})],1),t("div",{staticClass:"col-xs-12 col-sm-4 text-center"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.storageOptions,label:"Almacén fibra abierta",rules:e.inBulkStorageRules,disable:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}]),model:{value:e.baleOpening.fields.inBulkStorage,callback:function(t){e.$set(e.baleOpening.fields,"inBulkStorage",t)},expression:"baleOpening.fields.inBulkStorage"}})],1),t("div",{staticClass:"col-xs-12 col-sm-6 text-center"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.operatorOptions,label:"Operador",rules:e.operatorRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fa fa-user"}})]},proxy:!0}]),model:{value:e.baleOpening.fields.operator,callback:function(t){e.$set(e.baleOpening.fields,"operator",t)},expression:"baleOpening.fields.operator"}})],1),t("div",{staticClass:"col-xs-12 col-sm-6 text-center"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.baleOpening.fields.openedBy.$error,label:"Responsable",rules:e.openedByRules},on:{input:function(t){e.baleOpening.fields.openedBy=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fa fa-user"}})]},proxy:!0}]),model:{value:e.baleOpening.fields.openedBy,callback:function(t){e.$set(e.baleOpening.fields,"openedBy",t)},expression:"baleOpening.fields.openedBy"}})],1)]),t("div",{staticClass:"row q-mb-sm q-mt-md"},[t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},[t("q-btn",{attrs:{color:"positive",icon:"save",label:"Guardar"},on:{click:function(t){return e.createSale()}}})],1)])])])])])},r=[],s=a("ded3"),i=a.n(s),o=(a("99af"),a("4d90"),a("d3b7"),a("25f0"),a("caad"),a("2532"),a("14d9"),a("4de4"),a("a9e3"),a("aabb")),l=a("b5ae"),c=l.required,u=l.maxLength,d={name:"NewBaleOpening",validations:{baleOpening:{fields:{branchOffice:{required:c},baleStorage:{required:c},inBulkStorage:{required:c},operator:{required:c},openedBy:{required:c,maxLength:u(30)}}}},data:function(){return{baleOpening:{fields:{saleDate:"".concat((new Date).getFullYear(),"/").concat(((new Date).getMonth()+1).toString().padStart(2,"0"),"/").concat((new Date).getDate().toString().padStart(2,"0")),baleStorage:null,inBulkStorage:null,openedBy:null}},branchOfficeOptions:[],storageOptions:[],operatorOptions:[]}},computed:{branchOfficeRules:function(e){var t=this;return[function(e){return t.$v.baleOpening.fields.branchOffice.required||"El campo Sucursal es requerido."}]},baleStorageRules:function(e){var t=this;return[function(e){return t.$v.baleOpening.fields.baleStorage.required||"El campo Almacén de pacas es requerido."}]},inBulkStorageRules:function(e){var t=this;return[function(e){return t.$v.baleOpening.fields.inBulkStorage.required||"El campo Almacén fibra abierta es requerido."}]},operatorRules:function(e){var t=this;return[function(e){return t.$v.baleOpening.fields.operator.required||"El campo Operador es requerido."}]},openedByRules:function(e){var t=this;return[function(e){return t.$v.baleOpening.fields.openedBy.required||"El campo Responsable es requerido."},function(e){return t.$v.baleOpening.fields.openedBy.maxLength||"El campo Responsable no debe exceder los 30 dígitos."}]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(2)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(4)||this.$store.getters["users/roles"].includes(5)||this.$store.getters["users/roles"].includes(13)||this.$router.push("/")},created:function(){this.fetchFromServer()},methods:{fetchFromServer:function(){var e=this;this.$q.loading.show(),o["a"].get("/branch-offices/options").then((function(t){var a=t.data;e.branchOfficeOptions=a.options,o["a"].get("/storages/options").then((function(t){var a=t.data;e.storageOptions=a.options,o["a"].get("/operators/options").then((function(t){var a=t.data;e.operatorOptions=a.options,e.$q.loading.hide()}))}))}))},backToGrid:function(){this.$router.push("/bale-opening")},updateBranchOffice:function(){var e=this;null==this.baleOpening.fields.branchOffice||null==this.baleOpening.fields.branchOffice.value?(this.baleOpening.fields.baleStorage=null,this.baleOpening.fields.inBulkStorage=null):(this.baleOpening.fields.baleStorage=this.storageOptions.filter((function(t){return Number(t.branchOffice)===Number(e.baleOpening.fields.branchOffice.value)&&1===Number(t.storageType)}))[0],this.baleOpening.fields.inBulkStorage=this.storageOptions.filter((function(t){return Number(t.branchOffice)===Number(e.baleOpening.fields.branchOffice.value)&&2===Number(t.storageType)}))[0])},createSale:function(){var e=this;if(this.$v.baleOpening.fields.$reset(),this.$v.baleOpening.fields.$touch(),this.$v.baleOpening.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=[];t.branchOffice=Number(i()({},this.baleOpening.fields).branchOffice.value),t.operator=Number(i()({},this.baleOpening.fields).operator.value),t.openedBy=i()({},this.baleOpening.fields).openedBy,o["a"].post("/bale-openings",t).then((function(t){var a=t.data;e.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result&&(e.$q.loading.hide(),e.$router.push("/bale-opening/".concat(a.baleOpening.id))),e.$q.loading.hide()}))}}},p=d,f=a("2877"),b=a("9989"),g=a("9c40"),h=a("ead5"),O=a("079e"),m=a("ddd8"),v=a("0016"),q=a("27f9"),$=a("eebe"),S=a.n($),y=Object(f["a"])(p,n,r,!1,null,null,null);t["default"]=y.exports;S()(y,"components",{QPage:b["a"],QBtn:g["a"],QBreadcrumbs:h["a"],QBreadcrumbsEl:O["a"],QSelect:m["a"],QIcon:v["a"],QInput:q["a"]})}}]);
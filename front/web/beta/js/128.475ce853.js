(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[128],{e107:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("q-page",[e("div",{staticClass:"q-pa-sm panel-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-9"},[e("span",{staticClass:"q-ml-md grey-8 fs28 page-title"},[t._v("Pedido solicitado #"+t._s(t.$route.params.id))])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{attrs:{align:"right"}},[e("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),e("q-breadcrumbs-el",{attrs:{label:"Pedidos solicitados",to:"/requested-orders"}}),e("q-breadcrumbs-el",{attrs:{label:"Detalles"}})],1)],1)])])]),e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cliente",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.customer_name,callback:function(e){t.$set(t.shoppingCart.fields,"customer_name",e)},expression:"shoppingCart.fields.customer_name"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Nombre usuario",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-user"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.user_name,callback:function(e){t.$set(t.shoppingCart.fields,"user_name",e)},expression:"shoppingCart.fields.user_name"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Estatus",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-battery-full"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.status,callback:function(e){t.$set(t.shoppingCart.fields,"status",e)},expression:"shoppingCart.fields.status"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Precio lista",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-list"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.price_list,callback:function(e){t.$set(t.shoppingCart.fields,"price_list",e)},expression:"shoppingCart.fields.price_list"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Importe total",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.totalPrice,callback:function(e){t.totalPrice=e},expression:"totalPrice"}})],1),e("div",{staticClass:"col-xs-12 col-sm-1"},[e("q-btn",{attrs:{color:"positive",icon:"check",label:"Aprobar"},on:{click:function(e){return t.approve()}}})],1),e("div",{staticClass:"col-xs-12"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Comentarios",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"chat"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.comments,callback:function(e){t.$set(t.shoppingCart.fields,"comments",e)},expression:"shoppingCart.fields.comments"}})],1)]),e("div",{staticClass:"q-pa-md"},[t.shoppingCartBaleDetails.length>0?e("q-table",{attrs:{title:"Fibra",dense:"","hide-bottom":"",data:t.shoppingCartBaleDetails,columns:t.baleColumns,"row-key":"product_name"},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"qty",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," KG.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," ")))]),e("q-td",{key:"amount",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," ")))])],1)]}}],null,!1,2491438328)}):t._e(),t.shoppingCartInBulkDetails.length>0?e("br"):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-table",{attrs:{title:"Fibra abierta",dense:"","hide-bottom":"",data:t.shoppingCartInBulkDetails,columns:t.inBulkColumns,"row-key":"product_name"},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"qty",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," KG.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," ")))]),e("q-td",{key:"amount",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," ")))])],1)]}}],null,!1,2491438328)}):t._e(),t.shoppingCartLaminateDetails.length>0?e("br"):t._e(),t.shoppingCartLaminateDetails.length>0?e("q-table",{attrs:{title:"Laminado",dense:"","hide-bottom":"",data:t.shoppingCartLaminateDetails,columns:t.laminateColumns,"row-key":"product_name"},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"qty",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," KG.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," ")))]),e("q-td",{key:"amount",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," ")))])],1)]}}],null,!1,2491438328)}):t._e()],1)])])])])},s=[],o=(a("caad"),a("2532"),a("14d9"),a("d3b7"),a("159b"),a("a9e3"),a("aabb")),n={name:"EditRequestedOrder",data:function(){return{shoppingCart:{fields:{id:null,customer_id:null,customer_name:null,price_list:null,user_id:null,user_name:null,user_email:null,status:null,comments:null}},serverUrl:"http://api.alpez.beta.wasp.mx/",formatter:new Intl.NumberFormat("en-US"),currencyFormatter:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),baleColumns:[{name:"product_name",align:"left",label:"Producto",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"Línea",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"Categoría",field:"category_name",sortable:!0},{name:"qty",align:"right",label:"Cantidad",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"Precio kg.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"Importe",field:"amount",sortable:!0}],inBulkColumns:[{name:"product_name",align:"left",label:"Producto",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"Línea",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"Categoría",field:"category_name",sortable:!0},{name:"qty",align:"right",label:"Cantidad",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"Precio kg.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"Importe",field:"amount",sortable:!0}],laminateColumns:[{name:"product_name",align:"left",label:"Producto",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"Línea",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"Categoría",field:"category_name",sortable:!0},{name:"qty",align:"right",label:"Cantidad",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"Precio kg.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"Importe",field:"amount",sortable:!0}],shoppingCartBaleDetails:[],shoppingCartInBulkDetails:[],shoppingCartLaminateDetails:[]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(17)||this.$router.push("/")},created:function(){this.fetchFromServer()},computed:{totalPrice:function(){var t=0;return this.shoppingCartBaleDetails.forEach((function(e){t+=Number(e.amount)})),this.shoppingCartInBulkDetails.forEach((function(e){t+=Number(e.amount)})),this.shoppingCartLaminateDetails.forEach((function(e){t+=Number(e.amount)})),this.currencyFormatter.format(t)}},methods:{fetchFromServer:function(){var t=this;this.$q.loading.show();var e=this.$route.params.id;o["a"].get("/shopping-carts/".concat(e)).then((function(a){var r=a.data;r.shoppingCart?(t.shoppingCart.fields=r.shoppingCart,o["a"].get("/shopping-cart-bale-details/shopping-cart/".concat(e)).then((function(a){var r=a.data;t.shoppingCartBaleDetails=r.details,o["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(a){var r=a.data;t.shoppingCartInBulkDetails=r.details,o["a"].get("/shopping-cart-laminate-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;t.shoppingCartLaminateDetails=a.details,t.$q.loading.hide()}))}))}))):t.$router.push("/requested-orders")}))},approve:function(){var t=this;this.$q.loading.show(),o["a"].put("/shopping-carts/".concat(this.$route.params.id,"/approve")).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.$router.push("/requested-orders"),t.$q.loading.hide()):t.$q.loading.hide()}))}}},l=n,i=a("2877"),c=a("9989"),p=a("ead5"),d=a("079e"),u=a("27f9"),m=a("0016"),g=a("9c40"),f=a("eaac"),h=a("bd08"),_=a("db86"),b=a("eebe"),y=a.n(b),q=Object(i["a"])(l,r,s,!1,null,null,null);e["default"]=q.exports;y()(q,"components",{QPage:c["a"],QBreadcrumbs:p["a"],QBreadcrumbsEl:d["a"],QInput:u["a"],QIcon:m["a"],QBtn:g["a"],QTable:f["a"],QTr:h["a"],QTd:_["a"]})}}]);
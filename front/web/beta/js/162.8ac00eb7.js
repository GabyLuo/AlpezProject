(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[162],{c155:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"bg-grey-3"},[e("div",{staticClass:"q-pa-sm panel-header"},[e("div",{staticClass:"row q-col-gutter-md"},[e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[e("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),e("q-breadcrumbs-el",{attrs:{label:"Pedidos",to:"/shopping-carts"}}),e("q-breadcrumbs-el",{domProps:{textContent:t._s(t.$route.params.id)}})],1)],1)]),e("div",{staticClass:"col-sm-9 pull-right"},[e("div",{staticClass:"q-pa-sm gutter-sm"},["COTIZADO"===t.cartStatus||"AUTORIZADO"===t.cartStatus&&(1===this.role||20===this.role||17===this.role||29===this.role||28===this.role||4===this.role||23===this.role||22===this.role)?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"red",icon:"block",label:"CANCELAR"},on:{click:function(e){return t.cancel()}}}):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"blue",icon:"fas fa-file-pdf"},nativeOn:{click:function(e){return t.quotationNotePDF()}}},[e("q-tooltip",{attrs:{"content-class":"bg-blue"}},[t._v("Cotización")])],1):t._e(),"NUEVO"===t.cartStatus||1!==this.role&&20!==this.role&&17!==this.role&&29!==this.role&&28!==this.role&&4!==this.role&&23!==this.role&&4!==this.role&&22!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"blue",icon:null===t.shoppingCart.fields.document_id?"cloud_upload":"visibility"},on:{click:function(e){null===t.shoppingCart.fields.document_id?t.showDocumentFile():t.downloadDocumentOc()}}},[null!==t.shoppingCart.fields.document_id?e("q-tooltip",{attrs:{"content-class":"bg-blue"}},[t._v("Descargar orden de compra")]):t._e(),null!==t.shoppingCart.fields.document_id?e("q-menu",[e("q-list",{staticClass:"scroll",staticStyle:{"min-width":"100px"},attrs:{link:"",separator:""}},[e("q-item",{attrs:{clickable:!0},nativeOn:{click:function(e){return t.showDocumentFileOcMenu()}}},[e("q-item-section",[t._v("Ver")])],1),e("q-item",{attrs:{clickable:!0},nativeOn:{click:function(e){return t.downloadDocumentFileOc()}}},[e("q-item-section",[t._v("Descargar")])],1),e("q-item",{attrs:{clickable:!0},nativeOn:{click:function(e){return t.deleteFileOc()}}},[e("q-item-section",[t._v("Eliminar")])],1)],1)],1):t._e()],1),"NUEVO"===t.cartStatus||1!==this.role&&20!==this.role&&17!==this.role&&29!==this.role&&28!==this.role&&4!==this.role&&22!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"red",icon:"fas fa-file-pdf"},on:{click:function(e){return t.downloadPDF()}}},[e("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("Descargar PDF")])],1),"NUEVO"===t.cartStatus||1!==this.role&&20!==this.role&&17!==this.role&&25!==this.role&&28!==this.role&&29!==this.role&&4!==this.role&&22!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"purple",icon:"mail"},on:{click:function(e){return t.confirmSendPDF()}}},[e("q-tooltip",{attrs:{"content-class":"bg-purple"}},[t._v("Enviar email")])],1),"COTIZADO"===t.cartStatus||"AUTORIZADO"===t.cartStatus&&(1===this.role||20===this.role||23===this.role||20===this.role||25===this.role||27===this.role||28===this.role||29===this.role||23===this.role||4===this.role||22===this.role)?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"warning",icon:"fas fa-undo-alt"},on:{click:function(e){return t.confirm()}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Rechazar Pedido")])],1):t._e(),!0===t.canCancel?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"negative",icon:"block"},on:{click:function(e){return t.cancelarRemision()}}},[e("q-tooltip",{attrs:{"content-class":"bg-positive"}},[t._v("Cancelar")])],1):t._e(),"COTIZADO"!==t.cartStatus||1!==this.role&&23!==this.role&&25!==this.role&&27!==this.role&&28!==this.role&&22!==this.role&&25!==this.role&&27!==this.role&&28!==this.role&&29!==this.role&&4!==this.role&&20!==this.role&&22!==this.role?t._e():e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{color:"positive",icon:"check",label:"AUTORIZAR"},on:{click:function(e){return t.approve()}}}),"AUTORIZADO"===t.cartStatus||"PARCIAL"===t.cartStatus&&(1===this.role||2===this.role||20===this.role||4===this.role||27===this.role||29===this.role||4===this.role)?e("q-btn",{staticStyle:{"margin-left":"8px"},attrs:{disable:1!=this.role&&2!=this.role&&20!=this.role&&4!=this.role&&27!=this.role&&29!=this.role&&4!=this.role&&22!=this.role,color:"positive",icon:"check",label:"REMISIONAR"},on:{click:function(e){return t.openGenerateInvoiceModal()}}}):t._e()],1)])])]),e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Fecha",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.created,callback:function(e){t.$set(t.shoppingCart.fields,"created",e)},expression:"shoppingCart.fields.created"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Tipo de pedido",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-cash-register"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.typeOrder,callback:function(e){t.$set(t.shoppingCart.fields,"typeOrder",e)},expression:"shoppingCart.fields.typeOrder"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Sucursal de envío",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.origen,callback:function(e){t.$set(t.shoppingCart.fields,"origen",e)},expression:"shoppingCart.fields.origen"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":t.colorInput,filled:"",label:"Estatuss",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-battery-full"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.status,callback:function(e){t.$set(t.shoppingCart.fields,"status",e)},expression:"shoppingCart.fields.status"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Almacen de envío",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.storage_id,callback:function(e){t.$set(t.shoppingCart.fields,"storage_id",e)},expression:"shoppingCart.fields.storage_id"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Vendedor",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-user"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.user_name,callback:function(e){t.$set(t.shoppingCart.fields,"user_name",e)},expression:"shoppingCart.fields.user_name"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cliente",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-shopping-cart"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.customer_name,callback:function(e){t.$set(t.shoppingCart.fields,"customer_name",e)},expression:"shoppingCart.fields.customer_name"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Precio lista",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-list"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.price_list,callback:function(e){t.$set(t.shoppingCart.fields,"price_list",e)},expression:"shoppingCart.fields.price_list"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"No. Orden"},on:{blur:function(e){return t.editReeference()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"code"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.oc_reference,callback:function(e){t.$set(t.shoppingCart.fields,"oc_reference",e)},expression:"shoppingCart.fields.oc_reference"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Subtotal",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.totalPrice,callback:function(e){t.totalPrice=e},expression:"totalPrice"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"IVA",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.thisIva,callback:function(e){t.thisIva=e},expression:"thisIva"}})],1),e("div",{staticClass:"col-xs-12 col-sm-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Total",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-dollar-sign"}})]},proxy:!0}]),model:{value:t.thisTotal,callback:function(e){t.thisTotal=e},expression:"thisTotal"}})],1),e("div",{staticClass:"col-xs-12 col-sm-6"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",disable:"COTIZADO"!==t.cartStatus&&(1!==this.role||20!==this.role||23!=this.roles),label:"Comentarios"},on:{blur:function(e){return t.editComents()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"chat"}})]},proxy:!0}]),model:{value:t.shoppingCart.fields.comments,callback:function(e){t.$set(t.shoppingCart.fields,"comments",e)},expression:"shoppingCart.fields.comments"}})],1),"CONTADO"===t.term?e("div",{staticClass:"col-xs-3"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha de Pago",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:t.shoppingCart.fields.payment_date,callback:function(e){t.$set(t.shoppingCart.fields,"payment_date",e)},expression:"shoppingCart.fields.payment_date"}},[e("q-popup-proxy",{ref:"paymentDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{locale:t.myLocale,mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return t.$refs.paymentDate.hide()}},model:{value:t.shoppingCart.fields.payment_date,callback:function(e){t.$set(t.shoppingCart.fields,"payment_date",e)},expression:"shoppingCart.fields.payment_date"}})],1)])],1)],1):t._e(),"CONTADO"===t.term?e("div",{staticClass:"col-xs-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Forma de pago",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"attach_money"}})]},proxy:!0}],null,!1,2568092296),model:{value:t.shoppingCart.fields.payment_method,callback:function(e){t.$set(t.shoppingCart.fields,"payment_method",e)},expression:"shoppingCart.fields.payment_method"}})],1):t._e(),"CONTADO"===t.term?e("div",{staticClass:"col-xs-3"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Referencia",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"insert_drive_file"}})]},proxy:!0}],null,!1,1062554705),model:{value:t.shoppingCart.fields.payment_reference,callback:function(e){t.$set(t.shoppingCart.fields,"payment_reference",e)},expression:"shoppingCart.fields.payment_reference"}})],1):t._e(),e("div",{staticClass:"col-xs-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Descuento aplicado",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-percentage"}})]},proxy:!0}]),model:{value:t.appliedDiscount,callback:function(e){t.appliedDiscount=e},expression:"appliedDiscount"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Prestamo",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-cash-register"}})]},proxy:!0}]),model:{value:t.loan,callback:function(e){t.loan=e},expression:"loan"}})],1),e("div",{staticClass:"col-xs-12 col-md-2"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:[{label:"NORMAL",value:0},{label:"ESPECIAL",value:1}],"use-input":"",disable:"",label:"Pedido","emit-value":"","map-options":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"grade"}})]},proxy:!0}]),model:{value:t.special_order,callback:function(e){t.special_order=e},expression:"special_order"}})],1)]),"COTIZADO"===t.cartStatus?e("div",{staticClass:"q-pa-md"},[t.shoppingCartInBulkDetails.length>0?e("br"):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-table",{attrs:{title:"PRODUCTOS",dense:"","hide-bottom":"",data:t.shoppingCartInBulkDetails,columns:t.inBulkColumnsSOL,pagination:t.pagination,"row-key":"product_name"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"qty",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," Pzas.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," ")))]),e("q-td",{key:"amount",staticClass:"pull-right",staticStyle:{width:"15%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," ")))])],1)]}}],null,!1,360565284)}):t._e()],1):t._e(),"AUTORIZADO"===t.cartStatus||"REMISIONADO"===t.cartStatus||"CANCELADO"==t.cartStatus||"PARCIAL"==t.cartStatus?e("div",{staticClass:"q-pa-md"},[t.shoppingCartInBulkDetails.length>0?e("br"):t._e(),t.shoppingCartInBulkDetails.length>0?e("q-table",{attrs:{title:"PRODUCTOS",dense:"","hide-bottom":"",data:t.shoppingCartInBulkDetails,columns:t.inBulkColumnsAUT,"row-key":"product_name",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product_name",staticStyle:{width:"20%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"line_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.line_name))]),e("q-td",{key:"category_name",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.category_name))]),e("q-td",{key:"invoice_id",staticStyle:{width:"10%"},attrs:{props:a}},[e("label",{staticStyle:{"text-decoration":"underline black",cursor:"pointer"},on:{click:function(e){return t.openActions(a.row.invoice_id)}}},[t._v(t._s(a.row.invoice_id))])]),e("q-td",{key:"qty",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s("".concat(t.formatter.format(a.row.qty)," Pzas.")))]),e("q-td",{key:"unit_price",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.unit_price)," ")))]),e("q-td",{key:"amount",staticStyle:{width:"10%"},attrs:{props:a}},[t._v(t._s("".concat(t.currencyFormatter.format(a.row.amount)," ")))]),"REMISIONADO"===a.row.status?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"positive","text-color":"white"}},[t._v("\n                    REMISIONADO\n                  ")])],1):t._e(),"CANCELADO"===a.row.status?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"red","text-color":"white"}},[t._v("\n                    CANCELADO\n                  ")])],1):t._e(),"POSTERGADO"===a.row.status?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"deep-purple-7","text-color":"white"}},[t._v("\n                    PEDIDO POSTERGADO\n                  ")])],1):t._e(),"AUTORIZADO"===a.row.status&&!0===a.row.condition?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"positive","text-color":"white"}},[e("label",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openModaliBD(1,a.row.qty,a.row.product_id,a.row.shopping_cart_id,a.row.id)}}},[t._v(t._s("".concat(t.formatter.format(a.row.stock)," Pzas.")))])])],1):t._e(),"AUTORIZADO"===a.row.status&&!1===a.row.condition?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"negative","text-color":"white"}},[e("label",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openModaliBD(1,a.row.qty,a.row.product_id,a.row.shopping_cart_id,a.row.id)}}},[t._v(t._s("".concat(t.formatter.format(a.row.stock)," Pzas.")))])])],1):t._e(),"AUTORIZADO"===a.row.status&&!1===a.row.stock?e("q-td",{key:"stock",staticStyle:{width:"15%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"negative","text-color":"white"}},[e("label",[t._v("SIN STOCK")])])],1):t._e(),e("q-td",{key:"status",staticStyle:{width:"5%"},attrs:{props:a}},[e("q-chip",{attrs:{square:"",dense:"",color:"REMISIONADO"==a.row.status?"positive":"AUTORIZADO"==a.row.status?"green-4":"POSTERGADO"==a.row.status?"deep-purple-7":"CANCELADO"==a.row.status?"red":"primary","text-color":"white"}},[t._v("\n                    "+t._s(a.row.status)+"\n                  ")])],1)],1)]}}],null,!1,74725859)}):t._e()],1):t._e()])])]),e("q-dialog",{attrs:{persistent:""},model:{value:t.generateInvoiceModal,callback:function(e){t.generateInvoiceModal=e},expression:"generateInvoiceModal"}},[e("q-card",{staticStyle:{"min-width":"400px"}},[e("q-card-section",{staticClass:"bg-teal-14 text-white"},[e("div",{staticClass:"text-h6"},[t._v("REMISIONAR PEDIDO")])]),e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha de venta",error:t.$v.saleDate.$error,rules:t.saleDateRules},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.saleDate,callback:function(e){t.saleDate=e},expression:"saleDate"}},[e("q-popup-proxy",{ref:"invoiceSaleDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{locale:t.myLocale,mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return t.$refs.invoiceSaleDate.hide()}},model:{value:t.saleDate,callback:function(e){t.saleDate=e},expression:"saleDate"}})],1)])],1)],1),e("div",{staticClass:"col-xs-12"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",rules:t.customerBranchOfficeRules,label:"Cliente",disable:""},model:{value:t.shoppingCart.fields.customer_name,callback:function(e){t.$set(t.shoppingCart.fields,"customer_name",e)},expression:"shoppingCart.fields.customer_name"}})],1),e("div",{staticClass:"col-xs-12"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:t.destiny,options:t.customerBranchOfficeOptions,"emit-value":"","map-options":"",label:"Sucursal de cliente",rules:t.customerBranchOfficeRules},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-store-alt"}})]},proxy:!0}]),model:{value:t.customerBranchOffice,callback:function(e){t.customerBranchOffice=e},expression:"customerBranchOffice"}})],1),e("div",{staticClass:"col-xs-12"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",label:"Comentarios",type:"textarea"},on:{input:function(e){t.comments=e.toUpperCase()}},model:{value:t.comments,callback:function(e){t.comments=e},expression:"comments"}})],1),e("div",{staticClass:"col-xs-12",staticStyle:{"margin-top":"15px"}},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.oc_reference.$error,label:"# Orden de Compra"},on:{input:function(e){t.oc_reference=e.toUpperCase()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"code"}})]},proxy:!0}]),model:{value:t.oc_reference,callback:function(e){t.oc_reference=e},expression:"oc_reference"}})],1),e("div",{staticClass:"col-xs-12"},[e("q-uploader",{ref:"fileDocumentOCRef",attrs:{url:t.fileDocumentUrlOC,method:"POST",label:"Orden de Compra","max-files":"1",flat:"","auto-upload":"","no-thumbnails":"",headers:[{name:"Authorization",value:"Bearer "+this.JWT}]},on:{uploaded:t.afterUploadDocumentFileOC}})],1)])]),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",icon:"fas fa-times-circle",label:"Cerrar"},on:{click:function(e){return t.closeGenerateInvoiceModal()}}}),e("q-btn",{attrs:{color:"positive",icon:"fas fa-check",label:"Remisionar"},on:{click:function(e){return t.generateInvoice()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmPartialORder,callback:function(e){t.confirmPartialORder=e},expression:"confirmPartialORder"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}}),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center"},[e("label",{staticStyle:{"font-size":"23px","text-align":"justify"}},[t._v(t._s(t.textv2))])]),e("br"),e("br"),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.openmodalGenerateInvoice()}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmModal,callback:function(e){t.confirmModal=e},expression:"confirmModal"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("Alerta")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center"},[e("label",{staticStyle:{"font-size":"23px"}},[t._v(t._s(t.text))])]),e("br"),e("br"),t.buttonModal?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.edit()}}})],1):t._e()],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmCancelModal,callback:function(e){t.confirmCancelModal=e},expression:"confirmCancelModal"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white"}},[t._v("Alerta")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("q-card-section",{staticClass:"row items-center text-center"},[e("label",{staticStyle:{"font-size":"23px"}},[t._v("¿Está seguro de Cancelar el Pedido?")])]),e("br"),t.buttonModal?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.cancelar()}}})],1):t._e()],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.modalinBulkDetails,callback:function(e){t.modalinBulkDetails=e},expression:"modalinBulkDetails"}},[e("q-card",[e("div",{staticStyle:{width:"400px"}},[e("div",{staticClass:"bg-teal-6 q-pt-md q-pb-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 text-h6",staticStyle:{color:"white"}},[t._v("  PARCIALIZACIÓN DE PEDIDOS")]),e("div",{staticClass:"col-sm-2 pull-right q-pr-xs"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"col-md-7 col-xs-7 q-pa-md"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"#","reverse-fill-mask":"",label:"Cantidad a Entregar."},on:{input:function(e){return t.inBulk_calculation()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}]),model:{value:t.baleQty,callback:function(e){t.baleQty=e},expression:"baleQty"}})],1),e("div",{staticClass:"col-md-5 col-xs-5 q-pa-md q-mt-md"},[e("q-btn",{attrs:{color:"positive",label:"Parcializar"},on:{click:function(e){return t.partializationinBulk()}}})],1)]),e("div",{staticClass:"row",staticStyle:{"margin-top":"15px"}},[e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 q-pl-md",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[t._v("DISPONIBLE")])]),e("div",{staticClass:"col-md-3"},[e("label",[t._v(" "+t._s("".concat(t.formatter.format(t.dataBalesWeight)," Pzas."))+" ")])])])]),e("q-separator",{staticStyle:{"margin-top":"10px"},attrs:{inset:""}}),e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 q-pa-md"},[e("div",{staticClass:"row"})])],1)])])],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirmModalPDF,callback:function(e){t.confirmModalPDF=e},expression:"confirmModalPDF"}},[e("q-card",{staticStyle:{width:"500px"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6"},[t._v("CONFIRMACIÓN DE ENVIO")]),e("div",{staticClass:"col-sm-1 pull-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),e("br"),e("div",{staticClass:"col-xs-12 col-sm-12 q-mt-sm q-pl-lg"},[e("div",{staticClass:"text-h6"},[t._v("¿Está seguro de enviar el correo del pedido al cliente?")])]),e("br"),e("br"),t.buttonModal?e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{attrs:{label:"Aceptar",color:"positive"},on:{click:function(e){return t.sendPDF()}}})],1):t._e()],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.documentFileModalOrderBuy,callback:function(e){t.documentFileModalOrderBuy=e},expression:"documentFileModalOrderBuy"}},[e("q-card",[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 col-sm-10 text-h6"},[t._v("Subir archivo")]),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col-xs-12 col-sm-2 pull-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),e("q-card-section",[e("q-uploader",{ref:"fileDocumentOCRef",attrs:{url:t.fileDocumentUrlOCRef,headers:[{name:"Authorization",value:"Bearer "+this.JWT}],method:"POST","hide-upload-btn":""},on:{uploaded:t.afterUploadDocumentFileOCRef}})],1),e("q-card-actions",{staticClass:"text-secondary",attrs:{align:"right"}},[e("q-btn",{attrs:{flat:"",label:"Subir archivo"},on:{click:function(e){return t.uploadDocumentFileOc()}}})],1)],1)],1)],1)},i=[],s=a("7ec2"),n=a.n(s),r=a("c973"),l=a.n(r),c=(a("99af"),a("d3b7"),a("159b"),a("a9e3"),a("4de4"),a("e260"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("14d9"),a("a15b"),a("aabb")),p=a("b5ae"),d=p.required,u={name:"EditRequestedOrder",validations:{saleDate:{required:d},customerBranchOffice:{required:d},oc_reference:{}},data:function(){return{special_order:null,documentFileModalOrderBuy:!1,myLocale:{days:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),daysShort:"Dom_Lun_Mar_Mié_Jue_Vie_Sáb".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1},oc_reference:null,tax_invoice:null,term:null,confirmModalPDF:!1,confirmCancelModal:!1,role:null,cartStatus:"",confirmModal:!1,destiny:!1,text:"",textv2:"",buttonModal:!0,cndEditOrder:!0,cndPartialOrder:!1,confirmPartialORder:!1,modalBaleDetails:!1,modalinBulkDetails:!1,baleQty:0,dataBales:[],dataBalesWeight:0,dataBalesSum:0,idDetail:0,typePart:null,shoppingCart:{fields:{id:null,origen:null,customer_id:null,customer_name:null,price_list:null,user_id:null,user_name:null,user_email:null,status:null,comments:null,oc_date:null,oc_reference:null,payment_date:null,payment_reference:null,payment_method:null,applied_discount:null,storage_id:null,typeOrder:null,document_id:null}},serverUrl:"http://api.alpez.beta.wasp.mx/",formatter:new Intl.NumberFormat("en-US"),currencyFormatter:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),inBulkColumnsSOL:[{name:"product_name",align:"left",label:"PRODUCTO",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"LÍNEA",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"CATEGORÍA",field:"category_name",sortable:!0},{name:"qty",align:"right",label:"CANTIDAD",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"PRECIO PZA.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"IMPORTE",field:"amount",sortable:!0}],inBulkColumnsAUT:[{name:"product_name",align:"left",label:"PRODUCTO",field:"product_name",sortable:!0},{name:"line_name",align:"left",label:"LÍNEA",field:"line_name",sortable:!0},{name:"category_name",align:"left",label:"CATEGORÍA",field:"category_name",sortable:!0},{name:"invoice_id",align:"left",label:"REMISIÓN NO.",field:"invoice_id",sortable:!0},{name:"qty",align:"right",label:"CANTIDAD",field:"qty",sortable:!0},{name:"unit_price",align:"right",label:"PRECIO PZA.",field:"unit_price",sortable:!0},{name:"amount",align:"right",label:"IMPORTE",field:"amount",sortable:!0},{name:"stock",align:"center",label:"STOCK",field:"stock",sortable:!0},{name:"status",align:"center",label:"ESTATUS",field:"status",sortable:!1}],pagination:{rowsPerPage:50},loan:null,shoppingCartBaleDetails:[],shoppingCartInBulkDetails:[],shoppingCartLaminateDetails:[],customerBranchOfficeOptions:[],driverOptions:[],generateInvoiceModal:!1,saleDate:null,customerBranchOffice:null,driver:null,comments:null,emailWithAttention:null,labelAtention:null,canCancel:!1,info:[],dataDocument:[],download:!1,dataResultDocument:[],colorInput:null}},beforeRouteEnter:function(t,e,a){a((function(t){var e=t.$store.getters["users/rol"];console.log(e),1===e||3===e||7===e||2===e||20===e||4===e||27===e||22===e||29===e||28===e||17===e?a():a("/")}))},created:function(){this.fetchFromServer()},computed:{fileDocumentUrlOCRef:function(){return"".concat("http://api.alpez.beta.wasp.mx/","documents/file/").concat(this.$route.params.id)},appliedDiscount:function(){var t=0;return null!=this.shoppingCart.fields.applied_discount&&(t=this.shoppingCart.fields.applied_discount),t+"%"},JWT:function(){return localStorage.getItem("JWT")},partialOrder:function(){var t=!1,e=0;return this.shoppingCartBaleDetails.length>0&&this.shoppingCartBaleDetails.forEach((function(a){"AUTORIZADO"===a.status&&(a.bale_qty?e+=Number(a.bale_qty):a.bales_qty?e+=Number(a.bales_qty):e+=Number(0),a.qty>e&&(t=!0))})),this.shoppingCartInBulkDetails.length>0&&this.shoppingCartInBulkDetails.forEach((function(e){"AUTORIZADO"===e.status&&e.stock>e.qty&&(t=!1)})),this.shoppingCartLaminateDetails.length>0&&this.shoppingCartLaminateDetails.forEach((function(e){"AUTORIZADO"===e.status&&e.stock>e.qty&&(t=!1)})),t},status:function(){var t=!0;return this.shoppingCartBaleDetails.forEach((function(e){"REMISIONADO"===e.status&&(t=!1)})),this.shoppingCartInBulkDetails.forEach((function(e){"REMISIONADO"===e.status&&(t=!1)})),this.shoppingCartLaminateDetails.forEach((function(e){"REMISIONADO"===e.status&&(t=!1)})),t},totalPrice:function(){var t=0;return this.shoppingCartBaleDetails.forEach((function(e){e.bale_qty?t+=Number(e.bale_qty*e.unit_price):e.bales_qty?t+=Number(e.bales_qty*e.unit_price):t+=Number(e.amount)})),this.shoppingCartInBulkDetails.forEach((function(e){t+=Number(e.amount)})),this.shoppingCartLaminateDetails.forEach((function(e){t+=Number(e.amount)})),this.currencyFormatter.format(t)},thisIva:function(){var t=0;return this.shoppingCartBaleDetails.forEach((function(e){e.bale_qty?t+=Number(e.bale_qty*e.unit_price)*Number(.16):e.bales_qty?t+=Number(e.bales_qty*e.unit_price)*Number(.16):t+=Number(e.amount)*Number(.16)})),this.shoppingCartInBulkDetails.forEach((function(e){t+=Number(e.amount)*Number(.16)})),this.shoppingCartLaminateDetails.forEach((function(e){t+=Number(e.amount)*Number(.16)})),this.currencyFormatter.format(t)},thisTotal:function(){var t=0;return this.shoppingCartBaleDetails.forEach((function(e){e.bale_qty?(t+=Number(e.bale_qty*e.unit_price),t+=Number(e.bale_qty*e.unit_price)*Number(.16)):e.bales_qty?(t+=Number(e.bales_qty*e.unit_price),t+=Number(e.bales_qty*e.unit_price)*Number(.16)):(t+=Number(e.amount),t+=Number(e.amount)*Number(.16))})),this.shoppingCartInBulkDetails.forEach((function(e){t+=Number(e.amount),t+=Number(e.amount)*Number(.16)})),this.shoppingCartLaminateDetails.forEach((function(e){t+=Number(e.amount),t+=Number(e.amount)*Number(.16)})),this.currencyFormatter.format(t)},canGenerateInvoice:function(){var t=!0,e=this.shoppingCartInBulkDetails.filter((function(t){return t.condition&&"AUTORIZADO"===t.status})),a=0;return e&&(a=e.length),a>0&&(t=!0),e.forEach((function(e){(!1===e.stock||Number(e.qty)>Number(e.stock))&&(t=!1)})),t},saleDateRules:function(t){var e=this;return[function(t){return e.$v.saleDate.required||"El campo Fecha de venta es requerido."}]},customerBranchOfficeRules:function(t){var e=this;return[function(t){return e.$v.customerBranchOffice.required||"El campo Sucursal de cliente es requerido."}]},driverRules:function(t){var e=this;return[function(t){return e.$v.driver.required||"El campo Chofer es requerido."}]},fileDocumentUrlOC:function(){return"".concat("http://api.alpez.beta.wasp.mx/","documents/file/").concat(this.$route.params.id)}},methods:{showDocumentFileOcMenu:function(){var t=this;return l()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/shopping-carts/getDataDocument/".concat(t.shoppingCart.fields.document_id)).then((function(e){var a=e.data;a.result&&(t.dataResultDocument=a.datadocument,console.log(t.dataResultDocument))}));case 2:c["a"].fileDownload("/documents/getFileOrderShoppingCart/".concat(t.shoppingCart.fields.document_id)).then((function(e){var a=e.data;t.info.image=a,console.log(a);var o=window.URL.createObjectURL(new Blob([a],{type:t.dataResultDocument[0].mimetype}));window.open(o,"_blank")}));case 3:case"end":return e.stop()}}),e)})))()},downloadDocumentFileOc:function(){var t=this;return l()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/shopping-carts/getDataDocument/".concat(t.shoppingCart.fields.document_id)).then((function(e){var a=e.data;a.result&&(t.dataResultDocument=a.datadocument,console.log(t.dataResultDocument))}));case 2:c["a"].fileDownload("/documents/getFileOrderShoppingCart/".concat(t.shoppingCart.fields.document_id)).then((function(e){var a=e.data;t.info.image=a;var o=window.URL.createObjectURL(new Blob([a],{type:t.dataResultDocument[0].mimetype})),i=document.createElement("a");i.href=o,i.setAttribute("download",t.dataResultDocument[0].filename),document.body.appendChild(i),i.click()}));case 3:case"end":return e.stop()}}),e)})))()},deleteFileOc:function(){var t=this;return l()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:c["a"].delete("/documents/".concat(t.shoppingCart.fields.document_id)).then((function(e){var a=e.data;a.result&&t.fetchFromServer(),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})}));case 1:case"end":return e.stop()}}),e)})))()},afterUploadDocumentFileOCRef:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(this.fetchFromServer(),this.documentFileModalOrderBuy=!1)},uploadDocumentFileOc:function(){this.$refs.fileDocumentOCRef.upload()},editReeference:function(){var t=this;return l()(n()().mark((function e(){var a;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a.oc_referenceshp=t.shoppingCart.fields.oc_reference,t.$q.loading.show(),e.next=5,c["a"].put("/shopping-carts/editReeference/".concat(t.$route.params.id),a).then((function(e){var a=e.data;a.result&&t.fetchFromServer(),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})}));case 5:t.$q.loading.hide();case 6:case"end":return e.stop()}}),e)})))()},showDocumentFile:function(){var t=this;return l()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.documentFileModalOrderBuy=!0;case 1:case"end":return e.stop()}}),e)})))()},downloadDocumentFileOrder:function(){var t=this;return l()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show(),e.next=3,c["a"].get("/shopping-carts/getDataOfOrderShoppingcart/".concat(t.shoppingCart.fields.document_id,"/","No")).then((function(e){var a=e.data;a.result&&(t.dataDocument=a.datadocument,t.download=!0)}));case 3:t.download&&c["a"].fileDownload("/documents/getFileOrderShoppingCart/".concat(t.shoppingCart.fields.document_id)).then((function(e){var a=e.data;t.$q.loading.hide(),console.log(a),t.info.image=a;var o=window.URL.createObjectURL(new Blob([a],{type:t.dataDocument.mimetype})),i=document.createElement("a");i.href=o,i.setAttribute("download",t.dataDocument.filename),document.body.appendChild(i),i.click()})),t.$q.loading.hide();case 5:case"end":return e.stop()}}),e)})))()},downloadDocumentOc:function(){return!0},quotationNotePDF:function(){var t="si",e="http://api.alpez.beta.wasp.mx/"+"shopping-carts/quotationNotePDF/".concat(this.$route.params.id,"/").concat(t);window.open(e,"_blank")},downloadOC:function(){this.shoppingCart.fields.oc_document?window.open("".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file1/").concat(this.shoppingCart.fields.id,"/",1,"/download"),"_blank"):this.$q.notify({message:"El pedido no tiene una Orden de Compra subida",position:"top",color:"warning"})},generarTicket:function(){var t=this.$store.getters["users/id"],e="http://api.alpez.beta.wasp.mx/"+"ticket/crearTicket/".concat(this.$route.params.id,"/").concat(t);window.open(e,"_blank")},downloadTicket:function(){this.shoppingCart.fields.payment_document?window.open("".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file1/").concat(this.shoppingCart.fields.id,"/",2,"/download"),"_blank"):this.$q.notify({message:"El pedido no tiene un Ticket de Pago subido",position:"top",color:"warning"})},downloadFormatDate:function(){this.shoppingCart.fields.citation_document?window.open("".concat("http://api.alpez.beta.wasp.mx/","shopping-carts/file1/").concat(this.shoppingCart.fields.id,"/",3,"/download"),"_blank"):this.$q.notify({message:"El pedido no tiene un Formato de Cita subido",position:"top",color:"warning"})},fetchFromServer:function(){var t=this;this.role=this.$store.getters["users/rol"],this.$q.loading.show();var e=this.$route.params.id;c["a"].get("/shopping-carts/".concat(e)).then((function(a){var o=a.data;o.shoppingCart?(t.term=o.shoppingCart.oc_term,t.cartStatus=o.shoppingCart.status,null===o.shoppingCart.special_order||0===o.shoppingCart.special_order?t.special_order=0:t.special_order=1,o.shoppingCart.branchofficedestiny&&(t.customerBranchOffice=o.shoppingCart.branchofficedestiny,t.destiny=!0),t.shoppingCart.fields=o.shoppingCart,"COTIZADO"===o.shoppingCart.status?t.colorInput="yellow-8":"REMISIONADO"===o.shoppingCart.status?t.colorInput="red-4":"AUTORIZADO"===o.shoppingCart.status?t.colorInput="green":"PARCIAL"===o.shoppingCart.status?t.colorInput="red-4":"ENTREGADO"===o.shoppingCart.status?t.colorInput="purple-6":"CANCELADO"===o.shoppingCart.status&&(t.colorInput="red"),0===o.shoppingCart.tax_invoice?t.tax_invoice="FACTURA":t.tax_invoice="REMISION",t.shoppingCart.fields.storage_id={value:o.shoppingCart.id_storage,label:o.shoppingCart.name_storage},t.shoppingCart.fields.typeOrder=1===o.shoppingCart.tax_invoice?"REMISIÓN":"FACTURA",0===o.shoppingCart.loan?t.loan="NO":t.loan="SI",t.emailWithAttention=null!==o.shoppingCart.email_contact?o.shoppingCart.email_contact:null,t.labelAtention=null!==o.shoppingCart.email_contact?"Con atencion a:":"No tiene asignado ningun contacto","COTIZADO"===t.cartStatus?c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,1===a.canCancel&&(t.canCancel=!0),t.$q.loading.hide()})):"DESCUENTO"===t.cartStatus?c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,1===a.canCancel&&(t.canCancel=!0),t.$q.loading.hide()})):"AUTORIZADO"===t.cartStatus||"REMISIONADO"===t.cartStatus||"PARCIAL"===t.cartStatus?c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;console.log(a),t.shoppingCartInBulkDetails=a.details,1===a.canCancel&&(t.canCancel=!0),c["a"].get("/customer-branch-offices/options").then((function(e){var a=e.data;t.customerBranchOfficeOptions=a.options.filter((function(e){return Number(e.customer)===Number(t.shoppingCart.fields.customer_id)})),t.$q.loading.hide()}))})):"CANCELADO"===t.cartStatus&&c["a"].get("/shopping-cart-in-bulk-details/shopping-cart/".concat(e)).then((function(e){var a=e.data;t.shoppingCartInBulkDetails=a.details,1===a.canCancel&&(t.canCancel=!0),t.$q.loading.hide()}))):t.$router.push("/requested-orders")}))},approve:function(){var t=this;this.$q.loading.show(),c["a"].put("/shopping-carts/".concat(this.$route.params.id,"/approve")).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.fetchFromServer(),t.$q.loading.hide()):t.$q.loading.hide()}))},cancelar:function(){var t=this;this.$q.loading.show(),c["a"].put("/shopping-carts/cancel/".concat(this.$route.params.id)).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.$router.push("/shopping-carts"),t.$q.loading.hide()):t.$q.loading.hide()}))},cancel:function(){this.confirmCancelModal=!0},confirm:function(){this.text="","COTIZADO"===this.cartStatus?(this.confirmModal=!0,this.text="¿Desea modificar el estatus de este pedido?",this.buttonModal=!0):"AUTORIZADO"===this.cartStatus&&(!0===this.status?(this.confirmModal=!0,this.text="¿Desea modificar el estatus de este pedido?",this.buttonModal=!0):(this.confirmModal=!0,this.text="El pedido no se puede modificar, debido a que tiene productos remisionados.",this.buttonModal=!1))},editComents:function(){var t=this,e=[];e.cartId=Number(this.$route.params.id),e.comment=this.shoppingCart.fields.comments,c["a"].post("/shopping-carts/changeComments",e).then((function(e){var a=e.data;a.result?(t.fetchFromServer(),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})):t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})}))},edit:function(){var t=this,e=[];e.cartId=Number(this.$route.params.id),c["a"].post("/shopping-carts/changeStatus",e).then((function(e){var a=e.data;a.result?(t.$router.push("/shopping-carts"),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})):t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"})}))},openModaliBD:function(t,e,a,o,i){this.typePart=t,this.idDetail=i,this.baleQtyComparator=e,this.baleQty=e,this.bCalcProduct=a,this.bCalcSc=o,this.modalinBulkDetails=!0,this.inBulk_calculation(t,e,a,o)},inBulk_calculation:function(t,e){var a=this;if(this.baleQty=Number(this.baleQty),this.baleQtyComparator=Number(this.baleQtyComparator),this.dataBales=[],this.baleQty>this.baleQtyComparator)this.$q.dialog({title:"Error",message:"El calculo excede la cantidad del pedido, por favor verifique las cantidades.",persistent:!0});else{var o=[];o.baleQty=this.baleQty,o.cart_id=this.bCalcSc,o.product=this.bCalcProduct,1===this.typePart&&c["a"].post("/shopping-cart-in-bulk-details/getinBulkDetails",o).then((function(t){var e=t.data;a.dataBales=e.details,a.dataBalesSum=e.qtyBales,a.dataBalesWeight=e.qty,a.typePart=1}))}},partializationinBulk:function(){var t=this,e=[];e.idDetail=this.idDetail,e.baleQty=this.baleQty,e.baleQtyComparator=this.baleQtyComparator,e.product=this.bCalcProduct,this.baleQty>this.baleQtyComparator?this.$q.notify({message:"La Cantidad excede el limite",position:"top",color:"warning"}):1===this.typePart&&c["a"].post("/shopping-cart-in-bulk-details/partialization",e).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.modalinBulkDetails=!1,t.fetchFromServer()):t.modalinBulkDetails=!1}))},openmodalGenerateInvoice:function(){this.confirmPartialORder=!1,this.generateInvoiceModal=!0},openGenerateInvoiceModal:function(){!1===this.partialOrder?this.generateInvoiceModal=!0:(this.confirmPartialORder=!0,this.textv2="El stock del producto no cumple con la cantidad solicitada, se realizara la remision por la cantidad existente y se creara un detalle con el faltante.")},closeGenerateInvoiceModal:function(){this.generateInvoiceModal=!1,this.saleDate=null,this.driver=null,this.comments=null},generateInvoice:function(){var t=this;if(this.canGenerateInvoice){if(this.$v.saleDate.$reset(),this.$v.saleDate.$touch(),this.$v.customerBranchOffice.$reset(),this.$v.customerBranchOffice.$touch(),this.$v.oc_reference.$reset(),this.$v.oc_reference.$touch(),this.$v.saleDate.$error||this.$v.customerBranchOffice.$error)return this.saleDate="",this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var e=[];e.saleDate=this.invertDate(this.saleDate),e.customerBranchOfficeId=this.customerBranchOffice,e.oc_reference=this.oc_reference,e.comments=this.comments,c["a"].put("/shopping-carts/".concat(this.$route.params.id,"/generate-invoice"),e).then((function(e){var a=e.data;console.log(a),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result?(t.closeGenerateInvoiceModal(),t.$q.loading.hide(),t.fetchFromServer()):(t.closeGenerateInvoiceModal(),t.$q.loading.hide())}))}else this.$q.notify({message:"El pedido no se puede remisionar debido a que no hay stock existente",position:"top",color:"warning"})},invertDate:function(t){if(null!==t)var e=t.split("/").reverse().join("-");return e},sendPDF:function(){var t=this;this.$q.loading.show();var e=[];e.cartId=Number(this.$route.params.id),c["a"].post("/shopping-carts/sendPDF",e).then((function(e){var a=e.data;a.result?(t.$q.loading.hide(),t.$q.notify({message:"Correo enviado exitosamente",position:"top",color:a.result?"positive":"warning"}),t.confirmModalPDF=!1):(t.$q.loading.hide(),t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),t.confirmModalPDF=!1)}))},downloadPDF:function(){var t="http://api.alpez.beta.wasp.mx/"+"shopping-carts/pdf/".concat(this.$route.params.id);window.open(t,"_blank")},confirmSendPDF:function(){this.confirmModalPDF=!0},openActions:function(t){this.$router.push("/storage-exits/".concat(t))},afterUploadDocumentFileOC:function(t){var e=JSON.parse(t.xhr.response);this.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(this.oc_document=!0)},cancelarRemision:function(){var t=this;this.$q.dialog({title:"Confirmación",message:"¿Desea Cancelar este pedido?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk((function(){var e=[];e.id=t.shoppingCart.fields.id,c["a"].post("/shopping-carts/cancelShopping",e).then((function(e){var a=e.data;t.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),t.fetchFromServer()}))})).onCancel((function(){}))}}},m=u,h=a("2877"),f=a("9989"),g=a("ead5"),b=a("079e"),v=a("9c40"),C=a("05c0"),_=a("4e73"),y=a("1c1c"),q=a("66e5"),w=a("4074"),k=a("27f9"),D=a("0016"),O=a("ddd8"),x=a("7cbe"),S=a("52ee"),I=a("eaac"),A=a("bd08"),N=a("db86"),$=a("b047"),R=a("24e8"),E=a("f09f"),B=a("a370"),P=a("ee89"),M=a("4b7e"),F=a("eb85"),T=a("7f67"),U=a("eebe"),Q=a.n(U),L=Object(h["a"])(m,o,i,!1,null,null,null);e["default"]=L.exports;Q()(L,"components",{QPage:f["a"],QBreadcrumbs:g["a"],QBreadcrumbsEl:b["a"],QBtn:v["a"],QTooltip:C["a"],QMenu:_["a"],QList:y["a"],QItem:q["a"],QItemSection:w["a"],QInput:k["a"],QIcon:D["a"],QSelect:O["a"],QPopupProxy:x["a"],QDate:S["a"],QTable:I["a"],QTr:A["a"],QTd:N["a"],QChip:$["a"],QDialog:R["a"],QCard:E["a"],QCardSection:B["a"],QUploader:P["a"],QCardActions:M["a"],QSeparator:F["a"]}),Q()(L,"directives",{ClosePopup:T["a"]})}}]);
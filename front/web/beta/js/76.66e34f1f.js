(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[76],{f274:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("q-page",[a("div",{staticClass:"q-pa-sm panel-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-9"},[a("span",{staticClass:"q-ml-md grey-8 fs28 page-title"},[e._v("Nuevo Laminado")])]),a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",{attrs:{align:"right"}},[a("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Laminados",to:"/laminates"}}),a("q-breadcrumbs-el",{attrs:{label:"Nuevo"}})],1)],1)])])]),a("div",{staticClass:"q-pa-md bg-grey-3"},[a("div",{staticClass:"row bg-white border-panel"},[a("div",{staticClass:"col q-pa-md"},[a("div",{staticClass:"row q-col-gutter-xs"},[a("div",{staticClass:"col-xs-12 col-sm-3"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.laminate.fields.scheduledDate.$error,mask:"date",label:"Fecha programada",rules:e.scheduledDateRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.laminate.fields.scheduledDate,callback:function(a){e.$set(e.laminate.fields,"scheduledDate",a)},expression:"laminate.fields.scheduledDate"}},[a("q-popup-proxy",{ref:"laminateFieldsScheduledDateRef",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"col-sm-12"},[a("q-date",{attrs:{"today-btn":""},on:{input:function(){return e.$refs.laminateFieldsScheduledDateRef.hide()}},model:{value:e.laminate.fields.scheduledDate,callback:function(a){e.$set(e.laminate.fields,"scheduledDate",a)},expression:"laminate.fields.scheduledDate"}})],1)])],1)],1),a("div",{staticClass:"col-xs-12 col-sm-3"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.laminate.fields.product.$error,options:e.productOptions,label:"Producto",rules:e.productRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"fas fa-store-alt"}})]},proxy:!0}]),model:{value:e.laminate.fields.product,callback:function(a){e.$set(e.laminate.fields,"product",a)},expression:"laminate.fields.product"}})],1),a("div",{staticClass:"col-xs-12 col-sm-3"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.laminate.fields.branchOffice.$error,options:e.branchOfficeOptions,label:"Sucursal",rules:e.branchOfficeRules},on:{input:e.branchOfficeUpdated},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}]),model:{value:e.laminate.fields.branchOffice,callback:function(a){e.$set(e.laminate.fields,"branchOffice",a)},expression:"laminate.fields.branchOffice"}})],1),a("div",{staticClass:"col-xs-12 col-sm-3"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.laminate.fields.storage.$error,options:e.storageOptions,label:"Almacén",rules:e.storageRules,disable:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}]),model:{value:e.laminate.fields.storage,callback:function(a){e.$set(e.laminate.fields,"storage",a)},expression:"laminate.fields.storage"}})],1)]),a("div",{staticClass:"row q-mb-sm q-mt-md"},[a("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},[a("q-btn",{attrs:{color:"positive",icon:"save",label:"Guardar"},on:{click:function(a){return e.createLaminate()}}})],1)])])])])])},i=[],r=t("ded3"),l=t.n(r),n=(t("4de4"),t("d3b7"),t("a9e3"),t("14d9"),t("aabb")),o=t("b5ae"),c=o.required,d={name:"NewLaminate",validations:{laminate:{fields:{scheduledDate:{required:c},product:{required:c},branchOffice:{required:c},storage:{required:c}}}},data:function(){return{laminate:{fields:{scheduledDate:null,product:null,branchOffice:null,storage:null}},productOptions:[],branchOfficeOptions:[],storageOptions:[]}},computed:{scheduledDateRules:function(e){var a=this;return[function(e){return a.$v.laminate.fields.scheduledDate.required||"El campo Fecha programada es requerido."}]},productRules:function(e){var a=this;return[function(e){return a.$v.laminate.fields.product.required||"El campo Producto es requerido."}]},branchOfficeRules:function(e){var a=this;return[function(e){return a.$v.laminate.fields.branchOffice.required||"El campo Sucursal es requerido."}]},storageRules:function(e){var a=this;return[function(e){return a.$v.laminate.fields.storage.required||"El campo Almacén es requerido."}]}},created:function(){this.fetchFromServer()},methods:{fetchFromServer:function(){var e=this;this.$q.loading.show(),n["a"].get("/products/options/category/5").then((function(a){var t=a.data;e.productOptions=t.options,n["a"].get("/branch-offices/options").then((function(a){var t=a.data;e.branchOfficeOptions=t.options,n["a"].get("/storages/options").then((function(a){var t=a.data;e.storageOptions=t.options,e.$q.loading.hide()}))}))}))},branchOfficeUpdated:function(){var e=this;if(null!=this.laminate.fields.branchOffice&&null!=this.laminate.fields.branchOffice.value){var a=this.storageOptions.filter((function(a){return Number(a.branchOffice)===Number(e.laminate.fields.branchOffice.value)&&8===Number(a.storageType)}));a.length>0?this.laminate.fields.storage={value:a[0].value,label:a[0].label}:this.laminate.fields.storage=null}},createLaminate:function(){var e=this;if(this.$v.laminate.fields.$reset(),this.$v.laminate.fields.$touch(),this.$v.laminate.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var a=[];a.scheduledDate=l()({},this.laminate.fields).scheduledDate,a.productId=Number(l()({},this.laminate.fields).product.value),a.branchOfficeId=Number(l()({},this.laminate.fields).branchOffice.value),n["a"].post("/laminates",a).then((function(a){var t=a.data;e.$q.notify({message:t.message.content,position:"top",color:t.result?"positive":"warning"}),t.result?(e.$q.loading.hide(),e.$router.push("/laminates/".concat(t.laminate.id))):e.$q.loading.hide()}))}}},u=d,f=t("2877"),m=t("9989"),p=t("ead5"),h=t("079e"),b=t("ddd8"),v=t("0016"),g=t("7cbe"),q=t("52ee"),$=t("9c40"),O=t("eebe"),y=t.n(O),w=Object(f["a"])(u,s,i,!1,null,null,null);a["default"]=w.exports;y()(w,"components",{QPage:m["a"],QBreadcrumbs:p["a"],QBreadcrumbsEl:h["a"],QSelect:b["a"],QIcon:v["a"],QPopupProxy:g["a"],QDate:q["a"],QBtn:$["a"]})}}]);
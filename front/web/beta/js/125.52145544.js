(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[125],{d21e:function(e,t,i){"use strict";i.r(t);i("b0c0"),i("ac1f"),i("5319"),i("4de4"),i("d3b7");var s=function(){var e=this,t=e._self._c;return t("q-page",{staticClass:"bg-grey-3"},[t("div",{staticClass:"q-pa-sm panel-header"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-9"},[t("div",{staticClass:"q-pa-md q-gutter-sm"},[t("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[t("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),t("q-breadcrumbs-el",{attrs:{label:"Dirección",to:"/repositories"}}),t("q-breadcrumbs-el",{attrs:{label:"Editar Dirección"},domProps:{textContent:e._s(e.info.fields.name)}})],1)],1)])])]),t("div",{staticClass:"q-pa-md bg-grey-3"},[t("div",{staticClass:"row bg-white border-panel"},[t("div",{staticClass:"col q-pa-md"},[t("div",{staticClass:"row q-mb-sm",staticStyle:{visibility:"hidden"}},[t("div",{staticClass:"col-sm-1 offset-11 pull-right"},[t("q-btn",{attrs:{color:"primary",label:"Editar"}})],1)]),t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-4"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.info.fields.name.$error,label:"Nombre",rules:e.nameRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.info.fields.name,callback:function(t){e.$set(e.info.fields,"name",t)},expression:"info.fields.name"}})],1),t("div",{staticClass:"col-xs-12 col-sm-4"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.info.fields.icon.$error,label:"Icono",rules:e.iconRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.info.fields.icon,callback:function(t){e.$set(e.info.fields,"icon",t)},expression:"info.fields.icon"}})],1),t("div",{staticClass:"col-xs-12 col-sm-4"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.info.fields.sequence.$error,label:"Orden",rules:e.sequenceRules},on:{input:function(t){e.info.fields.sequence=t.replace(/[^0-9\\.]/g,"")}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.info.fields.sequence,callback:function(t){e.$set(e.info.fields,"sequence",t)},expression:"info.fields.sequence"}})],1)]),t("div",{staticClass:"row q-mb-sm q-mt-md"},[t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},[t("q-btn",{attrs:{color:"positive",icon:"save",label:"Actualizar"},on:{click:function(t){return e.edit()}}})],1)])])])]),t("div",{staticClass:"q-pa-md bg-grey-3"},[t("div",{staticClass:"row bg-white border-panel"},[t("div",{staticClass:"col q-pa-md"},[t("div",{staticClass:"row q-mb-sm q-mt-md"},[t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},[t("q-btn",{attrs:{color:"positive",icon:"save",label:"Agregar"},on:{click:function(t){e.modalOrders=!0}}})],1)]),t("q-table",{attrs:{flat:"",bordered:"",data:e.data,columns:e.columns,"row-key":"code",pagination:e.pagination,filter:e.filter},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[t("div",{staticStyle:{width:"100%"}},[t("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar"},on:{input:function(t){e.filter=t.toUpperCase()}},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)]},proxy:!0},{key:"body",fn:function(i){return[t("q-tr",{attrs:{props:i}},[t("q-td",{key:"name",staticStyle:{"text-align":"left"},attrs:{props:i}},[e._v(e._s(i.row.name))]),t("q-td",{key:"icon",staticStyle:{"text-align":"left"},attrs:{props:i}},[e._v(e._s(i.row.icon))]),t("q-td",{key:"sequence",staticStyle:{"text-align":"right"},attrs:{props:i}},[e._v(e._s(i.row.sequence))]),t("q-td",{key:"actions",staticClass:"pull-left",staticStyle:{width:"18%"},attrs:{props:i}},[t("q-btn",{attrs:{color:"primary",icon:"fas fa-edit",flat:"",size:"10px"},nativeOn:{click:function(t){return e.editSelectedRow(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Editar")])],1),t("q-btn",{attrs:{color:"red",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(t){return e.deleteSelectedRow(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[e._v("Eliminar")])],1)],1)],1)]}}])})],1)])]),t("q-dialog",{attrs:{persistent:""},model:{value:e.modalOrders,callback:function(t){e.modalOrders=t},expression:"modalOrders"}},[t("q-card",{staticStyle:{"min-width":"30%"}},[t("q-card-section",[t("div",{staticClass:"text-h6"},[e._v("Agregar")])]),t("q-card-section",[t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-6"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.child.fields.name.$error,label:"Nombre",rules:e.nameRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.child.fields.name,callback:function(t){e.$set(e.child.fields,"name",t)},expression:"child.fields.name"}})],1),t("div",{staticClass:"col-xs-12 col-sm-6"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.child.fields.icon.$error,label:"Icono",rules:e.iconRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.child.fields.icon,callback:function(t){e.$set(e.child.fields,"icon",t)},expression:"child.fields.icon"}})],1),t("div",{staticClass:"col-xs-12 col-sm-6"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.child.fields.sequence.$error,label:"Orden",rules:e.sequenceRules},on:{input:function(t){e.child.fields.sequence=t.replace(/[^0-9\\.]/g,"")}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.child.fields.sequence,callback:function(t){e.$set(e.child.fields,"sequence",t)},expression:"child.fields.sequence"}})],1)])]),t("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"red"},nativeOn:{click:function(t){return e.closeModal()}}}),t("q-btn",{attrs:{label:"Guardar",color:"green"},nativeOn:{click:function(t){return e.create()}}})],1)],1)],1)],1)},n=[],o=i("ded3"),a=i.n(o),r=(i("caad"),i("2532"),i("14d9"),i("aabb")),l=i("b5ae"),c=l.required,d=l.maxLength,u=l.decimal,f={name:"Edit",validations:{info:{fields:{name:{required:c,maxLength:d(50)},icon:{required:c,maxLength:d(50)},sequence:{decimal:u,required:c,maxLength:d(50)}}},child:{fields:{name:{required:c,maxLength:d(50)},icon:{required:c,maxLength:d(50)},sequence:{decimal:u,required:c,maxLength:d(50)}}}},data:function(){return{modalOrders:!1,info:{fields:{id:null,name:null,icon:null,sequence:null}},child:{fields:{id:null,name:null,icon:null,sequence:null,route:null}},pagination:{sortBy:"name",descending:!1,rowsPerPage:25},columns:[{name:"name",align:"center",label:"NOMBRE",field:"name",sortable:!0},{name:"icon",align:"center",label:"ICONO",field:"icon",sortable:!0},{name:"sequence",align:"center",label:"ORDEN",field:"sequence",sortable:!0},{name:"actions",align:"center",label:"ACCIONES",field:"actions",style:"width: 18%",sortable:!1}],data:[],filter:""}},computed:{nameRules:function(e){var t=this;return[function(e){return t.$v.info.fields.name.required||"El campo Nombre es requerido."},function(e){return t.$v.info.fields.name.maxLength||"El campo Nombre no debe exceder los 50 dígitos."}]},iconRules:function(e){var t=this;return[function(e){return t.$v.info.fields.name.required||"El campo Icono es requerido."},function(e){return t.$v.info.fields.name.maxLength||"El campo Icono no debe exceder los 50 dígitos."}]},sequenceRules:function(e){var t=this;return[function(e){return t.$v.info.fields.name.required||"El campo Orden es requerido."},function(e){return t.$v.info.fields.name.maxLength||"El campo Orden no debe exceder los 50 dígitos."}]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$router.push("/")},created:function(){this.fetchFromServer()},methods:{fetchFromServer:function(){var e=this;this.$q.loading.show();var t=this.$route.params.id;r["a"].get("/repositories/".concat(t)).then((function(i){var s=i.data;s.info?(e.info.fields=s.info,r["a"].get("/repositories/getByParent/".concat(t)).then((function(t){var i=t.data;e.data=i.info,e.$q.loading.hide()}))):e.$router.push("/repositories")}))},updateCategoryFields:function(){this.$v.info.fields.$reset(),this.$v.info.fields.$touch()},editSelectedRow:function(e){var t=this;this.$q.loading.show(),r["a"].get("/repositories/".concat(e)).then((function(e){var i=e.data;i.info?(t.child.fields=i.info,t.modalOrders=!0,t.$q.loading.hide()):t.$router.push("/repositories")}))},edit:function(){var e=this;if(this.$v.info.fields.$reset(),this.$v.info.fields.$touch(),this.$v.info.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=a()({},this.info.fields);r["a"].put("/repositories/".concat(t.id),t).then((function(t){var i=t.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(e.$q.loading.hide(),e.$router.push("/repositories")):e.$q.loading.hide()}))},create:function(){if(this.$v.child.fields.$reset(),this.$v.child.fields.$touch(),this.$v.child.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show(),this.child.fields.parent_id=this.$route.params.id;var e=a()({},this.child.fields);this.child.fields.id>0?this.updateRep(e):this.createRep(e)},createRep:function(e){var t=this;r["a"].post("/repositories/",e).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(t.$q.loading.hide(),t.closeModal(),t.fetchFromServer()):t.$q.loading.hide()}))},updateRep:function(e){var t=this;r["a"].put("/repositories/".concat(e.id),e).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(t.$q.loading.hide(),t.closeModal(),t.fetchFromServer()):t.$q.loading.hide()}))},closeModal:function(){this.$v.child.fields.$reset(),this.child.fields.id=null,this.child.fields.name=null,this.child.fields.route=null,this.child.fields.sequence=null,this.child.fields.icon=null,this.modalOrders=!1},deleteSelectedRow:function(e){var t=this;this.$q.dialog({title:"Confirmación",message:"¿Desea eliminar esta sub dirección?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk((function(){r["a"].delete("/repositories/".concat(e)).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning",icon:i.result?"thumb_up":"close"}),i.result&&t.fetchFromServer()}))})).onCancel((function(){}))}}},p=f,m=i("2877"),h=i("9989"),v=i("ead5"),q=i("079e"),g=i("9c40"),b=i("27f9"),$=i("0016"),y=i("eaac"),x=i("bd08"),C=i("db86"),w=i("05c0"),k=i("24e8"),S=i("f09f"),O=i("a370"),_=i("4b7e"),R=i("7f67"),E=i("eebe"),Q=i.n(E),L=Object(m["a"])(p,s,n,!1,null,null,null);t["default"]=L.exports;Q()(L,"components",{QPage:h["a"],QBreadcrumbs:v["a"],QBreadcrumbsEl:q["a"],QBtn:g["a"],QInput:b["a"],QIcon:$["a"],QTable:y["a"],QTr:x["a"],QTd:C["a"],QTooltip:w["a"],QDialog:k["a"],QCard:S["a"],QCardSection:O["a"],QCardActions:_["a"]}),Q()(L,"directives",{ClosePopup:R["a"]})}}]);
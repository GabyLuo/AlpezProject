(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[101],{"2f9c":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"bg-grey-3"},[e("div",{staticClass:"q-pa-sm panel-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[e("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),e("q-breadcrumbs-el",{attrs:{label:"Ordenes de producción",to:"/production-orders"}}),e("q-breadcrumbs-el",{attrs:{label:"Editar"},domProps:{textContent:t._s(t.order.fields.order_number)}})],1)],1)]),"FINALIZADO"===t.order.fields.status?e("div",{staticClass:"col-sm-6 pull-right",staticStyle:{"margin-top":"10px"}},[e("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{color:"primary",icon:"fas fa-file-pdf",label:"Packing List"},on:{click:function(e){return t.packingList()}}}),e("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{color:"positive",icon:"fas fa-file-pdf",label:"Mano de obra"},on:{click:function(e){return t.handiWork()}}}),e("q-btn",{staticStyle:{"margin-right":"10px"},attrs:{color:"purple",icon:"fas fa-dollar-sign",label:"Costo de producción"},on:{click:function(e){return t.cost()}}})],1):t._e(),"FINALIZADO"!==t.order.fields.status?e("div",{staticClass:"col-sm-6 pull-right",staticStyle:{"margin-top":"10px"}}):t._e()])]),e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:"",label:"Número de orden"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"code"}})]},proxy:!0}]),model:{value:t.order.fields.order_number,callback:function(e){t.$set(t.order.fields,"order_number",e)},expression:"order.fields.order_number"}})],1),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha programada",rules:t.creationDateRules,disable:!t.canModifyOrder},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.order.fields.production_date,callback:function(e){t.$set(t.order.fields,"production_date",e)},expression:"order.fields.production_date"}},[e("q-popup-proxy",{ref:"orderFieldsCreationDateRef",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"col-sm-12"},[e("q-date",{attrs:{"today-btn":""},on:{input:function(){return t.$refs.orderFieldsCreationDateRef.hide()}},model:{value:t.order.fields.production_date,callback:function(e){t.$set(t.order.fields,"production_date",e)},expression:"order.fields.production_date"}})],1)])],1)],1),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-input",{attrs:{color:"white","bg-color":"NUEVO"===t.order.fields.status?"primary":"INICIADO"===t.order.fields.status?"blue":"FINALIZADO"===t.order.fields.status?"green":"ASIGNADO"===t.order.fields.status?"orange":"red",filled:"",dark:"",label:"Estatus",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"battery_full"}})]},proxy:!0}]),model:{value:t.order.fields.status,callback:function(e){t.$set(t.order.fields,"status",e)},expression:"order.fields.status"}})],1),e("div",{staticClass:"col-xs-12 text-center"},[e("q-linear-progress",{attrs:{stripe:"",size:"33px",value:t.shipmentsProgress,color:"positive"}},[e("q-chip",{attrs:{dense:"",square:"",color:"secondary","text-color":"white"}},[t._v("\n                "+t._s(t.shipmentsProgressLabel)+"\n              ")])],1)],1)]),e("div",{staticClass:"row q-mb-sm q-mt-md"},[e("div",{staticClass:"col-xs-12 col-sm-2 pull-left"},[t.canModifyOrder?e("q-btn",{attrs:{color:"negative",icon:"clear",label:"Cancelar"},on:{click:function(e){return t.cancelOrder()}}}):t._e()],1),e("div",{staticClass:"col-xs-12 col-sm-4 offset-sm-6 pull-right"},[t.canModifyLots?e("q-btn",{staticClass:"bg-primary",staticStyle:{"margin-right":"10px",color:"white"},attrs:{icon:"add",label:"Agregar"},on:{click:function(e){t.modalOrders=!0}}}):t._e(),t.canModifyOrder?e("q-btn",{attrs:{color:"positive",icon:"save",label:"Guardar"},on:{click:function(e){return t.updateOrder()}}}):t._e()],1)])])]),e("br"),e("div",{staticClass:"bg-white border-panel"},[e("div",[e("div",{staticClass:"q-col-gutter-xs"},[e("q-table",{attrs:{flat:"",bordered:"",data:t.lots,columns:t.lotColumns,"row-key":"start_date",pagination:t.lotsPagination},on:{"update:pagination":function(e){t.lotsPagination=e}},scopedSlots:t._u([{key:"body",fn:function(r){return[e("q-tr",{attrs:{props:r}},[e("q-td",{key:"lot_number",staticStyle:{width:"10%"},attrs:{props:r}},[t._v(t._s(r.row.lot_number))]),e("q-td",{key:"scheduled_start_date",staticStyle:{width:"15%"},attrs:{props:r}},[t._v(t._s(r.row.scheduled_start_date))]),e("q-td",{key:"product",staticStyle:{"text-align":"left",width:"25%"},attrs:{props:r}},[t._v(t._s(r.row.product))]),e("q-td",{key:"shift",staticStyle:{"text-align":"left",width:"15%"},attrs:{props:r}},[t._v(t._s(r.row.shift))]),e("q-td",{key:"weight",staticStyle:{"text-align":"right",width:"5%"},attrs:{props:r}},[t._v(t._s(r.row.weight))]),e("q-td",{key:"qty_real",staticStyle:{"text-align":"right",width:"5%"},attrs:{props:r}},[t._v(t._s(r.row.qty_real))]),e("q-td",{key:"status",staticStyle:{width:"10%"},attrs:{props:r}},[e("q-btn",{attrs:{square:"",dense:"",color:"NUEVO"===r.row.status?"primary":"INICIADO"===r.row.status?"blue":"FINALIZADO"===r.row.status?"green":"ASIGNADO"===r.row.status?"orange":"red","text-color":"white",size:"10px"}},[t._v("\n                      "+t._s(r.row.status)+"\n                    ")])],1),"CANCELADO"!=t.order.fields.status?e("q-td",{key:"actions",staticClass:"pull-left",staticStyle:{width:"10%"},attrs:{props:r}},["CANCELADO"==r.row.status||"TERMINADO"==r.row.status?e("q-btn",{attrs:{color:"primary",icon:"remove_red_eye",flat:"",size:"10px"},nativeOn:{click:function(e){return t.editLot(r.row)}}},[e("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("Ver")])],1):e("q-btn",{attrs:{color:"primary",icon:"fas fa-edit",flat:"",size:"10px"},nativeOn:{click:function(e){return t.editLot(r.row)}}},[e("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("Editar")])],1),"NUEVO"==r.row.status?e("q-btn",{attrs:{color:"negative",icon:"fas fa-ban",flat:"",size:"10px"},nativeOn:{click:function(e){return t.cancelLot(r.row.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("Cancelar")])],1):t._e()],1):e("q-td",{key:"actions",staticStyle:{width:"10%"},attrs:{props:r}},[e("q-btn",{attrs:{color:"primary",icon:"remove_red_eye",flat:"",size:"10px"},nativeOn:{click:function(e){return t.editLot(r.row)}}},[e("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("Ver detalles")])],1)],1)],1)]}}])})],1)])])]),e("q-dialog",{attrs:{persistent:""},model:{value:t.modalOrders,callback:function(e){t.modalOrders=e},expression:"modalOrders"}},[e("q-card",{staticStyle:{"min-width":"80%"}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Agregar Lote")])]),e("q-card-section",[e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.order.fields.family.$error,label:"Categorías",rules:t.bomcategoryRules,options:t.options1,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},on:{input:function(e){return t.getLinesByCategories()},filter:t.filterCategory},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-cubes"}})]},proxy:!0},{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[t._v("\n                    No hay Resultados\n                  ")])],1)]},proxy:!0}]),model:{value:t.order.fields.family,callback:function(e){t.$set(t.order.fields,"family",e)},expression:"order.fields.family"}})],1),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-select",{attrs:{filled:"",color:"dark","bg-color":"secondary",error:t.$v.lot.fields.product_id.$error,label:"Producto",options:t.options2,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},on:{input:function(e){return t.getUnit(t.lot.fields.product_id)},filter:t.filterProduct},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-grip-lines-vertical"}})]},proxy:!0},{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[t._v("\n                  No hay Resultados\n                ")])],1)]},proxy:!0}]),model:{value:t.lot.fields.product_id,callback:function(e){t.$set(t.lot.fields,"product_id",e)},expression:"lot.fields.product_id"}})],1),e("div",{staticClass:"col-xs-12 col-sm-2"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Unidad",disable:""},model:{value:t.lot.fields.unit,callback:function(e){t.$set(t.lot.fields,"unit",e)},expression:"lot.fields.unit"}})],1),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.lot.fields.qty.$error,label:"Cantidad"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-hashtag"}})]},proxy:!0}]),model:{value:t.lot.fields.qty,callback:function(e){t.$set(t.lot.fields,"qty",e)},expression:"lot.fields.qty"}})],1),e("div",{staticClass:"col-xs-12 col-sm-4"},[e("q-select",{attrs:{"emit-value":"","map-options":"",color:"dark","bg-color":"secondary",filled:"",error:t.$v.lot.fields.shift.$error,options:t.shiftOptions,label:"Turno",rules:t.shifttRules},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"brightness_6"}})]},proxy:!0}]),model:{value:t.lot.fields.shift,callback:function(e){t.$set(t.lot.fields,"shift",e)},expression:"lot.fields.shift"}})],1)])]),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"red"},nativeOn:{click:function(e){return t.closeModal()}}}),e("q-btn",{attrs:{label:"Agregar",color:"green"},nativeOn:{click:function(e){return t.addLot()}}})],1)],1)],1)],1)},i=[],s=r("ded3"),a=r.n(s),n=r("7ec2"),l=r.n(n),d=r("c973"),c=r.n(d),u=(r("4de4"),r("d3b7"),r("a9e3"),r("b680"),r("caad"),r("2532"),r("14d9"),r("ac1f"),r("5319"),r("25f0"),r("a15b"),r("3c65"),r("159b"),r("aabb")),f=r("b5ae"),p=f.required,m=f.decimal,h={name:"EditProductionOrder",validations:{order:{fields:{order_number:{required:p},production_date:{required:p},product:{required:p},family:{required:p},qty:{required:p,decimal:m},status:{required:p},category_id:{}}},lot:{fields:{qty:{required:p,decimal:m},unit:{},product_id:{required:p},shift:{required:p}}},quality:{fields:{volume:{decimal:m},strength:{decimal:m},rebound:{decimal:m},spring:{decimal:m}}},bom:{fields:{category:{},product:{required:p},cantidad:{required:p}}}},data:function(){return{modalOrders:!1,finalizeOrder:!1,porcentaje:0,tab:"bom",options1:this.categoryOptions,options2:this.ProductsOptionsbyLines,formatter:new Intl.NumberFormat("en-US"),order:{fields:{id:null,order_number:null,production_date:null,product:null,qty:null,status:null,family:1,category_id:null}},lot:{fields:{qty:null,unit:null,product_id:null,shift:null}},shiftOptions:[],bom:{fields:{idedit:null,category:null,product:null,cantidad:null}},columns:[{name:"code_product",align:"center",label:"CÓDIGO PRODUCTO",field:"code_product",sortable:!1},{name:"name_category",align:"center",label:"CATEGORÍA",field:"name_category",sortable:!1},{name:"amount",align:"center",label:"CANTIDAD POR PIEZA",field:"amount",sortable:!1},{name:"qty",align:"center",label:"CANTIDAD A PRODUCIR",field:"qty",sortable:!1},{name:"stock",align:"center",label:"EXISTENCIA",field:"stok",sortable:!1},{name:"total",align:"center",label:"TOTAL REQUERIDO",field:"total",sortable:!1}],pagination:{sortBy:"id",descending:!1,rowsPerPage:25},lots:[],lotColumns:[{name:"lot_number",align:"center",label:"NÚMERO DE LOTE",field:"lot_number",style:"width: 10%",sortable:!0},{name:"scheduled_start_date",align:"center",label:"FECHA PROGRAMADA",field:"scheduled_start_date",style:"width: 15%",sortable:!0},{name:"product",align:"center",label:"PRODUCTO",field:"product",style:"width: 25%",sortable:!0},{name:"shift",align:"center",label:"TURNO",field:"shift",style:"width: 15%",sortable:!0},{name:"weight",align:"center",label:"A PRODUCIR",field:"weight",style:"width: 5%",sortable:!0},{name:"qty_real",align:"center",label:"PRODUCIDO",field:"qty_real",style:"width: 5%",sortable:!0},{name:"status",align:"center",label:"ESTATUS",field:"status",style:"width: 10%",sortable:!0},{name:"actions",align:"center",label:"ACCIONES",field:"actions",style:"width: 10%",sortable:!1}],lotsPagination:{rowsPerPage:50},productFibersOptions:[],categoryOptions:[],ProductsOptionsbyLines:[],dataBom:[],qualityModal:!1,quality:{fields:{id:null,volume:null,strength:null,rebound:null,spring:null,line:null,lot_number:null}}}},computed:{canModifyOrder:function(){return"NUEVO"===this.order.fields.status&&0===this.lots.filter((function(t){return"NUEVO"!==t.status})).length},canModifyLots:function(){return"NUEVO"===this.order.fields.status},shifttRules:function(t){var e=this;return[function(t){return e.$v.lot.fields.shift.required||"El campo Turno es requerido."}]},creationDateRules:function(t){var e=this;return[function(t){return e.$v.order.fields.production_date.required||"El campo Fecha de creación es requerido."}]},productRules:function(t){var e=this;return[function(t){return e.$v.order.fields.product.required||"El campo Producto es requerido."}]},qtyRules:function(t){var e=this;return[function(t){return e.$v.order.fields.qty.required||"El campo Cantidad es requerido."},function(t){return e.$v.order.fields.qty.decimal||"El campo Cantidad debe ser numérico."}]},shipmentsProgress:function(){return Number(this.porcentaje)},shipmentsProgressLabel:function(){return"Avance: "+(100*this.shipmentsProgress).toFixed(2)+"%"},qualityVolumeRules:function(t){var e=this;return[function(t){return e.$v.quality.fields.volume.decimal||"El campo Volumen debe ser numérico."}]},qualityStrengthRules:function(t){var e=this;return[function(t){return e.$v.quality.fields.strength.decimal||"El campo Resistencia debe ser numérico."}]},qualityReboundRules:function(t){var e=this;return[function(t){return e.$v.quality.fields.rebound.decimal||"El campo Rebote debe ser numérico."}]},qualitySpringRules:function(t){var e=this;return[function(t){return e.$v.quality.fields.spring.decimal||"El campo Resorte debe ser numérico."}]},bomcategoryRules:function(t){var e=this;return[function(t){return e.$v.order.fields.family.required||"El campo Categorías es requerido."}]},bomproductsRules:function(t){var e=this;return[function(t){return e.$v.order.fields.product.required||"El campo Productos es requerido."}]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(5)||this.$store.getters["users/roles"].includes(6)||this.$store.getters["users/roles"].includes(7)||this.$router.push("/")},created:function(){this.fetchFromServer(),this.getCategories(),this.fetchFromServerProductBom(),this.getShifts()},methods:{formatPrice:function(t){var e=(t/1).toFixed(1).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},fetchFromServer:function(){var t=this,e=this.$route.params.id;u["a"].get("/production-orders/".concat(e)).then(function(){var r=c()(l()().mark((function r(o){var i;return l()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=o.data,i.order){r.next=5;break}t.$router.push("/production-orders"),r.next=16;break;case 5:return t.order.fields.id=i.order.id,t.order.fields.order_number=i.order.order_number,t.order.fields.production_date=i.order.production_date,t.order.fields.qty=i.order.qty,t.order.fields.status=i.order.status,i.order.production_date&&(t.order.fields.production_date=i.order.production_date.split("-").join("/")),t.order.fields.family={value:i.order.category_id,label:i.order.category_name},t.order.fields.product={value:i.order.product_id,label:i.order.product},r.next=15,u["a"].get("/production-lots/order/".concat(e)).then((function(e){for(var r=e.data,o=0,i=0;i<r.lots.length;i++)"FINALIZADO"===r.lots[i].status&&(o+=1);o===r.lots[0].tot&&"FINALIZADO"!==t.order.fields.status&&t.finalizar(),t.porcentaje=o/r.lots[0].tot,t.lots=r.lots}));case 15:t.getLinesByCategoriesEdit();case 16:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},fetchFromServerProductBom:function(){var t=this,e=this.$route.params.id;u["a"].get("/bom/productBom/".concat(e)).then((function(e){var r=e.data;t.dataBom=r.bom}))},backToGrid:function(){this.$router.push("/production-orders")},cancelOrder:function(){var t=this;this.$q.loading.show();var e=this.$route.params.id;u["a"].put("/production-orders/".concat(e,"/cancel"),[]).then((function(e){var r=e.data;t.$q.notify({message:r.message.content,position:"top",color:r.result?"positive":"warning"}),r.result&&(t.$q.loading.hide(),t.fetchFromServer())}))},updateOrder:function(){var t=this;if(this.$v.order.fields.$reset(),this.$v.order.fields.$touch(),this.$v.order.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var e=a()({},this.order.fields);e.unit_id=5,u["a"].put("/production-orders/".concat(e.id),e).then((function(e){var r=e.data;t.$q.notify({message:r.message.content,position:"top",color:r.result?"positive":"red"}),r.result?(t.$q.loading.hide(),t.fetchFromServer(),t.fetchFromServerProductBom()):t.$q.loading.hide()}))},packingList:function(){var t="http://api.alpez.beta.wasp.mx/"+"production-orders/packing-list/pdf/".concat(this.$route.params.id);window.open(t,"_blank")},handiWork:function(){var t="http://api.alpez.beta.wasp.mx/"+"production-orders/handi-work/pdf/".concat(this.$route.params.id);window.open(t,"_blank")},cost:function(){var t="http://api.alpez.beta.wasp.mx/"+"production-orders/cost/pdf/".concat(this.$route.params.id);window.open(t,"_blank")},editLot:function(t){this.$router.push("/lots/".concat(t.id))},lotPackingList:function(t){var e="http://api.alpez.beta.wasp.mx/"+"production-lots/packing-list/pdf/".concat(t);window.open(e,"_blank")},cancelLot:function(t){var e=this;this.$q.dialog({title:"Cancelar lote",message:"¿Realmente desea cancelar el lote?",cancel:!0,persistent:!0}).onOk((function(){e.$q.loading.show(),u["a"].put("/production-lots/".concat(t,"/cancel")).then((function(t){var r=t.data;e.$q.notify({message:r.message.content,position:"top",color:r.result?"positive":"warning"}),r.result?(e.$q.loading.hide(),e.fetchFromServer()):e.$q.loading.hide()}))})).onCancel((function(){return!1}))},getCategories:function(){var t=this;u["a"].get("/categories/options").then((function(e){var r=e.data;t.categoryOptions=r.options}))},getLinesByCategories:function(){var t=this;this.$q.loading.show(),this.ProductsOptionsbyLines=[],this.ProductsOptionsbyLines.unshift({value:null,label:"NINGUNO"}),u["a"].get("/products/category1/".concat(this.order.fields.family)).then((function(e){var r=e.data;r.products.length>0&&(r.products.forEach((function(e){t.ProductsOptionsbyLines.push({label:e.label,value:e.id})})),t.$q.loading.hide())}))},getLinesByCategoriesEdit:function(){var t=this;this.ProductsOptionsbyLines=[],this.ProductsOptionsbyLines.unshift({value:null,label:"NINGUNO"}),u["a"].get("/products/category1/".concat(this.order.fields.family.value)).then((function(e){var r=e.data;r.products.length>0&&r.products.forEach((function(e){t.ProductsOptionsbyLines.push({label:e.label,value:e.id})}))}))},filterCategory:function(t,e,r){var o=this;e((function(){var e=t.toLowerCase();o.options1=o.categoryOptions.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},filterProduct:function(t,e,r){var o=this;e((function(){var e=t.toLowerCase();o.options2=o.ProductsOptionsbyLines.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},production:function(){var t=this;this.$q.dialog({title:"Confirmación",message:"¿Comenzar producción?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk((function(){t.$q.loading.show();var e=a()({},t.order.fields);u["a"].post("/production-orders/getByOrder/".concat(e.id),e).then((function(e){var r=e.data;t.$q.notify({message:r.message.content,position:"top",color:r.result?"positive":"red"}),t.fetchFromServer(),t.fetchFromServerProductBom(),t.$q.loading.hide()})),t.$q.loading.hide()})).onCancel((function(){return!1}))},finalizar:function(){var t=this;return c()(l()().mark((function e(){var r;return l()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.showLoading(),r=a()({},t.order.fields),u["a"].post("/production-orders/finalizeOrder/".concat(r.id),r).then((function(e){var r=e.data;t.$q.notify({message:r.message.content,position:"top",color:r.result?"positive":"red"}),t.fetchFromServer(),t.fetchFromServerProductBom(),t.beforeDestroy()}));case 3:case"end":return e.stop()}}),e)})))()},showLoading:function(){this.$q.loading.show({spinnerColor:"primary",spinnerSize:140,backgroundColor:"white",message:"Cargando..",messageColor:"black"})},beforeDestroy:function(){this.$q.loading.hide()},getUnit:function(t){var e=this,r=t;u["a"].get("products/".concat(r)).then((function(t){var r=t.data;e.lot.fields.unit={value:r.product.unit_id,label:r.product.unit}}))},closeModal:function(){this.lot.fields.product_id=null,this.lot.fields.unit=null,this.lot.fields.qty=null,this.lot.fields.shift=null},addLot:function(){var t=this;if(this.$v.lot.fields.$reset(),this.$v.lot.fields.$touch(),this.$v.lot.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.showLoading(),this.lot.fields.order_id=this.$route.params.id;var e=a()({},this.lot.fields);u["a"].post("/production-lots/createLotByOrder",e).then((function(e){var r=e.data;t.$q.notify({message:r.message.content,position:"top",color:r.result?"positive":"red"}),t.modalOrders=!1,t.closeModal(),t.fetchFromServer(),t.beforeDestroy()}))},getShifts:function(){var t=this;u["a"].get("/shifts/options").then((function(e){var r=e.data;t.shiftOptions=r.options}))}}},g=h,b=r("2877"),v=r("9989"),y=r("ead5"),q=r("079e"),_=r("9c40"),w=r("27f9"),C=r("0016"),O=r("ddd8"),$=r("7cbe"),k=r("52ee"),x=r("66e5"),S=r("4074"),P=r("6b1d"),L=r("b047"),A=r("eaac"),E=r("bd08"),I=r("db86"),R=r("05c0"),N=r("24e8"),D=r("f09f"),F=r("a370"),Q=r("4b7e"),T=r("7f67"),U=r("eebe"),B=r.n(U),z=Object(b["a"])(g,o,i,!1,null,null,null);e["default"]=z.exports;B()(z,"components",{QPage:v["a"],QBreadcrumbs:y["a"],QBreadcrumbsEl:q["a"],QBtn:_["a"],QInput:w["a"],QIcon:C["a"],QSelect:O["a"],QPopupProxy:$["a"],QDate:k["a"],QItem:x["a"],QItemSection:S["a"],QLinearProgress:P["a"],QChip:L["a"],QTable:A["a"],QTr:E["a"],QTd:I["a"],QTooltip:R["a"],QDialog:N["a"],QCard:D["a"],QCardSection:F["a"],QCardActions:Q["a"]}),B()(z,"directives",{ClosePopup:T["a"]})}}]);
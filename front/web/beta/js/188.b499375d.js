(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[188],{"2f2e":function(e,t,i){"use strict";i.r(t);i("b0c0");var s=function(){var e=this,t=e._self._c;return t("q-page",[t("div",{staticClass:"q-pa-sm panel-header"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4"},[t("div",{staticClass:"q-pa-md q-gutter-sm"},[t("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[t("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),t("q-breadcrumbs-el",{attrs:{label:"Embarques",to:"/trips"}}),t("q-breadcrumbs-el",{attrs:{label:"Editar Embarque"},domProps:{textContent:e._s(e.trip.fields.folio)}})],1)],1)]),t("div",{staticClass:"col-sm-8 pull-right"},[t("div",{staticClass:"q-pa-sm q-gutter-sm"},[0!==e.trip.fields.status_timbrado?t("q-btn",{attrs:{icon:e.iconTimbrado[e.trip.fields.status_timbrado],disable:"",color:e.colorTimbrado[e.trip.fields.status_timbrado],label:e.statusTimbrado[e.trip.fields.status_timbrado]}}):e._e(),6===e.trip.fields.status_timbrado?t("q-tooltip",[e._v(e._s(e.trip.fields.message))]):e._e(),7===e.trip.fields.status_timbrado?t("q-tooltip",[e._v(e._s(e.trip.fields.message_cancelacion))]):e._e(),0===e.trip.fields.status_timbrado||6===e.trip.fields.status_timbrado?t("q-btn",{attrs:{color:"green-6",icon:"fas fa-certificate",label:"TIMBRAR"},on:{click:function(t){return e.timbrar()}}}):e._e(),1===e.trip.fields.status_timbrado?t("q-btn",{staticClass:"pull-right",attrs:{disabled:"",color:"orange"}},[e._v(e._s(this.trip.fields.uuid))]):e._e(),1===e.trip.fields.status_timbrado?t("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"green-8",icon:"fas fa-file-excel",label:"XML",loading:e.loadingFiscal},on:{click:function(t){return e.getCFDIInvoice(e.trip.fields.id_request)}}}):e._e(),1===e.trip.fields.status_timbrado?t("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"brown",icon:"fas fa-file-pdf",label:"PDF",loading:e.loadingFiscal},on:{click:function(t){return e.getPdfInvoice(e.trip.fields.id_request,e.trip.fields.pdf)}}}):e._e(),1===e.trip.fields.status_timbrado||7===e.trip.fields.status_timbrado?t("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"red-9",icon:"cancel",label:"Cancelar",loading:e.loadingFiscal},on:{click:function(t){e.cancelarTimbrado=!0}}}):e._e()],1)]),"ENTREGADO"===e.trip.fields.status?t("div",{staticClass:"col-sm-3 pull-right"},[t("div",{staticClass:"q-pa-sm q-gutter-sm"},[t("q-btn",{attrs:{color:e.colorButon,icon:"offline_bolt",label:"CERRADO"},on:{click:function(t){return e.changeStatus("CERRADO")}}})],1)]):e._e()])]),t("div",{staticClass:"q-pa-md bg-grey-3"},[t("div",{staticClass:"row bg-white border-panel"},[t("div",{staticClass:"col q-pa-md"},[t("div",{staticClass:"row q-mb-sm",staticStyle:{visibility:"hidden"}},[t("div",{staticClass:"col-sm-1 offset-11 pull-right"},[t("q-btn",{attrs:{color:"primary",label:"Editar"}})],1)]),t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-2"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:"",label:"Folio","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"format_list_numbered"}})]},proxy:!0}]),model:{value:e.trip.fields.folio,callback:function(t){e.$set(e.trip.fields,"folio",t)},expression:"trip.fields.folio"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2 col-md-2 col-lg-2"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.trip.fields.invoice_id.$error,label:"Remision / Factura",rules:e.invoiceRules,options:e.invoicesOptionsFilter,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fact_check"}})]},proxy:!0},{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",{staticClass:"text-grey"},[e._v("\n                    No hay Resultados\n                  ")])],1)]},proxy:!0}]),model:{value:e.trip.fields.invoice_id,callback:function(t){e.$set(e.trip.fields,"invoice_id",t)},expression:"trip.fields.invoice_id"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2 text-center"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:e.dateRules,error:e.$v.trip.fields.date.$error,mask:"DD/MM/YYYY HH:mm:ss",label:"Fecha salida"},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.trip.fields.date,callback:function(t){e.$set(e.trip.fields,"date",t)},expression:"trip.fields.date"}},[t("q-popup-proxy",{ref:"date_ref",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6"},[t("q-date",{attrs:{color:"secondary","text-color":"white",mask:"DD/MM/YYYY HH:mm:ss"},model:{value:e.trip.fields.date,callback:function(t){e.$set(e.trip.fields,"date",t)},expression:"trip.fields.date"}})],1),t("div",{staticClass:"col-sm-6"},[t("q-time",{attrs:{color:"secondary","text-color":"white",mask:"DD/MM/YYYY HH:mm:ss","now-btn":""},on:{input:function(){return e.$refs.date_ref.hide()}},model:{value:e.trip.fields.date,callback:function(t){e.$set(e.trip.fields,"date",t)},expression:"trip.fields.date"}})],1)])])],1)],1),t("div",{staticClass:"col-xs-12 col-sm-3"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.trip.fields.vehicle_id.$error,label:"Número de unidad",rules:e.vehicle_idRules,options:e.economicNumberOptions,"emit-value":"","map-options":""},on:{input:function(t){return e.getVehicleData()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"tag"}})]},proxy:!0},{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",{staticClass:"text-grey"},[e._v("\n                    No hay Resultados\n                  ")])],1)]},proxy:!0}]),model:{value:e.trip.fields.vehicle_id,callback:function(t){e.$set(e.trip.fields,"vehicle_id",t)},expression:"trip.fields.vehicle_id"}})],1),t("div",{staticClass:"col-xs-12 col-sm-3"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:"",label:"Tipo de vehículo","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"format_list_numbered"}})]},proxy:!0}]),model:{value:e.vehicle.fields.type,callback:function(t){e.$set(e.vehicle.fields,"type",t)},expression:"vehicle.fields.type"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:"",label:"Marca de vehículo","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"book"}})]},proxy:!0}]),model:{value:e.vehicle.fields.brand,callback:function(t){e.$set(e.vehicle.fields,"brand",t)},expression:"vehicle.fields.brand"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:"",label:"Modelo de vehiculo","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"format_list_bulleted"}})]},proxy:!0}]),model:{value:e.vehicle.fields.model,callback:function(t){e.$set(e.vehicle.fields,"model",t)},expression:"vehicle.fields.model"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",disable:"",label:"Placas","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"format_list_bulleted"}})]},proxy:!0}]),model:{value:e.vehicle.fields.plate,callback:function(t){e.$set(e.vehicle.fields,"plate",t)},expression:"vehicle.fields.plate"}})],1)]),0===e.trip.fields.status_timbrado||6===e.trip.fields.status_timbrado?t("div",{staticClass:"row q-mb-sm q-mt-md"},[t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},["CERRADO"!==e.trip.fields.status&&"ENTREGADO"!==e.trip.fields.status&&"EN TRÁNSITO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"positive",icon:"save",label:"Actualizar"},on:{click:function(t){return e.editTrip()}}}):e._e()],1)]):e._e()])])]),t("div",{staticClass:"q-pa-md bg-grey-3"},[t("div",{staticClass:"q-gutter-y-md",staticStyle:{width:"100%"}},[t("q-card",[t("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("q-tab",{attrs:{name:"destinitions",icon:"fas fa-warehouse",label:"DESTINOS"}}),t("q-tab",{attrs:{name:"operators",icon:"person",label:"OPERADORES"}})],1),t("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("q-tab-panel",{attrs:{name:"destinitions"}},[0===e.trip.fields.status_timbrado||6===e.trip.fields.status_timbrado?t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-2 col-sm-3 col-md-3 col-lg-3"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.destination.fields.street.$error,label:"Calle",rules:e.streetRules},on:{input:function(t){e.destination.fields.street=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-road"}})]},proxy:!0}],null,!1,843916074),model:{value:e.destination.fields.street,callback:function(t){e.$set(e.destination.fields,"street",t)},expression:"destination.fields.street"}})],1),t("div",{staticClass:"col-xs-2 col-sm-2 col-md-2 col-ld-2"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.destination.fields.outdoor_number.$error,label:"Número exterior",rules:e.outdoor_numberRules},on:{input:function(t){e.destination.fields.outdoor_number=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-hashtag"}})]},proxy:!0}],null,!1,3118026066),model:{value:e.destination.fields.outdoor_number,callback:function(t){e.$set(e.destination.fields,"outdoor_number",t)},expression:"destination.fields.outdoor_number"}})],1),t("div",{staticClass:"col-xs-2 col-sm-2 col-md-2 col-ld-2"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Número interior"},on:{input:function(t){e.destination.fields.indoor_number=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-hashtag"}})]},proxy:!0}],null,!1,3118026066),model:{value:e.destination.fields.indoor_number,callback:function(t){e.$set(e.destination.fields,"indoor_number",t)},expression:"destination.fields.indoor_number"}})],1),t("div",{staticClass:"col-xs-2 col-sm-3 col-md-3 col-lg-3"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.destination.fields.between_street.$error,label:"Entre calles",rules:e.between_streetRules},on:{input:function(t){e.destination.fields.between_street=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-road"}})]},proxy:!0}],null,!1,843916074),model:{value:e.destination.fields.between_street,callback:function(t){e.$set(e.destination.fields,"between_street",t)},expression:"destination.fields.between_street"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2 col-md-2 col-lg-2"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:e.cpRules,error:e.$v.destination.fields.postal_code_id.$error,options:e.postal_codes,label:"Codigo Postal","use-input":"","emit-value":"","map-options":""},on:{filter:e.filterPostalCodes,input:function(t){return e.getSuburbsByPostalCode(e.destination.fields.postal_code_id)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-mail-bulk"}})]},proxy:!0}],null,!1,3278367014),model:{value:e.destination.fields.postal_code_id,callback:function(t){e.$set(e.destination.fields,"postal_code_id",t)},expression:"destination.fields.postal_code_id"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2 col-md-2 col-lg-2"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.suburbs_options,rules:e.suburbRules,error:e.$v.destination.fields.suburb_id.$error,label:"Colonia","use-input":"","emit-value":"","map-options":""},on:{filter:e.filterSuburbs},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-city"}})]},proxy:!0}],null,!1,4242962261),model:{value:e.destination.fields.suburb_id,callback:function(t){e.$set(e.destination.fields,"suburb_id",t)},expression:"destination.fields.suburb_id"}})],1),t("div",{staticClass:"col-xs-2 col-sm-2 col-md-2 col-lg-2"},[t("q-select",{staticClass:"uppcase",attrs:{filled:"",color:"dark","bg-color":"secondary",label:"Municipio",options:e.MunicipioOptions,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},on:{filter:e.filterMunicipio,input:function(t){return e.getPostalCodes()}},scopedSlots:e._u([{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",{staticClass:"text-grey"},[e._v("\n                      No hay Resultados\n                    ")])],1)]},proxy:!0}],null,!1,455915541),model:{value:e.destination.fields.municipio_id,callback:function(t){e.$set(e.destination.fields,"municipio_id",t)},expression:"destination.fields.municipio_id"}})],1),t("div",{staticClass:"col-xs-2 col-sm-2"},[t("q-select",{staticClass:"uppcase",attrs:{filled:"",color:"dark","bg-color":"secondary",label:"Ciudad",options:e.cityOptions,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"",disable:!0,"map-options":""},on:{filter:e.filterCity},scopedSlots:e._u([{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",{staticClass:"text-grey"},[e._v("\n                      No hay Resultados\n                    ")])],1)]},proxy:!0}],null,!1,455915541),model:{value:e.destination.fields.city_id,callback:function(t){e.$set(e.destination.fields,"city_id",t)},expression:"destination.fields.city_id"}})],1),t("div",{staticClass:"col-xs-3 col-sm-2"},[t("q-select",{staticClass:"uppcase",attrs:{filled:"",color:"dark","bg-color":"secondary",label:"ESTADO",options:e.estadoOptions,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},on:{input:function(t){return e.getMunicipiosbyEstado(e.destination.fields.estado_id,!0)},filter:e.filterEstado},scopedSlots:e._u([{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",{staticClass:"text-grey"},[e._v("\n                        No hay Resultados\n                      ")])],1)]},proxy:!0}],null,!1,2432333973),model:{value:e.destination.fields.estado_id,callback:function(t){e.$set(e.destination.fields,"estado_id",t)},expression:"destination.fields.estado_id"}})],1),t("div",{staticClass:"col-xs-2 col-sm-2 col-md-2 col-ld-2"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.destination.fields.distance.$error,rules:e.distanceRules,label:"Distancia recorrida (KM)"},on:{input:function(t){e.destination.fields.distance=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-hashtag"}})]},proxy:!0}],null,!1,3118026066),model:{value:e.destination.fields.distance,callback:function(t){e.$set(e.destination.fields,"distance",t)},expression:"destination.fields.distance"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2 text-center"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:e.destinationDateRules,error:e.$v.destination.fields.date.$error,mask:"DD/MM/YYYY HH:mm:ss",label:"Fecha de entrega"},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:e.destination.fields.date,callback:function(t){e.$set(e.destination.fields,"date",t)},expression:"destination.fields.date"}},[t("q-popup-proxy",{ref:"date_ref",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6"},[t("q-date",{attrs:{color:"secondary","text-color":"white",mask:"DD/MM/YYYY HH:mm:ss"},model:{value:e.destination.fields.date,callback:function(t){e.$set(e.destination.fields,"date",t)},expression:"destination.fields.date"}})],1),t("div",{staticClass:"col-sm-6"},[t("q-time",{attrs:{color:"secondary","text-color":"white",mask:"DD/MM/YYYY HH:mm:ss","now-btn":""},on:{input:function(){return e.$refs.date_ref.hide()}},model:{value:e.destination.fields.date,callback:function(t){e.$set(e.destination.fields,"date",t)},expression:"destination.fields.date"}})],1)])])],1)],1)]):e._e(),0===e.trip.fields.status_timbrado||6===e.trip.fields.status_timbrado?t("div",{staticClass:"row q-col-gutter-xs"},[e.editFlag?e._e():t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},["CERRADO"!==e.trip.fields.status&&"ENTREGADO"!==e.trip.fields.status&&"EN TRÁNSITO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"positive",icon:"add",label:"Agregar"},on:{click:function(t){return e.createDestination()}}}):e._e()],1),e.editFlag?t("div",{staticClass:"col-xs-12 col-sm-12 pull-right"},[t("q-btn",{staticStyle:{"margin-right":"7px"},attrs:{color:"negative",icon:"cancel",label:"Cancelar"},on:{click:function(t){return e.cancelEditDestination()}}}),t("q-btn",{attrs:{color:"positive",icon:"add",label:"Actualizar"},on:{click:function(t){return e.updateDestination()}}})],1):e._e()]):e._e(),t("div",{staticClass:"row bg-white border-panel",staticStyle:{"margin-top":"10px"}},[t("div",{staticClass:"col q-pa-md"},[t("q-table",{attrs:{flat:"",bordered:"",data:e.destinations,columns:e.destinationColumns,"row-key":"code"},scopedSlots:e._u([{key:"body",fn:function(i){return[t("q-tr",{attrs:{props:i}},[t("q-td",{key:"street",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.street+", #"+i.row.outdoor_number+(""!==i.row.indoor_number?", int: "+i.row.indoor_number:"")))]),t("q-td",{key:"postal_code",staticStyle:{"text-align":"left"},attrs:{props:i}},[e._v(e._s(i.row.postal_code))]),t("q-td",{key:"suburb",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.suburb))]),t("q-td",{key:"municipality",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.municipality))]),t("q-td",{key:"location",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.location))]),t("q-td",{key:"state",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.state))]),t("q-td",{key:"distance",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.distance))]),t("q-td",{key:"date",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.date))]),t("q-td",{key:"actions",staticStyle:{"text-align":"center"},attrs:{props:i}},[0===e.trip.fields.status_timbrado?t("q-btn",{attrs:{color:"primary",icon:"fas fa-edit",flat:"",size:"10px"},nativeOn:{click:function(t){return e.editDestination(i.row)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Editar")])],1):e._e(),0===e.trip.fields.status_timbrado?t("q-btn",{attrs:{color:"red",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(t){return e.deleteDestination(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[e._v("Eliminar")])],1):e._e(),"NUEVO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"primary",icon:"visibility",flat:"",size:"10px"},nativeOn:{click:function(t){return e.editSelectedRowShippings(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Ver envío")])],1):e._e(),"ENTREGADO"===e.trip.fields.status?t("q-btn",{attrs:{color:i.row.file?"positive":"negative",icon:"backup",flat:"",size:"10px"},nativeOn:{click:function(t){return e.uploadFileShipping(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Capturar archivo")])],1):e._e(),i.row.file?t("q-btn",{attrs:{color:"positive",icon:"find_in_page",flat:"",size:"10px"},nativeOn:{click:function(t){return e.viewFileShipping(i.row)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Ver archivo")])],1):e._e()],1)],1)]}}])})],1)])]),t("q-tab-panel",{attrs:{name:"operators"}},[0===e.trip.fields.status_timbrado||6===e.trip.fields.status_timbrado?t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-3"},[t("q-select",{staticClass:"uppcase",attrs:{filled:"",color:"dark","bg-color":"secondary",error:e.$v.operator_id.$error,rules:e.operator_idRules,label:"Operador",options:e.operatorOptions,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},on:{filter:e.filterOperator},scopedSlots:e._u([{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",{staticClass:"text-grey"},[e._v("\n                        No hay Resultados\n                      ")])],1)]},proxy:!0}],null,!1,2432333973),model:{value:e.operator_id,callback:function(t){e.operator_id=t},expression:"operator_id"}})],1),t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-7 pull-right"},["CERRADO"!==e.trip.fields.status&&"ENTREGADO"!==e.trip.fields.status&&"EN TRÁNSITO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"positive",icon:"add",label:"Agregar"},on:{click:function(t){return e.addOperator()}}}):e._e()],1)]):e._e(),t("div",{staticClass:"row bg-white border-panel",staticStyle:{"margin-top":"10px"}},[t("div",{staticClass:"col q-pa-md"},[t("q-table",{attrs:{flat:"",bordered:"",data:e.operatorsData,columns:e.opertorColumns,"row-key":"code"},scopedSlots:e._u([{key:"body",fn:function(i){return[t("q-tr",{attrs:{props:i}},[t("q-td",{key:"name",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.name))]),t("q-td",{key:"rfc",staticStyle:{"text-align":"left"},attrs:{props:i}},[e._v(e._s(i.row.rfc))]),t("q-td",{key:"license",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.license))]),t("q-td",{key:"actions",staticStyle:{"text-align":"center"},attrs:{props:i}},[0===e.trip.fields.status_timbrado?t("q-btn",{attrs:{color:"red",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(t){return e.deleteOperator(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[e._v("Eliminar")])],1):e._e()],1)],1)]}}])})],1)])]),t("q-tab-panel",{attrs:{name:"lots"}},[t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},["CERRADO"!==e.trip.fields.status&&"ENTREGADO"!==e.trip.fields.status&&"EN TRÁNSITO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"positive",icon:"add",label:"Agregar"},on:{click:function(t){return e.createLot()}}}):e._e()],1)]),t("div",{staticClass:"row bg-white border-panel",staticStyle:{"margin-top":"10px"}},[t("div",{staticClass:"col q-pa-md"},[t("q-table",{attrs:{flat:"",bordered:"",data:e.lotData,columns:e.lotColumns,"row-key":"code"},scopedSlots:e._u([{key:"body",fn:function(i){return[t("q-tr",{attrs:{props:i}},[t("q-td",{key:"folio",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.serial))]),t("q-td",{key:"customer",staticStyle:{"text-align":"left"},attrs:{props:i}},[e._v(e._s(i.row.client))]),t("q-td",{key:"date",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.date.substr(8,2)+"/"+i.row.date.substr(5,2)+"/"+i.row.date.substr(0,4)))]),t("q-td",{key:"actions",staticStyle:{"text-align":"center"},attrs:{props:i}},["CERRADO"!==e.trip.fields.status&&"ENTREGADO"!==e.trip.fields.status&&"EN TRÁNSITO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"primary",icon:"fas fa-edit",flat:"",size:"10px"},nativeOn:{click:function(t){return e.editSelectedRowShippings(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Editar")])],1):e._e(),"CERRADO"!==e.trip.fields.status&&"ENTREGADO"!==e.trip.fields.status&&"EN TRÁNSITO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"red",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(t){return e.deleteSelectedRowShipping(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[e._v("Eliminar")])],1):e._e(),"NUEVO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"primary",icon:"visibility",flat:"",size:"10px"},nativeOn:{click:function(t){return e.editSelectedRowShippings(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Ver envío")])],1):e._e(),"ENTREGADO"===e.trip.fields.status?t("q-btn",{attrs:{color:i.row.file?"positive":"negative",icon:"backup",flat:"",size:"10px"},nativeOn:{click:function(t){return e.uploadFileShipping(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Capturar archivo")])],1):e._e(),i.row.file?t("q-btn",{attrs:{color:"positive",icon:"find_in_page",flat:"",size:"10px"},nativeOn:{click:function(t){return e.viewFileShipping(i.row)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Ver archivo")])],1):e._e()],1)],1)]}}])})],1)])]),t("q-tab-panel",{attrs:{name:"expenses"}},["CERRADO"!==e.trip.fields.status?t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-4"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.expenses.fields.expense_type.$error,label:"Tipo de gastos",rules:e.expenseTypeRules,options:e.expensesOptions,"use-input":"","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"shopping_cart"}})]},proxy:!0},{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",{staticClass:"text-grey"},[e._v("\n                        No hay Resultados\n                      ")])],1)]},proxy:!0}],null,!1,1763098687),model:{value:e.expenses.fields.expense_type,callback:function(t){e.$set(e.expenses.fields,"expense_type",t)},expression:"expenses.fields.expense_type"}})],1),t("div",{staticClass:"col-xs-12 col-sm-4"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:e.expenseAmountRules,error:e.$v.expenses.fields.expense_amount.$error,label:"Monto","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"attach_money"}})]},proxy:!0}],null,!1,2568092296),model:{value:e.expenses.fields.expense_amount,callback:function(t){e.$set(e.expenses.fields,"expense_amount",t)},expression:"expenses.fields.expense_amount"}})],1),t("div",{staticClass:"col-xs-12 col-sm-4 text-center"},[t("q-select",{attrs:{color:"white","bg-color":"secondary",filled:"",dark:"",rules:e.expenseDateRules,error:e.$v.expenses.fields.expense_date.$error,mask:"date",label:"Fecha"},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:e.expenses.fields.expense_date,callback:function(t){e.$set(e.expenses.fields,"expense_date",t)},expression:"expenses.fields.expense_date"}},[t("q-popup-proxy",{ref:"date_ref",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("div",{staticClass:"col-sm-12"},[t("q-date",{attrs:{color:"secondary","text-color":"white",mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return e.$refs.date_ref.hide()}},model:{value:e.expenses.fields.expense_date,callback:function(t){e.$set(e.expenses.fields,"expense_date",t)},expression:"expenses.fields.expense_date"}})],1)])],1)],1),e.editFlag?e._e():t("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},[t("q-btn",{attrs:{color:"positive",icon:"add",label:"Crear"},on:{click:function(t){return e.createExpense()}}})],1),e.editFlag?t("div",{staticClass:"col-xs-12 col-sm-12 pull-right"},[t("q-btn",{staticStyle:{"margin-right":"7px"},attrs:{color:"negative",icon:"cancel",label:"Cancelar"},on:{click:function(t){return e.cancelEditExpense()}}}),t("q-btn",{attrs:{color:"positive",icon:"add",label:"Actualizar"},on:{click:function(t){return e.editExpense()}}})],1):e._e()]):e._e(),t("div",{staticClass:"row bg-white border-panel",staticStyle:{"margin-top":"10px"}},[t("div",{staticClass:"col q-pa-md"},[t("q-table",{attrs:{flat:"",bordered:"",data:e.expensesData,columns:e.expensesColumns,"row-key":"code"},scopedSlots:e._u([{key:"body",fn:function(i){return[t("q-tr",{attrs:{props:i}},[t("q-td",{key:"type",staticStyle:{"text-align":"left"},attrs:{props:i}},[e._v(e._s(i.row.type))]),t("q-td",{key:"amount",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s("$"+e.currencyFormat(i.row.amount)))]),t("q-td",{key:"date",staticStyle:{"text-align":"center"},attrs:{props:i}},[e._v(e._s(i.row.date.substr(8,2)+"/"+i.row.date.substr(5,2)+"/"+i.row.date.substr(0,4)))]),t("q-td",{key:"actions",staticStyle:{"text-align":"center"},attrs:{props:i}},["CERRADO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"primary",icon:"fas fa-edit",flat:"",size:"10px"},nativeOn:{click:function(t){return e.editSelectedRowExpenses(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Editar")])],1):e._e(),"ENTREGADO"===e.trip.fields.status?t("q-btn",{attrs:{color:i.row.file?"positive":"negative",icon:"backup",flat:"",size:"10px"},nativeOn:{click:function(t){return e.uploadFileExpense(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Capturar archivo")])],1):e._e(),i.row.file?t("q-btn",{attrs:{color:"positive",icon:"find_in_page",flat:"",size:"10px"},nativeOn:{click:function(t){return e.viewFileExpense(i.row)}}},[t("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Ver archivo")])],1):e._e(),"CERRADO"!==e.trip.fields.status?t("q-btn",{attrs:{color:"red",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(t){return e.deleteSelectedRowExpenses(i.row.id)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[e._v("Eliminar")])],1):e._e()],1)],1)]}}])})],1)])])],1)],1)],1)]),t("q-dialog",{attrs:{persistent:""},model:{value:e.fileModalShipping,callback:function(t){e.fileModalShipping=t},expression:"fileModalShipping"}},[t("q-card",[t("q-card-section",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-sm-10 text-h6"},[e._v("Archivo: "+e._s(e.fileShippingCode))]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col-xs-12 col-sm-2 pull-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),t("q-card-section",[t("q-uploader",{ref:"fileShippingRef",attrs:{url:e.fileShippingUrl,method:"POST","hide-upload-btn":""},on:{uploaded:e.afterUploadFile}})],1),t("q-card-section",[t("q-img",{attrs:{src:e.fileUrl,"spinner-color":"white"}})],1),t("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[t("q-btn",{attrs:{flat:"",label:"Subir archivo"},on:{click:function(t){return e.uploadFiles()}}})],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:e.fileModalExpense,callback:function(t){e.fileModalExpense=t},expression:"fileModalExpense"}},[t("q-card",[t("q-card-section",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-sm-10 text-h6"},[e._v("Archivo: "+e._s(e.fileExpenseCode))]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col-xs-12 col-sm-2 pull-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),t("q-card-section",[t("q-uploader",{ref:"fileShippingRef",attrs:{url:e.fileExpenseUrl,method:"POST","hide-upload-btn":""},on:{uploaded:e.afterUploadFileExpense}})],1),t("q-card-section",[t("q-img",{attrs:{src:e.fileUrl,"spinner-color":"white"}})],1),t("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[t("q-btn",{attrs:{flat:"",label:"Subir archivo"},on:{click:function(t){return e.uploadFilesExpense()}}})],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:e.cancelarTimbrado,callback:function(t){e.cancelarTimbrado=t},expression:"cancelarTimbrado"}},[t("q-card",[t("q-card-section",{staticClass:"bg-primary"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-11 col-sm-11 col-md-11 col-lg-11 text-h6",staticStyle:{color:"white"}},[e._v("Cancelar Carta Porte")]),t("div",{staticClass:"col-xs-1 col-sm-1 col-md-1 col-lg-1 pull-right"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"}})],1)])]),t("q-card-section",{staticClass:"items-center"},[t("span",{staticClass:"row text-h6"},[e._v("¿Está seguro de cancelar esta Carta Porte?")])]),t("q-card-section",{staticClass:"items-center"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"","map-options":"","emit-value":"",label:"Motivo de cancelacion",options:e.CancelacionOptions},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"description"}})]},proxy:!0}]),model:{value:e.trip.fields.motivo_cancelacion,callback:function(t){e.$set(e.trip.fields,"motivo_cancelacion",t)},expression:"trip.fields.motivo_cancelacion"}})],1)])]),"01"===e.trip.fields.motivo_cancelacion?t("q-card-section",{staticClass:"items-center"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.trip.fields.folio_sustituye.$error,label:"Folio que sustituye",rules:e.tripFolioSustituye},on:{keyup:function(t){return e.isNumber(t,"folio_sustituye")}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"description"}})]},proxy:!0}],null,!1,736773578),model:{value:e.trip.fields.folio_sustituye,callback:function(t){e.$set(e.trip.fields,"folio_sustituye",t)},expression:"trip.fields.folio_sustituye"}})],1)])]):e._e(),t("q-card-section",{staticClass:"text-primary"},[t("div",{staticClass:"row q-col-gutter-xs q-col-gutter-sm q-col-gutter-md row q-col-gutter-xs q-col-gutter-lg"},[t("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 col-lg-6"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{"background-color":"#f44336"},attrs:{flat:"",label:"Cancelar",color:"white"},on:{click:function(t){e.cancelarTimbrado=!1}}})],1),t("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 col-lg-6",attrs:{align:"right"}},[t("q-btn",{staticStyle:{"background-color":"#21ba45","text-align":"right"},attrs:{flat:"",label:"Confirmar",color:"white"},on:{click:function(t){return e.cancelarFactura()}}})],1)])])],1)],1)],1)},n=[],o=i("7ec2"),a=i.n(o),r=i("c973"),l=i.n(r),c=i("ded3"),d=i.n(c),u=(i("a9e3"),i("caad"),i("2532"),i("14d9"),i("ac1f"),i("5319"),i("b680"),i("c35a"),i("4de4"),i("d3b7"),i("3ca3"),i("e260"),i("ddb0"),i("99af"),i("a15b"),i("2b3d"),i("9861"),i("aabb")),p=i("b5ae"),f=p.required,m=p.decimal,v=p.maxLength,b=p.requiredIf,h={name:"EditTrip",validations:{trip:{fields:{date:{required:f},vehicle_id:{required:f},invoice_id:{required:f},folio_sustituye:{required:b((function(){return"01"===this.trip.fields.motivo_cancelacion}))}}},expenses:{fields:{expense_type:{required:f},expense_amount:{required:f,decimal:m},expense_date:{required:f}}},destination:{fields:{street:{required:f,maxLength:v(100)},postal_code_id:{required:f},suburb_id:{required:f},indoor_number:{},outdoor_number:{required:f},between_street:{required:f},distance:{required:f},date:{required:f}}},operator_id:{required:f}},data:function(){return{tab:"destinitions",trip:{fields:{date:null,vehicle_id:null,invoice_id:null,status_timbrado:null,id_request:null,folio_sustituye:null}},destination:{fields:{id:null,street:null,estado_id:null,municipio_id:null,postal_code_id:null,suburb_id:null,indoor_number:null,outdoor_number:null,between_street:null,city_id:null,distance:null,date:null}},vehicle:{fields:{type:null,brand:null,model:null,plate:null}},expenses:{fields:{trip_id:Number(this.$route.params.id),expense_type:null,expense_amount:null,expense_date:null,id:null}},driversOptions:[],destinysOptions:[],economicNumberOptions:[],driversOptionsFilter:[],destinysOptionsFilter:[],expensesOptions:[],expensesColumns:[{name:"type",align:"center",label:"TIPO DE GASTO",field:"type",sortable:!1},{name:"amount",align:"center",label:"COSTO",field:"amount",sortable:!1},{name:"date",align:"center",label:"FECHA",field:"date",sortable:!1},{name:"actions",align:"center",label:"ACCIÓNES",field:"actions",sortable:!1}],lotColumns:[{name:"folio",align:"center",label:"FOLIO",field:"folio",sortable:!1},{name:"customer",align:"center",label:"CLIENTE",field:"customer",sortable:!1},{name:"date",align:"center",label:"FECHA",field:"date",sortable:!1},{name:"actions",align:"center",label:"ACCIÓNES",field:"actions",sortable:!1}],destinationColumns:[{name:"street",align:"center",label:"CALLE",field:"street",sortable:!1},{name:"postal_code",align:"center",label:"CP",field:"postal_code",sortable:!1},{name:"suburb",align:"center",label:"COLONIA",field:"suburb",sortable:!1},{name:"municipality",align:"center",label:"MUNICIPIO",field:"municipality",sortable:!1},{name:"location",align:"center",label:"CIUDAD",field:"location",sortable:!1},{name:"state",align:"center",label:"ESTADO",field:"state",sortable:!1},{name:"date",align:"center",label:"FECHA DE ENTREGA",field:"date",sortable:!1},{name:"actions",align:"center",label:"ACCIÓNES",field:"actions",sortable:!1}],opertorColumns:[{name:"name",align:"center",label:"NOMBRE",field:"name",sortable:!1},{name:"rfc",align:"center",label:"RFC",field:"rfc",sortable:!1},{name:"license",align:"center",label:"LICENCIA",field:"license",sortable:!1},{name:"actions",align:"center",label:"ACCIÓNES",field:"actions",sortable:!1}],statusTimbrado:["Nuevo","Timbrado","Cancelado","Cancelando","Timbrando","Cancelando","Error","Error al cancelar"],colorTimbrado:["blue-6","green-6","purple-6","warning","warning","warning","red-6","red-6"],iconTimbrado:["add","done","cancel","fas fa-ellipsis-h","fas fa-ellipsis-h","fas fa-ellipsis-h","cancel","cancel"],expensesData:[],editFlag:!1,lotData:[],colorStatus:null,colorButon:null,dataFiles:[],serverUrl:"http://api.alpez.beta.wasp.mx/",fileModalShipping:!1,fileUrl:null,fileShippingId:null,fileShippingCode:null,fileModalExpense:null,fileExpenseCode:null,fileExpenseId:null,invoicesOptionsFilter:[],postal_codes:[],postal_codes_options:[],suburbs:[],suburbs_options:[],cities:[],cityOptions:[],selectMunicipio:[],MunicipioOptions:[],selectEstados:[],estadoOptions:[],destinations:[],operator_id:null,operators:[],operatorOptions:[],operatorsData:[],interval:null,loadingFiscal:!1,cancelarTimbrado:!1,CancelacionOptions:[{label:"01 - Comprobantes emitidos con errores con relación",value:"01"},{label:"02 - Comprobantes emitidos con errores sin relación.",value:"02"},{label:"03 - No se llevó a cabo la operación.",value:"03"},{label:"04 - Operación nominativa relacionada en una factura global.",value:"04"}],pagoId:null,motivos:["","01 - Comprobantes emitidos con errores con relación","02 - Comprobantes emitidos con errores sin relación.","03 - No se llevó a cabo la operación.","04 - Operación nominativa relacionada en una factura global."]}},computed:{invoiceRules:function(e){var t=this;return[function(e){return t.$v.trip.fields.invoice_id.required||"El campo Remision / Factura es requerido."}]},fileShippingUrl:function(){return"http://api.alpez.beta.wasp.mx/shippings/file/shipping/"+this.fileShippingId},fileExpenseUrl:function(){return"http://api.alpez.beta.wasp.mx/trip-expenses/file/expense/"+this.fileExpenseId},driverRules:function(e){var t=this;return[function(e){return t.$v.trip.fields.driver.required||"El campo Chofer es requerido."}]},destinyRules:function(e){var t=this;return[function(e){return t.$v.trip.fields.destiny.required||"El campo Destino es requerido."}]},dateRules:function(e){var t=this;return[function(e){return t.$v.trip.fields.date.required||"El campo Fecha es requerido."}]},vehicle_idRules:function(e){var t=this;return[function(e){return t.$v.trip.fields.vehicle_id.required||"El campo Número de unidad es requerido."}]},expenseTypeRules:function(e){var t=this;return[function(e){return t.$v.expenses.fields.expense_type.required||"El campo Tipo de gasto es requerido."}]},expenseAmountRules:function(e){var t=this;return[function(e){return t.$v.expenses.fields.expense_amount.required||"El campo Monto es requerido."},function(e){return t.$v.expenses.fields.expense_amount.decimal||"El campo Monto es numerico."}]},expenseDateRules:function(e){var t=this;return[function(e){return t.$v.expenses.fields.expense_date.required||"El campo Fecha es requerido."}]},streetRules:function(e){var t=this;return[function(e){return t.$v.destination.fields.street.required||"El campo Calle es requerido."},function(e){return t.$v.destination.fields.street.maxLength||"El campo Calle no debe exceder los 100 dígitos."}]},cpRules:function(e){var t=this;return[function(e){return t.$v.destination.fields.postal_code_id.required||"El campo código postal es requerido."}]},outdoor_numberRules:function(e){var t=this;return[function(e){return t.$v.destination.fields.outdoor_number.required||"El campo Número exterior es requerido."}]},suburbRules:function(e){var t=this;return[function(e){return t.$v.destination.fields.suburb_id.required||"El campo Colonia es requerido."}]},between_streetRules:function(e){var t=this;return[function(e){return t.$v.destination.fields.between_street.required||"El campo Entre calles es requerido."}]},distanceRules:function(e){var t=this;return[function(e){return t.$v.destination.fields.distance.required||"El campo Distancia recorrida es requerido."}]},destinationDateRules:function(e){var t=this;return[function(e){return t.$v.destination.fields.date.required||"El campo Fecha de entrega es requerido."}]},operator_idRules:function(e){var t=this;return[function(e){return t.$v.operator_id.required||"El campo Operador es requerido."}]},tripFolioSustituye:function(e){var t=this;return[function(e){return t.$v.trip.fields.folio_sustituye.required||"El campo Folio que sustituye es requerido."}]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(8)||this.$router.push("/")},created:function(){this.$q.loading.show(),this.getEstados(),this.fetchFromServer(),this.getDrivers(),this.getDestinys(),this.getEconomicNumber(),this.getExpensesType(),this.getGridExpenses(),this.getShippings(),this.getColors(),this.getOperators(),this.getGridDrivers(),this.$q.loading.hide()},methods:{currencyFormat:function(e){return Number.parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},fetchFromServer:function(){var e=this;this.$q.loading.show();var t=this.$route.params.id;u["a"].get("/trips/".concat(t)).then((function(t){var i=t.data;i.trip?(e.trip.fields.folio=i.trip.folio,e.invoicesOptionsFilter=[{value:i.trip.invoice_id,label:i.trip.invoice}],e.economicNumberOptions=[{value:i.trip.vehicle_id,label:i.trip.economic_number}],e.trip.fields.invoice_id=i.trip.invoice_id,e.trip.fields.date=i.trip.date,e.trip.fields.vehicle_id=i.trip.vehicle_id,e.trip.fields.status=i.trip.status,e.trip.fields.status_timbrado=i.trip.status_timbrado,e.trip.fields.uuid=i.trip.uuid,e.trip.fields.pdf=i.trip.pdf,e.trip.fields.message=i.trip.message,e.trip.fields.id_request=i.trip.id_request,console.log(i),e.getVehicleData(),e.getColors(),e.getGridDestination(),3!==i.trip.status_timbrado&&4!==i.trip.status_timbrado&&5!==i.trip.status_timbrado&&null!==e.interval?(clearInterval(e.interval),e.interval=null):4!==i.trip.status_timbrado&&3!==i.trip.status_timbrado&&5!==i.trip.status_timbrado||null!==e.interval||(e.interval=setInterval((function(){e.revisarTimbrado()}),1e4)),e.$q.loading.hide()):e.$router.push("/trips")}))},editTrip:function(){var e=this;if(this.$v.trip.fields.$reset(),this.$v.trip.fields.$touch(),this.$v.trip.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=d()({},this.trip.fields);this.trip.fields.driver.value&&(t.driver=this.trip.fields.driver.value),this.trip.fields.destiny.value&&(t.destiny=this.trip.fields.destiny.value),this.trip.fields.economic_number.value&&(t.economic_number=this.trip.fields.economic_number.value);var i=this.$route.params.id;u["a"].put("/trips/".concat(i),t).then((function(t){var i=t.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),e.$q.loading.hide()}))},getDrivers:function(){var e=this;u["a"].get("drivers/options").then((function(t){e.driversOptions=t.data.options}))},filterDrivers:function(e,t,i){var s=this;t((function(){var t=e.toLowerCase();s.driversOptionsFilter=s.driversOptions.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},getDestinys:function(){var e=this;u["a"].get("ranges/options").then((function(t){e.destinysOptions=t.data.options}))},filterDestinys:function(e,t,i){var s=this;t((function(){var t=e.toLowerCase();s.destinysOptionsFilter=s.destinysOptions.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},getEconomicNumber:function(){var e=this;u["a"].get("vehicle/options").then((function(t){e.economicNumberOptions=t.data.options}))},getVehicleData:function(){var e=this,t=this.trip.fields.vehicle_id;this.trip.fields.vehicle_id.value&&(t=this.trip.fields.vehicle_id.value),this.$q.loading.show(),u["a"].get("vehicle/vehicle-data/".concat(t)).then((function(t){e.vehicle.fields=t.data.vehicle,e.$q.loading.hide()}))},getExpensesType:function(){var e=this;u["a"].get("expenses/options").then((function(t){e.expensesOptions=t.data.options}))},createExpense:function(){var e=this;if(this.$v.expenses.fields.$reset(),this.$v.expenses.fields.$touch(),this.$v.expenses.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=d()({},this.expenses.fields);t.expense_date=this.expenses.fields.expense_date.substr(6,10)+"-"+this.expenses.fields.expense_date.substr(3,2)+"-"+this.expenses.fields.expense_date.substr(0,2),u["a"].post("trip-expenses/",t).then((function(t){var i=t.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(e.clearExpenseData(),e.getGridExpenses(),e.$q.loading.hide()):e.$q.loading.hide()}))},getGridExpenses:function(){var e=this;this.$q.loading.show();var t=this.$route.params.id;u["a"].get("/trip-expenses/all/".concat(Number(t))).then((function(t){var i=t.data;e.expensesData=i.expenses,e.$q.loading.hide()}))},editSelectedRowExpenses:function(e){var t=this;this.editFlag?this.editFlag=!1:(this.editFlag=!0,u["a"].get("/trip-expenses/".concat(Number(e))).then((function(e){var i=e.data;t.expenses.fields.expense_type={value:i.expense.type_id,label:i.expense.type},t.expenses.fields.expense_amount=i.expense.amount,t.expenses.fields.expense_date=i.expense.date.substr(8,10)+"/"+i.expense.date.substr(5,2)+"/"+i.expense.date.substr(0,4),t.expenses.fields.id=i.expense.id})))},clearExpenseData:function(){this.expenses.fields.expense_type=null,this.expenses.fields.expense_amount=null,this.expenses.fields.expense_date=null,this.editFlag=!1},cancelEditExpense:function(){this.editFlag=!1,this.clearExpenseData()},editExpense:function(){var e=this;if(this.$v.expenses.fields.$reset(),this.$v.expenses.fields.$touch(),this.$v.expenses.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=this.expenses.fields.id,i=d()({},this.expenses.fields);i.expense_date=this.expenses.fields.expense_date.substr(6,10)+"-"+this.expenses.fields.expense_date.substr(3,2)+"-"+this.expenses.fields.expense_date.substr(0,2),i.expense_type=this.expenses.fields.expense_type,this.expenses.fields.expense_type.value&&(i.expense_type=this.expenses.fields.expense_type.value),u["a"].put("/trip-expenses/".concat(t),i).then((function(t){var i=t.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(e.clearExpenseData(),e.getGridExpenses(),e.$q.loading.hide()):e.$q.loading.hide()}))},deleteSelectedRowExpenses:function(e){var t=this;this.$q.dialog({title:"Confirmación",message:"¿Desea eliminar este Gasto?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk((function(){u["a"].delete("/trip-expenses/".concat(e)).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning",icon:i.result?"thumb_up":"close"}),i.result&&(t.getGridExpenses(),t.$q.loading.hide())}))})).onCancel((function(){}))},createLot:function(){var e=this.$route.params.id;this.$router.push("/lotTrip/new/".concat(e))},getShippings:function(){var e=this;this.$q.loading.show();var t=this.$route.params.id;u["a"].get("/shippings/all/".concat(Number(t))).then((function(t){var i=t.data;e.lotData=i.shippings,e.$q.loading.hide()}))},editSelectedRowShippings:function(e){this.$router.push("/lotTrip/".concat(e))},deleteSelectedRowShipping:function(e){var t=this;this.$q.dialog({title:"Confirmación",message:"¿Desea eliminar este Envío?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk((function(){u["a"].delete("/shippings/".concat(e)).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning",icon:i.result?"thumb_up":"close"}),i.result&&(t.getShippings(),t.$q.loading.hide())}))})).onCancel((function(){}))},getColors:function(){"NUEVO"===this.trip.fields.status&&(this.colorStatus="light-blue-6",this.colorButon="purple-10"),"EN TRÁNSITO"===this.trip.fields.status&&(this.colorStatus="purple-10",this.colorButon="blue-9"),"ENTREGADO"===this.trip.fields.status&&(this.colorStatus="blue-9",this.colorButon="positive"),"CERRADO"===this.trip.fields.status&&(this.colorStatus="positive")},changeStatus:function(e){var t=this;return l()(a()().mark((function i(){var s,n,o,r,l,c;return a()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.$q.loading.show(),s=t.$route.params.id,n={status:e},"NUEVO"!==t.trip.fields.status){i.next=21;break}if(0!==t.lotData.length){i.next=8;break}return t.$q.dialog({title:"Error",message:"El Embarque debe tener por lo menos un envío.",persistent:!0}),t.$q.loading.hide(),i.abrupt("return",!1);case 8:o=!1,r=null,l=a()().mark((function e(i){return a()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].get("/shipping-details/all/".concat(t.lotData[i].id)).then((function(e){var s=e.data,n=s.products.length;0===n&&(o=!0,r=t.lotData[i].serial)}));case 2:case"end":return e.stop()}}),e)})),c=0;case 12:if(!(c<t.lotData.length)){i.next=17;break}return i.delegateYield(l(c),"t0",14);case 14:c++,i.next=12;break;case 17:if(!o){i.next=21;break}return t.$q.dialog({title:"Error",message:"El Envío "+r+" debe tener por lo menos un producto.",persistent:!0}),t.$q.loading.hide(),i.abrupt("return",!1);case 21:if("ENTREGADO"!==t.trip.fields.status){i.next=26;break}if(0!==t.expensesData.length){i.next=26;break}return t.$q.dialog({title:"Error",message:"El Envío debe tener por lo menos un gasto.",persistent:!0}),t.$q.loading.hide(),i.abrupt("return",!1);case 26:return i.next=28,u["a"].put("/trips/status/".concat(s),n).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(t.fetchFromServer(),t.$q.loading.hide()):t.$q.loading.hide()}));case 28:case"end":return i.stop()}}),i)})))()},uploadFileShipping:function(e){var t=this.lotData.filter((function(t){return Number(t.id)===Number(e)}))[0];this.fileUrl=null!=t.file?this.serverUrl+"assets/shippings/files/"+t.file:null,this.fileShippingId=t.id,this.fileModalShipping=!0,this.fileShippingCode=t.code},afterUploadFile:function(e){this.$q.loading.show();var t=JSON.parse(e.xhr.response);this.$q.notify({message:t.message.content,position:"top",color:t.result?"positive":"warning"}),t.result?(this.$q.loading.hide(),this.getShippings(),this.fileModalShipping=!1):this.$q.loading.hide()},uploadFiles:function(){this.$refs.fileShippingRef.upload()},viewFileShipping:function(e){window.open("".concat(this.serverUrl,"assets/shippings/files/").concat(e.file),"_blank")},uploadFileExpense:function(e){var t=this.expensesData.filter((function(t){return Number(t.id)===Number(e)}))[0];this.fileUrl=null!=t.file?this.serverUrl+"assets/expense/files/"+t.file:null,this.fileExpenseId=t.id,this.fileModalExpense=!0,this.fileExpenseCode=t.code},afterUploadFileExpense:function(e){this.$q.loading.show();var t=JSON.parse(e.xhr.response);this.$q.notify({message:t.message.content,position:"top",color:t.result?"positive":"warning"}),t.result?(this.$q.loading.hide(),this.getGridExpenses(),this.fileModalExpense=!1):this.$q.loading.hide()},uploadFilesExpense:function(){this.$refs.fileShippingRef.upload()},viewFileExpense:function(e){window.open("".concat(this.serverUrl,"assets/expense/files/").concat(e.file),"_blank")},getEstados:function(){var e=this;this.selectEstados=[],u["a"].get("/branch-offices/states").then((function(t){var i=t.data;e.selectEstados=i.options})).catch((function(e){return e}))},getOperators:function(){var e=this;this.selectEstados=[],u["a"].get("/drivers/options").then((function(t){var i=t.data;e.operators=i.options})).catch((function(e){return e}))},getPostalCodes:function(){var e=arguments,t=this;return l()(a()().mark((function i(){var s;return a()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=e.length>0&&void 0!==e[0]?e[0]:"",s=""===s?"0":s,i.next=4,u["a"].get("/branch-offices/postal_codes/".concat(s,"/").concat(t.destination.fields.municipio_id)).then((function(e){var i=e.data;t.postal_codes=i.options})).catch((function(e){return e}));case 4:case"end":return i.stop()}}),i)})))()},getMunicipiosbyEstado:function(e){var t=arguments,i=this;return l()(a()().mark((function s(){var n;return a()().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=t.length>1&&void 0!==t[1]&&t[1],i.destination.fields.postal_code_id=n?null:i.destination.fields.postal_code_id,i.destination.fields.municipio_id=null,i.destination.fields.city_id=null,i.selectMunicipio=[],i.getcities(e),s.next=8,u["a"].get("/branch-offices/municipalities/".concat(e,"/").concat(i.destination.fields.postal_code_id)).then((function(e){var t=e.data;i.selectMunicipio=t.options})).catch((function(e){return e}));case 8:case"end":return s.stop()}}),s)})))()},getcities:function(e){var t=this;return l()(a()().mark((function i(){return a()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.cities=[],i.next=3,u["a"].get("/branch-offices/cities/".concat(e,"/").concat(t.destination.fields.postal_code_id)).then((function(e){var i=e.data;t.cities=i.options})).catch((function(e){return e}));case 3:case"end":return i.stop()}}),i)})))()},getSuburbsByPostalCode:function(e){var t=this;return l()(a()().mark((function i(){return a()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.suburbs=[],t.destination.fields.suburb_id=null,t.destination.fields.municipio_id=null,t.destination.fields.estado_id=null,t.destination.fields.city_id=null,t.selectMunicipio=[],null===e){i.next=19;break}return t.destination.fields.estado_id=t.postal_codes.filter((function(t){return t.value===e}))[0].state_id,t.estadoOptions=t.selectEstados.filter((function(e){return e.value===t.destination.fields.estado_id})),i.next=11,t.getMunicipiosbyEstado(t.destination.fields.estado_id);case 11:return t.destination.fields.municipio_id=t.postal_codes.filter((function(t){return t.value===e}))[0].municipality_id,t.MunicipioOptions=t.selectMunicipio.filter((function(e){return e.value===t.destination.fields.municipio_id})),i.next=15,t.getcities(t.destination.fields.estado_id);case 15:return t.destination.fields.city_id=t.postal_codes.filter((function(t){return t.value===e}))[0].city_id,t.cityOptions=t.cities.filter((function(e){return e.value===t.destination.fields.city_id})),i.next=19,u["a"].get("/branch-offices/suburbs/".concat(e)).then((function(e){var i=e.data;t.suburbs=i.options,t.suburbs_options=i.options})).catch((function(e){return e}));case 19:case"end":return i.stop()}}),i)})))()},filterMunicipio:function(e,t,i){var s=this;t((function(){var t=e.toLowerCase();s.MunicipioOptions=s.selectMunicipio.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},filterEstado:function(e,t,i){var s=this;t((function(){var t=e.toLowerCase();s.estadoOptions=s.selectEstados.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},filterPostalCodes:function(e,t,i){var s=this;t(l()(a()().mark((function t(){var i;return a()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.toLowerCase(),t.next=3,s.getPostalCodes(i);case 3:case"end":return t.stop()}}),t)}))))},filterSuburbs:function(e,t,i){var s=this;t((function(){var t=e.toLowerCase();s.suburbs_options=s.suburbs.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},filterCity:function(e,t,i){var s=this;t((function(){var t=e.toLowerCase();s.cityOptions=s.cities.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},createDestination:function(){var e=this;if(this.$v.destination.fields.$reset(),this.$v.destination.fields.$touch(),this.$v.destination.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=d()({},this.destination.fields);t.date=this.destination.fields.date.split(" ")[0].split("/").reverse().join("-")+" "+this.trip.fields.date.split(" ")[1],t.trip_id=this.$route.params.id,u["a"].post("trip-destination/",t).then((function(t){var i=t.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(e.clearDestinationData(),e.getGridDestination(),e.$q.loading.hide()):e.$q.loading.hide()}))},clearDestinationData:function(){this.destination.fields={id:null,street:null,estado_id:null,municipio_id:null,postal_code_id:null,suburb_id:null,indoor_number:null,outdoor_number:null,municipality:null,state:null,between_street:null,city_id:null,distance:null,date:null},this.editFlag=!1},getGridDestination:function(){var e=this;this.$q.loading.show();var t=this.$route.params.id;u["a"].get("/trip-destination/getbytrip/".concat(Number(t))).then((function(t){var i=t.data;e.destinations=i.destinations,e.$q.loading.hide()}))},editDestination:function(e){var t=this;return l()(a()().mark((function i(){var s,n;return a()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=e.postal_code_id,n=e.suburb_id,t.destination.fields.municipio_id=e.municipality_id,i.next=5,t.getPostalCodes(e.postal_code);case 5:return t.destination.fields.postal_code_id=s,i.next=8,t.getSuburbsByPostalCode(s);case 8:t.destination.fields.id=e.id,t.destination.fields.street=e.street,t.destination.fields.outdoor_number=e.outdoor_number,t.destination.fields.indoor_number=e.indoor_number,t.destination.fields.between_street=e.between_street,t.destination.fields.suburb_id=n,t.destination.fields.distance=e.distance,t.destination.fields.date=e.date,t.editFlag=!0;case 17:case"end":return i.stop()}}),i)})))()},cancelEditDestination:function(){this.editFlag=!1,this.clearDestinationData()},updateDestination:function(){var e=this;if(this.$v.destination.fields.$reset(),this.$v.destination.fields.$touch(),this.$v.destination.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=this.destination.fields.id,i=d()({},this.destination.fields);i.date=this.destination.fields.date.split(" ")[0].split("/").reverse().join("-")+" "+this.trip.fields.date.split(" ")[1],u["a"].put("/trip-destination/".concat(t),i).then((function(t){var i=t.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(e.clearDestinationData(),e.getGridDestination(),e.$q.loading.hide()):e.$q.loading.hide()}))},deleteDestination:function(e){var t=this;this.$q.dialog({title:"Confirmación",message:"¿Desea eliminar este Destino?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk((function(){u["a"].delete("/trip-destination/".concat(e)).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning",icon:i.result?"thumb_up":"close"}),i.result&&(t.getGridDestination(),t.$q.loading.hide())}))})).onCancel((function(){}))},filterOperator:function(e,t,i){var s=this;t((function(){var t=e.toLowerCase();s.operatorOptions=s.operators.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},addOperator:function(){var e=this;if(this.$v.operator_id.$reset(),this.$v.operator_id.$touch(),this.$v.operator_id.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=[];t.operator_id=this.operator_id,t.trip_id=this.$route.params.id,u["a"].post("trips/driver",t).then((function(t){var i=t.data;e.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning"}),i.result?(e.operator_id=null,e.getGridDrivers(),e.$q.loading.hide()):e.$q.loading.hide()}))},getGridDrivers:function(){var e=this;this.$q.loading.show();var t=this.$route.params.id;u["a"].get("/trips/drivers/".concat(Number(t))).then((function(t){var i=t.data;e.operatorsData=i.drivers,e.$q.loading.hide()}))},deleteOperator:function(e){var t=this;this.$q.dialog({title:"Confirmación",message:"¿Desea eliminar este Operador?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk((function(){u["a"].delete("/trips/driver/".concat(e)).then((function(e){var i=e.data;t.$q.notify({message:i.message.content,position:"top",color:i.result?"positive":"warning",icon:i.result?"thumb_up":"close"}),i.result&&(t.getGridDrivers(),t.$q.loading.hide())}))})).onCancel((function(){}))},timbrar:function(){var e=this,t=this.$route.params.id;u["a"].get("/trips/timbrar/".concat(Number(t))).then((function(t){t.data;e.fetchFromServer(),e.$q.loading.hide()}))},revisarTimbrado:function(){var e=this;this.loadingFiscal=!0,u["a"].put("/trips/revisarTimbrado/".concat(this.$route.params.id)).then((function(t){var i=t.data;console.log(i),"done"!==i.response.status&&"error"!==i.response.status&&!0!==i.response.status||e.fetchFromServer()})).catch((function(e){console.error(e)})),this.loadingFiscal=!1},getCFDIInvoice:function(e){var t="http://batuta.beta.antfarm.mx";window.open(t+"/api/download_xml/"+e,"_blank")},getPdfInvoice:function(e,t){var i=this;this.$q.loading.show(),u["a"].fileDownload("/invoices/pdfi/".concat(e)).then((function(e){var s=e.data,n=window.URL.createObjectURL(new Blob([s],{type:"application/pdf"})),o=document.createElement("a");o.href=n,o.setAttribute("download",t),document.body.appendChild(o),i.$q.loading.hide(),o.click()}))},isNumber:function(e,t){switch(t){case"folio_sustituye":this.trip.fields.folio_sustituye=this.trip.fields.folio_sustituye.replace(/[^0-9.]/g,""),this.$v.trip.fields.folio_sustituye.$touch();break;default:break}},cancelarFactura:function(){var e=this;if(this.$v.trip.fields.$reset(),this.$v.trip.fields.$touch(),this.$v.trip.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;var t={};t.motivo_cancelacion=this.trip.fields.motivo_cancelacion,t.folio_sustituye=this.trip.fields.folio_sustituye,this.$q.loading.show(),u["a"].put("/trips/cancelar/".concat(this.$route.params.id),t).then((function(t){var i,s=t.data;(e.$q.loading.hide(),e.cancelarTimbrado=!1,e.trip.fields.motivo_cancelacion="02","error"===s.result)?e.$q.notify({message:s.message.content,caption:null!==(i=s.errors)&&void 0!==i?i:"",multiLine:!0,position:"top",timeout:7e3,color:"error"!==s.result?"positive":"warning"}):e.fetchFromServer()})).catch((function(e){console.error(e)}))}}},g=h,_=i("2877"),x=i("9989"),q=i("ead5"),y=i("079e"),C=i("9c40"),$=i("05c0"),w=i("27f9"),k=i("0016"),E=i("ddd8"),S=i("66e5"),O=i("4074"),D=i("7cbe"),R=i("52ee"),N=i("ca78"),F=i("f09f"),T=i("429b"),A=i("7460"),M=i("adad"),I=i("823b"),P=i("eaac"),U=i("bd08"),G=i("db86"),L=i("24e8"),Y=i("a370"),Q=i("ee89"),z=i("068f"),H=i("4b7e"),B=i("7f67"),V=i("eebe"),j=i.n(V),J=Object(_["a"])(g,s,n,!1,null,null,null);t["default"]=J.exports;j()(J,"components",{QPage:x["a"],QBreadcrumbs:q["a"],QBreadcrumbsEl:y["a"],QBtn:C["a"],QTooltip:$["a"],QInput:w["a"],QIcon:k["a"],QSelect:E["a"],QItem:S["a"],QItemSection:O["a"],QPopupProxy:D["a"],QDate:R["a"],QTime:N["a"],QCard:F["a"],QTabs:T["a"],QTab:A["a"],QTabPanels:M["a"],QTabPanel:I["a"],QTable:P["a"],QTr:U["a"],QTd:G["a"],QDialog:L["a"],QCardSection:Y["a"],QUploader:Q["a"],QImg:z["a"],QCardActions:H["a"]}),j()(J,"directives",{ClosePopup:B["a"]})}}]);
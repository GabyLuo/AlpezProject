(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[50],{"25c5":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-grey-3"},[a("div",{staticClass:"q-pa-sm panel-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[a("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Corte de caja"}})],1)],1)]),a("div",{staticClass:"col-xs-12 col-md-6 q-pr-sm pull-right"},[a("q-btn",{attrs:{color:"positive",icon:"fas fa-file-excel"},on:{click:function(e){return t.generateCsv()}}},[a("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("Descargar CSV")])],1),a("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"red",icon:"fas fa-file-pdf"},on:{click:function(e){return t.closeSales()}}},[a("q-tooltip",[t._v("CORTE DE CAJA")])],1)],1)])]),a("div",{staticClass:"q-pa-md bg-grey-3"},[a("div",{staticClass:"row bg-white border-panel"},[a("div",{staticClass:"col q-pa-md"},[a("div",{staticClass:"row q-col-gutter-xs"},[a("div",{staticClass:"col-md-3"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"YYYY-DD-MM",label:"Buscar por fecha"},model:{value:t.saleDatev1,callback:function(e){t.saleDatev1=e},expression:"saleDatev1"}},[a("q-popup-proxy",{ref:"date",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"col-sm-12"},[a("q-date",{attrs:{mask:"DD/MM/YYYY","today-btn":""},on:{input:function(e){return t.filterGrid()}},model:{value:t.saleDatev1,callback:function(e){t.saleDatev1=e},expression:"saleDatev1"}})],1)])],1)],1),a("div",{staticClass:"col-xs-12 col-sm-12"},[a("q-table",{attrs:{flat:"",bordered:"",data:t.closeSale,columns:t.columns,"row-key":"serial",pagination:t.pagination,filter:t.filter},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"name",staticStyle:{"text-align":"left"},attrs:{props:e}},[t._v(t._s(e.row.name))]),a("q-td",{key:"id",staticStyle:{"text-align":"center"},attrs:{props:e}},[t._v(t._s(e.row.id))]),""!==e.row.name?a("q-td",{key:"folio_fiscal",staticStyle:{"text-align":"center"},attrs:{props:e}},[t._v(t._s(e.row.folio_fiscal))]):a("q-td",{key:"folio_fiscal",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v(t._s(e.row.total))]),(e.row.name,a("q-td",{key:"subtotal",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.subtotal)))])),(e.row.name,a("q-td",{key:"iva",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.iva)))])),""!==e.row.name?a("q-td",{key:"total",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.total)))]):a("q-td",{key:"total",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.neto)))]),""!==e.row.name?a("q-td",{key:"remission",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.remission)))]):a("q-td",{key:"remission",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.countremission)))]),""!==e.row.name?a("q-td",{key:"invoice",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.invoice)))]):a("q-td",{key:"invoice",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.countinvoice)))]),""!==e.row.name?a("q-td",{key:"credit",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s("CREDITO"===e.row.payment_method?t.$formatNumberPrice(e.row.total):t.$formatNumberPrice(0)))]):a("q-td",{key:"credit",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.credit)))]),""!==e.row.name?a("q-td",{key:"counted",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s("CONTADO"===e.row.payment_method?t.$formatNumberPrice(e.row.total):t.$formatNumberPrice(0)))]):a("q-td",{key:"counted",staticStyle:{"text-align":"right"},attrs:{props:e}},[t._v("$ "+t._s(t.$formatNumberPrice(e.row.counted)))])],1)]}}])})],1)])])])])])},l=[],s=a("7ec2"),r=a.n(s),i=a("c973"),n=a.n(i),c=(a("99af"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("aabb")),d={name:"CrmIndex",data:function(){return{saleDatev1:null,closeSale:[],columns:[{name:"name",align:"center",label:"NOMBRE DEL CLIENTE",field:"name",sortable:!1},{name:"id",align:"center",label:"NO. REMISIÓN",field:"id",sortable:!1},{name:"folio_fiscal",align:"center",label:"FISCAL",field:"folio_fiscal",sortable:!1},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!1},{name:"iva",align:"center",label:"IVA",field:"iva",sortable:!1},{name:"total",align:"center",label:"NETO",field:"total",sortable:!1},{name:"remission",align:"center",label:"TICKET",field:"remission",sortable:!1},{name:"invoice",align:"center",label:"FACTURADO",field:"invoice",sortable:!1},{name:"credit",align:"center",label:"CRÉDITO",field:"credit",sortable:!1},{name:"counted",align:"center",label:"CONTADO",field:"counted",sortable:!1}],filter:"",pagination:{page:1,rowsPerPage:25}}},computed:{getDate:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1,o=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),t=o+"-"+a+"-"+e,t}},created:function(){this.fetchFromServer()},methods:{filterGrid:function(){var t=this;console.log(this.saleDatev1);var e=this.$formatDate(this.saleDatev1);this.$q.loading.show(),c["a"].get("/close-sale/getCloseSales/".concat(e)).then((function(e){var a=e.data;a.result&&(t.closeSale=a.closeSale,console.log(t.closeSale))})),this.$q.loading.hide()},generateCsv:function(){var t=this,e="no",a="https://api_alpez.wasp.mx/"+"close-sale/getCsvCloseSales/".concat(null===this.saleDatev1?this.getDate:this.$formatDate(this.saleDatev1),"/").concat(e);this.$q.loading.show(),c["a"].fileDownload(a).then((function(e){var a=e.data,o=window.URL.createObjectURL(new Blob([a],{type:"application/csv"})),l=document.createElement("a");l.href=o,l.setAttribute("download","Cierre"+(null===t.saleDatev1?t.getDate:t.$formatDate(t.saleDatev1))+".csv"),document.body.appendChild(l),t.$q.loading.hide(),l.click()}))},closeSales:function(){var t=this,e="no",a="https://api_alpez.wasp.mx/"+"close-sale/closeSales/".concat(null===this.saleDatev1?this.getDate:this.$formatDate(this.saleDatev1),"/").concat(e);this.$q.loading.show(),c["a"].fileDownload(a).then((function(e){var a=e.data,o=window.URL.createObjectURL(new Blob([a],{type:"application/pdf"})),l=document.createElement("a");l.href=o,l.setAttribute("download","Cierre"+(null===t.saleDatev1?t.getDate:t.$formatDate(t.saleDatev1))+".pdf"),document.body.appendChild(l),t.$q.loading.hide(),l.click()}))},fetchFromServer:function(){var t=this;console.log(this.getDate),this.$q.loading.show(),c["a"].get("/close-sale/getCloseSales/".concat(this.getDate)).then((function(e){var a=e.data;a.result&&(t.closeSale=a.closeSale,console.log(t.closeSale))})),this.$q.loading.hide()},editSelectedRow:function(t){var e=t;this.$router.push("/corte de caja/".concat(e))},deleteSelectedRow:function(t){var e=this;this.$q.dialog({title:"Confirmación",message:"¿Desea eliminar este Corte de caja?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk(n()(r()().mark((function a(){return r()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$q.loading.show(),a.next=3,c["a"].delete("/corte de caja/".concat(t)).then((function(t){var a=t.data;e.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result&&(e.fetchFromServer(),e.$q.loading.hide())}));case 3:case"end":return a.stop()}}),a)})))).onCancel((function(){})),this.$q.loading.hide()}}},m=d,p=a("2877"),u=a("9989"),f=a("ead5"),g=a("079e"),b=a("9c40"),v=a("05c0"),h=a("ddd8"),w=a("7cbe"),y=a("52ee"),q=a("eaac"),D=a("27f9"),$=a("0016"),_=a("bd08"),S=a("db86"),C=a("eebe"),k=a.n(C),x=Object(p["a"])(m,o,l,!1,null,null,null);e["default"]=x.exports;k()(x,"components",{QPage:u["a"],QBreadcrumbs:f["a"],QBreadcrumbsEl:g["a"],QBtn:b["a"],QTooltip:v["a"],QSelect:h["a"],QPopupProxy:w["a"],QDate:y["a"],QTable:q["a"],QInput:D["a"],QIcon:$["a"],QTr:_["a"],QTd:S["a"]})}}]);
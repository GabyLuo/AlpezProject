(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"47a0":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"bg-grey-3"},[e("div",{staticClass:"q-pa-sm panel-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[e("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),e("q-breadcrumbs-el",{attrs:{label:"Forecast"}})],1)],1)])])]),e("Forecast")],1)},i=[],o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 col-sm-6 col-md-3 col-lg-2",attrs:{align:"left"}},[e("q-btn",{attrs:{color:"primary",label:t.bmonth,icon:"navigate_before"},on:{click:t.calendarPrev}})],1),e("div",{staticClass:"col-md-6 col-lg-8",attrs:{align:"center"}},[e("q-btn",{attrs:{color:"primary",label:t.amonth}})],1),e("div",{staticClass:"col-xs-6 col-sm-6 col-md-3 col-lg-2",attrs:{align:"right"}},[e("q-btn",{attrs:{color:"primary",label:t.nmonth,"icon-right":"navigate_next"},on:{click:t.calendarNext}})],1)]),e("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[e("q-calendar",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.mouse.left.right",value:t.handleSwipe,expression:"handleSwipe",modifiers:{mouse:!0,left:!0,right:!0}}],ref:"calendar",staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12",staticStyle:{overflow:"hidden"},attrs:{view:"month",locale:"es","enable-outside-days":"","day-height":110,animated:"","transition-prev":"slide-right","transition-next":"slide-left"},scopedSlots:t._u([{key:"day",fn:function(a){var n=a.timestamp;return[t._l(t.getEvents(n.date),(function(a,n){return[e("q-badge",{key:n,staticClass:"badge",class:a.bgcolor,staticStyle:{"text-align":"right"},on:{click:function(e){return t.showModal(a.date,a.details)}}},[e("label",{staticClass:"ellipsis",staticStyle:{cursor:"pointer"}},[t._v("$ "+t._s(t.formatPrice(a.title)))]),e("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale","content-class":a.bgcolor,"content-style":"font-size: 14px"}},[t._v("PLAZO "+t._s(a.details))])],1)]}))]}}]),model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1),e("q-dialog",{model:{value:t.modal,callback:function(a){t.modal=a},expression:"modal"}},[e("q-card",{staticStyle:{"min-width":"70%","max-height":"90vh"}},[e("div",[e("div",{staticClass:"bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-11 text-h6",staticStyle:{color:"white","padding-top":"5px","padding-bottom":"5px"}},[t._v("   DETALLES CUENTAS POR COBRAR")]),e("div",{staticClass:"col-sm-1 pull-right",staticStyle:{color:"white","padding-top":"5px","padding-bottom":"5px"}},[e("q-btn",{attrs:{color:"white",flat:"",round:"",dense:"",icon:"close"},nativeOn:{click:function(a){return t.closeModal()}}})],1)])])]),e("div",{staticClass:"row q-pa-md q-col-gutter-md"},[e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[e("q-input",{attrs:{color:"white","bg-color":"primary",filled:"",dark:"",disable:"",label:"FECHA"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"calendar_today"}})]},proxy:!0}]),model:{value:t.dateModal,callback:function(a){t.dateModal=a},expression:"dateModal"}})],1),e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[e("q-input",{attrs:{color:"white","bg-color":"primary",filled:"",dark:"",disable:"",label:"PLAZO"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"date_range"}})]},proxy:!0}]),model:{value:t.term,callback:function(a){t.term=a},expression:"term"}})],1),e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-4"},[e("q-input",{attrs:{color:"white","bg-color":"primary",filled:"",disable:"",dark:"",label:"ACUMULADO"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"attach_money"}})]},proxy:!0}]),model:{value:t.total,callback:function(a){t.total=a},expression:"total"}})],1)]),e("q-tabs",{staticClass:"text-grey",attrs:{"inline-label":"",dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},on:{input:t.changeModel},model:{value:t.currentTab,callback:function(a){t.currentTab=a},expression:"currentTab"}},[e("q-tab",{attrs:{name:"client",icon:"person",label:"POR CLIENTE"}}),e("q-tab",{attrs:{name:"rem",icon:"outbox",label:"POR REMISION"}})],1),e("q-tab-panels",{attrs:{animated:""},model:{value:t.currentTab,callback:function(a){t.currentTab=a},expression:"currentTab"}},[e("q-tab-panel",{attrs:{name:"client"}},[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},[e("q-table",{staticStyle:{"max-height":"60vh"},attrs:{color:"primary",data:t.info,columns:t.infoColumnsClient,"row-key":"id",pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"customer_name",staticClass:"pull-left",staticStyle:{"text-left":"center",width:"15%"},attrs:{props:a}},[e("label",[t._v(" "+t._s(a.row.customer_name))])]),e("q-td",{key:"contador",staticStyle:{"text-align":"center",width:"15%"},attrs:{props:a}},[e("label",[t._v(" "+t._s(a.row.contador))])]),e("q-td",{key:"total",staticStyle:{"text-align":"right",width:"15%"},attrs:{props:a}},[e("label",[t._v("$ "+t._s(t.formatPrice(a.row.total)))])]),e("q-td",{key:"paid",staticStyle:{"text-align":"right",width:"15%"},attrs:{props:a}},[e("label",[t._v("$ "+t._s(t.formatPrice(a.row.paid)))])]),e("q-td",{key:"remaining",staticStyle:{"text-align":"right",width:"15%"},attrs:{props:a}},[e("q-badge",{staticClass:"bg-red-14",attrs:{transparent:""}},[e("label",{staticStyle:{"font-size":"13px","font-weight":"bold"}},[t._v("$ "+t._s(t.formatPrice(a.row.remaining)))])])],1)],1)]}}])})],1)])]),e("q-tab-panel",{attrs:{name:"rem"}},[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},[e("q-table",{staticStyle:{"max-height":"60vh",width:"100%"},attrs:{color:"primary",data:t.info,columns:t.infoColumnsRem,"row-key":"id",pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"rem",staticStyle:{"text-align":"center",width:"10%"},attrs:{props:a}},[e("label",[t._v(" "+t._s(a.row.rem))])]),e("q-td",{key:"customer_name",staticClass:"pull-left",staticStyle:{"text-align":"left",width:"25%"},attrs:{props:a}},[e("label",[t._v(" "+t._s(a.row.customer_name))])]),e("q-td",{key:"total",staticStyle:{"text-align":"right",width:"15%"},attrs:{props:a}},[e("label",[t._v("$ "+t._s(t.formatPrice(a.row.total)))])]),e("q-td",{key:"paid",staticStyle:{"text-align":"right",width:"15%"},attrs:{props:a}},[e("label",[t._v("$ "+t._s(t.formatPrice(a.row.paid)))])]),e("q-td",{key:"remaining",staticStyle:{"text-align":"right",width:"15%"},attrs:{props:a}},[e("q-badge",{staticClass:"bg-red-14",attrs:{transparent:""}},[e("label",{staticStyle:{"font-size":"13px","font-weight":"bold"}},[t._v("$ "+t._s(t.formatPrice(a.row.remaining)))])])],1)],1)]}}])})],1)])])],1),e("q-card-actions",{attrs:{align:"right"}},[e("br")])],1)],1)],1)},s=[],l=e("4082"),r=e.n(l),c=e("ded3"),d=e.n(c),m=(e("ac1f"),e("5319"),e("b680"),e("d3b7"),e("25f0"),e("2f62")),h=e("fe7a"),b=e("aabb"),p=e("bd4c"),u=["evt"],g=Date.now(),f=p["b"].formatDate(g,"DD/MM/YYYY"),v=p["b"].formatDate(g,"MMMM"),y=p["b"].addToDate(g,{month:1}),w=p["b"].formatDate(y,"MMMM"),q=p["b"].subtractFromDate(g,{month:1}),x=p["b"].formatDate(q,"MMMM"),C={components:{QCalendar:h["a"]},name:"Forecast",props:{},created:function(){},data:function(){return{date:"",amonth:"",bmonth:"",nmonth:"",month:g,term:null,dateModal:f,total:null,events:[],modal:!1,data:[],info:[],infoColumnsClient:[{name:"customer_name",align:"center",label:"CLIENTE",field:"customer_name",sortable:!0},{name:"contador",align:"center",label:"CANT. REMISIONES",field:"contador",sortable:!0},{name:"total",align:"center",label:"TOTAL",field:"total",sortable:!0},{name:"paid",align:"center",label:"ABONADO",field:"paid",sortable:!0},{name:"remaining",align:"center",label:"RESTANTE",field:"remaining",sortable:!0}],infoColumnsRem:[{name:"rem",align:"center",label:"REM.",field:"rem",sortable:!0},{name:"customer_name",align:"center",label:"CLIENTE",field:"customer_name",sortable:!0},{name:"total",align:"center",label:"TOTAL",field:"total",sortable:!0},{name:"paid",align:"center",label:"ABONADO",field:"paid",sortable:!0},{name:"remaining",align:"center",label:"RESTANTE",field:"remaining",sortable:!0}],infoPagination:{sortBy:"customer_name",descending:!1,rowsPerPage:25},pagination:{sortBy:"id",descending:!1,rowsPerPage:25},currentTab:"client"}},computed:d()({},Object(m["c"])({})),validations:{},mounted:function(){this.loadAll()},methods:d()(d()({formatPrice:function(t){var a=(t/1).toFixed(2).replace(",",".");return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},Object(m["b"])({getDataCalendar:"payments/forecast/dataC"})),{},{loadAll:function(){var t=this;this.$q.loading.show(),this.getDataCalendar().then((function(a){var e=a.data;t.events=e.data,t.$q.loading.hide()})),this.amonth=v,this.bmonth=x,this.nmonth=w},getEvents:function(t){for(var a=[],e=0;e<this.events.length;++e){var n=!1;this.events[e].date===t&&(n||(this.events[e].side=void 0,a.push(this.events[e])))}return a},showModal:function(t,a){this.modal=!0,this.getDataClient(t,a)},getDataClient:function(t,a){var e=this;this.$q.loading.show(),this.term=a,this.date=t;var n=[];n.date=t,n.type=a,b["a"].post("/invoices/getDetailsForecastperClient",n).then((function(t){var a=t.data;e.info=a.data,e.total=a.sm,e.$q.loading.hide()}))},getDataRem:function(t,a){var e=this;this.$q.loading.show(),this.term=a,this.date=t;var n=[];n.date=t,n.type=a,b["a"].post("/invoices/getDetailsForecastperRem",n).then((function(t){var a=t.data;e.info=a.data,e.total=a.sm,e.$q.loading.hide()}))},closeModal:function(){this.modal=!1,this.currentTab="client"},changeModel:function(){this.info=[],"client"===this.currentTab?this.getDataClient(this.date,this.term):"rem"===this.currentTab&&this.getDataRem(this.date,this.term)},calendarNext:function(){this.$refs.calendar.next(),this.month=p["b"].addToDate(this.month,{month:1}),this.amonth=p["b"].formatDate(this.month,"MMMM");var t=p["b"].addToDate(this.month,{month:1});this.nmonth=p["b"].formatDate(t,"MMMM");var a=p["b"].subtractFromDate(this.month,{month:1});this.bmonth=p["b"].formatDate(a,"MMMM")},calendarPrev:function(){this.$refs.calendar.prev(),this.month=p["b"].subtractFromDate(this.month,{month:1}),this.amonth=p["b"].formatDate(this.month,"MMMM");var t=p["b"].subtractFromDate(this.month,{month:1});this.bmonth=p["b"].formatDate(t,"MMMM");var a=p["b"].addToDate(this.month,{month:1});this.nmonth=p["b"].formatDate(a,"MMMM")},handleSwipe:function(t){var a=t.evt,e=r()(t,u);e.duration>=30&&("right"===e.direction?this.calendarPrev():"left"===e.direction&&this.calendarNext()),!1!==a.cancelable&&a.preventDefault(),a.stopPropagation()}})},M=C,_=(e("9554"),e("e1f6"),e("2877")),S=e("9c40"),T=e("58a81"),D=e("05c0"),k=e("24e8"),P=e("f09f"),E=e("27f9"),$=e("0016"),A=e("429b"),O=e("7460"),Q=e("adad"),R=e("823b"),N=e("eaac"),F=e("bd08"),I=e("db86"),B=e("4b7e"),L=e("12c5"),j=e("eebe"),z=e.n(j),Y=Object(_["a"])(M,o,s,!1,null,"3eb13c8f",null),U=Y.exports;z()(Y,"components",{QBtn:S["a"],QBadge:T["a"],QTooltip:D["a"],QDialog:k["a"],QCard:P["a"],QInput:E["a"],QIcon:$["a"],QTabs:A["a"],QTab:O["a"],QTabPanels:Q["a"],QTabPanel:R["a"],QTable:N["a"],QTr:F["a"],QTd:I["a"],QCardActions:B["a"]}),z()(Y,"directives",{TouchSwipe:L["a"]});var J={components:{Forecast:U},name:"IndexTrainings",data:function(){return{pagination:{sortBy:"id",descending:!1,rowsPerPage:25},filter:""}},mounted:function(){this.$q.loading.show(),this.fetchFromServer(),this.$q.loading.hide()},computed:{roleId:function(){var t=this.$store.getters["users/rol"];return parseInt(t)}},beforeRouteEnter:function(t,a,e){e((function(t){var a=t.$store.getters["users/rol"];1===a||3===a||7===a||2===a||20===a||4===a||27===a||17===a||22===a||28===a?e():e("/")}))},methods:{fetchFromServer:function(){}}},Z=J,H=e("9989"),G=e("ead5"),K=e("079e"),V=Object(_["a"])(Z,n,i,!1,null,null,null);a["default"]=V.exports;z()(V,"components",{QPage:H["a"],QBreadcrumbs:G["a"],QBreadcrumbsEl:K["a"]})},"8c75":function(t,a,e){},9554:function(t,a,e){"use strict";e("8c75")}}]);
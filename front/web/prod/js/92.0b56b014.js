(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[92],{3091:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"q-pa-sm panel-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-7"},[a("span",{staticClass:"q-ml-md grey-8 fs28 page-title"},[t._v("Producción por operador")])]),a("div",{staticClass:"col-sm-5 pull-right"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",{attrs:{align:"right"}},[a("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Producción por operador"}})],1)],1)])])]),a("div",{staticClass:"q-pa-md bg-grey-3"},[a("div",{staticClass:"row bg-white border-panel"},[a("div",{staticClass:"col q-pa-md"},[a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-xs-12 col-md-3",staticStyle:{padding:"3px"}},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha inicio"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[a("q-popup-proxy",{ref:"startDateRef",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"col-sm-12"},[a("q-date",{attrs:{"today-btn":""},on:{input:function(){return t.$refs.startDateRef.hide()}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)])],1)],1),a("div",{staticClass:"col-xs-12 col-md-3",staticStyle:{padding:"3px"}},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Fecha fin"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.endingDate,callback:function(e){t.endingDate=e},expression:"endingDate"}},[a("q-popup-proxy",{ref:"endingDateRef",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"col-sm-12"},[a("q-date",{attrs:{"today-btn":""},on:{input:function(){return t.$refs.endingDateRef.hide()}},model:{value:t.endingDate,callback:function(e){t.endingDate=e},expression:"endingDate"}})],1)])],1)],1),a("div",{staticClass:"col-xs-12 col-md-3",staticStyle:{padding:"3px"}},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.filteredOperatorOptions,label:"Operador"},on:{filter:t.filterOperators},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"fa fa-user"}})]},proxy:!0},{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                    Sin resultados\n                  ")])],1)]},proxy:!0}]),model:{value:t.operator,callback:function(e){t.operator=e},expression:"operator"}})],1),a("div",{staticClass:"col-xs-12 col-md-3",staticStyle:{padding:"3px"}},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:[{label:"PRODUCIENDO Y TERMINADO",value:null},{label:"PRODUCIENDO",value:"PRODUCIENDO"},{label:"TERMINADO",value:"TERMINADO"}],label:"Estatus"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"battery_std"}})]},proxy:!0}]),model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]),a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-xs-12 pull-right"},[a("q-btn",{staticStyle:{height:"70%","margin-right":"5px"},attrs:{color:"primary",icon:"fas fa-search",label:"Buscar"},on:{click:function(e){return t.generateOperatorReport()}}}),a("q-btn",{staticStyle:{height:"70%","margin-right":"5px"},attrs:{color:"primary",icon:"fas fa-eraser",label:"Limpiar"},on:{click:function(e){return t.cleanFilters()}}}),a("q-btn",{staticStyle:{height:"70%","margin-right":"5px"},attrs:{color:"positive",icon:"fas fa-file-pdf",label:"PDF"},on:{click:function(e){return t.generatePdfOperatorReport()}}})],1)]),a("br"),a("q-table",{attrs:{flat:"",bordered:"",data:t.data,columns:t.columns,"row-key":"laminate_number",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"laminate_number",staticStyle:{width:"10%"},attrs:{props:e}},[t._v(t._s(e.row.id))]),a("q-td",{key:"scheduled_date",staticStyle:{width:"10%"},attrs:{props:e}},[t._v(t._s(e.row.scheduled_date))]),a("q-td",{key:"operator_name",staticStyle:{"text-align":"left",width:"25%"},attrs:{props:e}},[t._v(t._s(e.row.operator_name))]),a("q-td",{key:"product_name",staticStyle:{"text-align":"left",width:"25%"},attrs:{props:e}},[t._v(t._s(e.row.product_name))]),a("q-td",{key:"qty",staticStyle:{"text-align":"right",width:"15%"},attrs:{props:e}},[t._v(t._s(t.formatPrice(e.row.qty))+" KG.")]),a("q-td",{key:"status",staticStyle:{width:"15%"},attrs:{props:e}},[a("q-chip",{attrs:{square:"",dense:"",color:"PRODUCIENDO"==e.row.status?"secondary":"TERMINADO"==e.row.status?"positive":"blue","text-color":"white"}},[t._v("\n                  "+t._s(e.row.status)+"\n                ")])],1)],1)]}}])})],1)])])])},s=[],n=(a("a9e3"),a("caad"),a("2532"),a("ac1f"),a("5319"),a("b680"),a("d3b7"),a("25f0"),a("4de4"),a("99af"),a("aabb")),l={name:"OperatorReport",data:function(){return{formatter:new Intl.NumberFormat("en-US"),startDate:null,endingDate:null,status:{label:"PRODUCIENDO Y TERMINADO",value:null},operator:{label:"TODOS",value:null},operatorOptions:[],filteredOperatorOptions:[],pagination:{sortBy:"scheduled_date",descending:!0,rowsPerPage:50},columns:[{name:"laminate_number",align:"center",label:"No. laminado",field:"laminate_number",style:"width: 10%",sortable:!0},{name:"scheduled_date",align:"center",label:"Fecha programada",field:"scheduled_date",style:"width: 10%",sortable:!0},{name:"operator_name",align:"center",label:"Operador",field:"operator_name",style:"width: 25%",sortable:!0},{name:"product_name",align:"center",label:"Producto",field:"product_name",style:"width: 25%",sortable:!0},{name:"qty",align:"center",label:"Cantidad",field:"qty",style:"width: 15%",sortable:!0,sort:function(t,e){return Number(t,10)-Number(e,10)}},{name:"status",align:"center",label:"Estatus",field:"status",style:"width: 15%",sortable:!0}],data:[]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(2)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(4)||this.$store.getters["users/roles"].includes(5)||this.$router.push("/")},created:function(){this.fetchFromServer()},methods:{formatPrice:function(t){var e=(t/1).toFixed(1).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},fetchFromServer:function(){var t=this;this.$q.loading.show(),n["a"].get("/operators/options").then((function(e){var a=e.data;t.filteredOperatorOptions=t.operatorOptions=a.options,t.filteredOperatorOptions.unshift({value:null,label:"TODOS"}),t.$q.loading.hide()}))},filterOperators:function(t,e,a){var r=this;e((function(){var e=t.toLowerCase();r.filteredOperatorOptions=r.operatorOptions.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},generateOperatorReport:function(){var t=this;this.$q.loading.show();var e=null,a=null,r=null!=this.operator&&null!=this.operator.value?Number(this.operator.value):null,s=this.status.value;if(this.startDate){e=this.startDate;while(e.includes("/"))e=e.replace("/","-")}if(this.endingDate){a=this.endingDate;while(a.includes("/"))a=a.replace("/","-")}n["a"].get("/laminates/operator/".concat(r,"/").concat(e,"/").concat(a,"/").concat(s)).then((function(e){var a=e.data;a.result?(t.data=a.laminates,t.$q.loading.hide()):t.$q.loading.hide()}))},generatePdfOperatorReport:function(){var t=null,e=null,a=null!=this.operator&&null!=this.operator.value?Number(this.operator.value):null,r=this.status.value;if(this.startDate){t=this.startDate;while(t.includes("/"))t=t.replace("/","-")}if(this.endingDate){e=this.endingDate;while(e.includes("/"))e=e.replace("/","-")}var s="https://api_alpez.wasp.mx/"+"laminates/operator/pdf/".concat(a,"/").concat(t,"/").concat(e,"/").concat(r);window.open(s,"_blank")},cleanFilters:function(){this.startDate=null,this.endingDate=null,this.status={label:"PRODUCIENDO Y TERMINADO",value:null},this.operator={label:"TODOS",value:null},this.data=[]}}},o=l,i=a("2877"),c=a("9989"),d=a("ead5"),u=a("079e"),p=a("ddd8"),f=a("0016"),h=a("7cbe"),m=a("52ee"),b=a("66e5"),g=a("4074"),v=a("9c40"),y=a("eaac"),D=a("bd08"),q=a("db86"),w=a("b047"),O=a("eebe"),_=a.n(O),x=Object(i["a"])(o,r,s,!1,null,null,null);e["default"]=x.exports;_()(x,"components",{QPage:c["a"],QBreadcrumbs:d["a"],QBreadcrumbsEl:u["a"],QSelect:p["a"],QIcon:f["a"],QPopupProxy:h["a"],QDate:m["a"],QItem:b["a"],QItemSection:g["a"],QBtn:v["a"],QTable:y["a"],QTr:D["a"],QTd:q["a"],QChip:w["a"]})}}]);
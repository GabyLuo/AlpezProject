(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{a87e:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",[e("div",{staticClass:"q-pa-sm panel-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-8"},[e("span",{staticClass:"q-ml-md grey-8 fs28 page-title"},[t._v("Traspaso Sucursales "+t._s(t.$route.params.id))])]),e("div",{staticClass:"col-sm-12 col-md-4"},[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{attrs:{align:"right"}},[e("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),e("q-breadcrumbs-el",{attrs:{label:"Traspasos Sucursales",to:"/branch-transfers"}}),e("q-breadcrumbs-el",{attrs:{label:"Editar"}})],1)],1)])])]),e("div",{staticClass:"q-pa-md bg-grey-3"},[e("div",{staticClass:"row bg-white border-panel"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-sm-12 col-md-2 pull-left"},[1==t.branchTrasfer.fields.status?e("q-btn",{staticStyle:{"margin-right":"5px"},attrs:{color:"positive",icon:"fas fa-file-pdf",label:"Ver reporte"},on:{click:function(a){return t.openBranchTransferPdf()}}}):t._e()],1),e("div",{staticClass:"col-sm-12 col-md-2 offset-md-8 pull-right"},[0==t.branchTrasfer.fields.status&&(t.bales.length>0||t.laminates.length>0||t.inBulks.length>0||t.rawMaterials.length>0)?e("q-btn",{staticStyle:{"margin-right":"5px"},attrs:{color:"warning",icon:"fas fa-bolt",label:"Ejecutar"},on:{click:function(a){return t.executeTransfer()}}}):t._e()],1)]),e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.branchOfficeOptions,label:"Sucursal origen",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-store-alt"}})]},proxy:!0}]),model:{value:t.branchTrasfer.fields.originBranchOffice,callback:function(a){t.$set(t.branchTrasfer.fields,"originBranchOffice",a)},expression:"branchTrasfer.fields.originBranchOffice"}})],1),e("div",{staticClass:"col-sm-12 col-md-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.storageOptions,label:"Almacén origen",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}]),model:{value:t.branchTrasfer.fields.originStorage,callback:function(a){t.$set(t.branchTrasfer.fields,"originStorage",a)},expression:"branchTrasfer.fields.originStorage"}})],1),e("div",{staticClass:"col-sm-12 col-md-2"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Estatus",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"battery_full"}})]},proxy:!0}]),model:{value:t.branchTrasfer.fields.statusStr,callback:function(a){t.$set(t.branchTrasfer.fields,"statusStr",a)},expression:"branchTrasfer.fields.statusStr"}})],1),e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.branchOfficeOptions,label:"Sucursal destino",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-store-alt"}})]},proxy:!0}]),model:{value:t.branchTrasfer.fields.destinationBranchOffice,callback:function(a){t.$set(t.branchTrasfer.fields,"destinationBranchOffice",a)},expression:"branchTrasfer.fields.destinationBranchOffice"}})],1),e("div",{staticClass:"col-sm-12 col-md-4"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.filteredDestinationStorage,label:"Almacén destino",disable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-warehouse"}})]},proxy:!0}]),model:{value:t.branchTrasfer.fields.destinationStorage,callback:function(a){t.$set(t.branchTrasfer.fields,"destinationStorage",a)},expression:"branchTrasfer.fields.destinationStorage"}})],1)])])]),e("br"),e("div",{staticClass:"bg-white border-panel"},[e("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},on:{input:t.changeModel},model:{value:t.currentTab,callback:function(a){t.currentTab=a},expression:"currentTab"}},[e("q-tab",{attrs:{name:"bales",disable:t.baleTab,label:"Pacas de producto terminado"}}),e("q-tab",{attrs:{name:"bulk",disable:t.inBulkTab,label:"Fibra Abierta"}}),e("q-tab",{attrs:{name:"laminates",disable:t.lamiTab,label:"Laminados"}}),e("q-tab",{attrs:{name:"rawMaterials",disable:t.rawTab,label:"Materias primas"}})],1),e("q-separator"),e("q-tab-panels",{attrs:{animated:""},model:{value:t.currentTab,callback:function(a){t.currentTab=a},expression:"currentTab"}},[e("q-tab-panel",{attrs:{name:"bales"}},[e("div",{staticStyle:{"font-weight":"normal"}},[0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{"padding-right":"2%"}},[e("div",{staticClass:"col-xs-12 col-sm-4 offset-sm-8 pull-right"},[e("q-btn",{attrs:{color:"primary",icon:"add",label:"Agregar"},on:{click:function(a){return t.addBale()}}})],1)]):t._e(),0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.bale.fields.product.$error,options:t.baleProductOptions,label:"Producto",rules:t.baleProductRules},on:{input:function(a){t.bale.fields.bale=null}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.bale.fields.product,callback:function(a){t.$set(t.bale.fields,"product",a)},expression:"bale.fields.product"}})],1),e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.bale.fields.bale.$error,options:t.filteredBalesOptions,label:"Paca",rules:t.baleBaleRules},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"fas fa-th-large"}})]},proxy:!0}],null,!1,2172036542),model:{value:t.bale.fields.bale,callback:function(a){t.$set(t.bale.fields,"bale",a)},expression:"bale.fields.bale"}})],1)]):t._e(),e("div",{staticClass:"q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("q-table",{attrs:{flat:"",bordered:"",data:t.bales,columns:t.balesColumns,"row-key":"id",pagination:t.pagination,filter:t.filter},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticStyle:{width:"100%"}},[e("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar"},on:{input:function(a){t.filter=a.toUpperCase()}},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}})],1)]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"id",staticStyle:{"text-align":"right",width:"10%"},attrs:{props:a}},[t._v(t._s(a.row.id))]),e("q-td",{key:"product",staticStyle:{"text-align":"left",width:"75%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"qty",staticStyle:{"text-align":"right",width:"10%"},attrs:{props:a}},[t._v(t._s(t.formatPrice(a.row.qty))+" KG")]),0==t.branchTrasfer.fields.status?e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"5%"},attrs:{props:a}},[e("q-btn",{attrs:{color:"primary",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(e){return t.removeBale(a.row.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("Eliminar")])],1)],1):e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"5%"},attrs:{props:a}},[t._v("\n                      -\n                    ")])],1)]}}])})],1)])]),e("q-tab-panel",{attrs:{name:"bulk"}},[e("div",{staticStyle:{"font-weight":"normal"}},[0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{"padding-right":"2%"}},[e("div",{staticClass:"col-xs-12 col-sm-4 offset-sm-8 pull-right"},[e("q-btn",{attrs:{color:"primary",icon:"add",label:"Agregar"},on:{click:function(a){return t.addBulk()}}})],1)]):t._e(),0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.inBulk.fields.product.$error,options:t.inBulkProductsOptions,label:"Producto",rules:t.inBulkProductRules},on:{input:function(a){t.inBulk.fields.qty=null}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.inBulk.fields.product,callback:function(a){t.$set(t.inBulk.fields,"product",a)},expression:"inBulk.fields.product"}})],1),e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cantidad",rules:t.inBulkProductRules,suffix:"/"+t.inBulkAvailableQty},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.inBulk.fields.qty,callback:function(a){t.$set(t.inBulk.fields,"qty",a)},expression:"inBulk.fields.qty"}})],1)]):t._e(),e("div",{staticClass:"q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("q-table",{attrs:{flat:"",bordered:"",data:t.inBulks,columns:t.inbulkColumns,"row-key":"id",pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product",staticStyle:{"text-align":"left",width:"80%"},attrs:{props:a}},[t._v(t._s(a.row.name_product))]),e("q-td",{key:"qty",staticStyle:{"text-align":"right",width:"10%"},attrs:{props:a}},[t._v(t._s(t.formatPrice(a.row.qty))+" KG")]),0==t.branchTrasfer.fields.status?e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"10%"},attrs:{props:a}},[e("q-btn",{attrs:{color:"primary",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(e){return t.removeinBulk(a.row.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("Eliminar")])],1)],1):e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"5%"},attrs:{props:a}},[t._v("\n                      -\n                    ")])],1)]}}])})],1)])]),e("q-tab-panel",{attrs:{name:"laminates"}},[e("div",{staticStyle:{"font-weight":"normal"}},[0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{"padding-right":"2%"}},[e("div",{staticClass:"col-xs-12 col-sm-4 offset-sm-8 pull-right"},[e("q-btn",{attrs:{color:"primary",icon:"add",label:"Agregar"},on:{click:function(a){return t.addLaminate()}}})],1)]):t._e(),0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.laminate.fields.product.$error,options:t.laminateProductOptions,label:"Producto",rules:t.laminateProductRules},on:{input:function(a){t.laminate.fields.qty=null}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.laminate.fields.product,callback:function(a){t.$set(t.laminate.fields,"product",a)},expression:"laminate.fields.product"}})],1),e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cantidad",rules:t.laminateQtyRules,suffix:"/"+t.laminateAvailableQty},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.laminate.fields.qty,callback:function(a){t.$set(t.laminate.fields,"qty",a)},expression:"laminate.fields.qty"}})],1)]):t._e(),e("div",{staticClass:"q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("q-table",{attrs:{flat:"",bordered:"",data:t.laminates,columns:t.laminatesColumns,"row-key":"id",pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product",staticStyle:{"text-align":"left",width:"80%"},attrs:{props:a}},[t._v(t._s(a.row.name_product))]),e("q-td",{key:"qty",staticStyle:{"text-align":"right",width:"10%"},attrs:{props:a}},[t._v(t._s(t.formatPrice(a.row.qty))+" KG")]),0==t.branchTrasfer.fields.status?e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"10%"},attrs:{props:a}},[e("q-btn",{attrs:{color:"primary",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(e){return t.removeLaminate(a.row.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("Eliminar")])],1)],1):e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"5%"},attrs:{props:a}},[t._v("\n                      -\n                    ")])],1)]}}])})],1)])]),e("q-tab-panel",{attrs:{name:"rawMaterials"}},[e("div",{staticStyle:{"font-weight":"normal"}},[0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{"padding-right":"2%"}},[e("div",{staticClass:"col-xs-12 col-sm-4 offset-sm-8 pull-right"},[e("q-btn",{attrs:{color:"primary",icon:"add",label:"Agregar"},on:{click:function(a){return t.addRawMaterial()}}})],1)]):t._e(),0==t.branchTrasfer.fields.status?e("div",{staticClass:"row q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:t.$v.rawMaterial.fields.product.$error,options:t.rawMaterialProductOptions,label:"Producto",rules:t.rawMaterialProductRules},on:{input:function(a){t.rawMaterial.fields.qty=null}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.rawMaterial.fields.product,callback:function(a){t.$set(t.rawMaterial.fields,"product",a)},expression:"rawMaterial.fields.product"}})],1),e("div",{staticClass:"col-sm-12 col-md-6"},[e("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Cantidad",rules:t.rawMaterialQtyRules,suffix:"/"+t.rawMaterialAvailableQty},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"emoji_objects"}})]},proxy:!0}],null,!1,2431477873),model:{value:t.rawMaterial.fields.qty,callback:function(a){t.$set(t.rawMaterial.fields,"qty",a)},expression:"rawMaterial.fields.qty"}})],1)]):t._e(),e("div",{staticClass:"q-col-gutter-xs",staticStyle:{padding:"2%"}},[e("q-table",{attrs:{flat:"",bordered:"",data:t.rawMaterials,columns:t.rawMaterialsColumns,"row-key":"id",pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"product",staticStyle:{"text-align":"left",width:"80%"},attrs:{props:a}},[t._v(t._s(a.row.product_name))]),e("q-td",{key:"qty",staticStyle:{"text-align":"right",width:"10%"},attrs:{props:a}},[t._v(t._s(t.formatPrice(a.row.qty))+" KG")]),0==t.branchTrasfer.fields.status?e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"10%"},attrs:{props:a}},[e("q-btn",{attrs:{color:"primary",icon:"fas fa-trash-alt",flat:"",size:"10px"},nativeOn:{click:function(e){return t.removeRawMaterial(a.row.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("Eliminar")])],1)],1):e("q-td",{key:"actions",staticStyle:{"text-align":"center",width:"5%"},attrs:{props:a}},[t._v("\n                      -\n                    ")])],1)]}}])})],1)])])],1)],1)])])},i=[],n=e("ded3"),s=e.n(n),l=(e("4de4"),e("d3b7"),e("a9e3"),e("159b"),e("caad"),e("99af"),e("ac1f"),e("5319"),e("b680"),e("25f0"),e("aabb")),o=e("b5ae"),c=o.required,d=o.decimal,u={name:"EditBranchTransfer",validations:{branchTrasfer:{fields:{destinationBranchOffice:{required:c},destinationStorage:{required:c}}},bale:{fields:{product:{required:c},bale:{required:c}}},inBulk:{fields:{product:{required:c},qty:{required:c,decimal:d}}},laminate:{fields:{product:{required:c},qty:{required:c,decimal:d}}},rawMaterial:{fields:{product:{required:c},qty:{required:c,decimal:d}}}},data:function(){return{currentTab:null,baleTab:!0,inBulkTab:!0,lamiTab:!0,rawTab:!0,branchTrasfer:{fields:{id:null,originBranchOffice:null,originStorage:null,destinationBranchOffice:null,destinationStorage:null,status:null,statusStr:null,transactionId:null}},branchOfficeOptions:[],storageOptions:[],bale:{fields:{id:null,product:null,bale:null}},inBulk:{fields:{id:null,product:null,qty:null}},laminate:{fields:{id:null,product:null,qty:null}},rawMaterial:{fields:{id:null,product:null,qty:null}},availableBales:[],availableLaminates:[],laminateProductOptions:[],laminateProducts:[],inBulkProducts:[],inBulkProductsOptions:[],rawMaterialProductOptions:[],rawMaterialProducts:[],bales:[],laminates:[],inBulks:[],rawMaterials:[],balesUsed:[],pagination:{rowsPerPage:50},filter:"",balesColumns:[{name:"id",align:"center",label:"Paca",field:"id",style:"width: 10%",sortable:!0},{name:"product",align:"center",label:"Producto",field:"product",style:"width: 75%",sortable:!0},{name:"qty",align:"center",label:"Cantidad",field:"qty",style:"width: 10%",sortable:!0},{name:"actions",align:"center",label:"Acciones",field:"actions",style:"width: 5%",sortable:!1}],laminatesColumns:[{name:"product",align:"center",label:"Producto",field:"product",style:"width: 80%",sortable:!0},{name:"qty",align:"center",label:"Cantidad",field:"qty",style:"width: 10%",sortable:!0},{name:"actions",align:"center",label:"Acciones",field:"actions",style:"width: 10%",sortable:!1}],inbulkColumns:[{name:"product",align:"center",label:"Producto",field:"product",style:"width: 80%",sortable:!0},{name:"qty",align:"center",label:"Cantidad",field:"qty",style:"width: 10%",sortable:!0},{name:"actions",align:"center",label:"Acciones",field:"actions",style:"width: 10%",sortable:!1}],rawMaterialsColumns:[{name:"product",align:"center",label:"Producto",field:"product",style:"width: 80%",sortable:!0},{name:"qty",align:"center",label:"Cantidad",field:"qty",style:"width: 10%",sortable:!0},{name:"actions",align:"center",label:"Acciones",field:"actions",style:"width: 10%",sortable:!1}]}},computed:{filteredDestinationStorage:function(){var t=this;return null==this.branchTrasfer.fields.destinationBranchOffice||isNaN(this.branchTrasfer.fields.destinationBranchOffice.value)?[]:this.storageOptions.filter((function(a){return Number(a.branchOffice)===Number(t.branchTrasfer.fields.destinationBranchOffice.value)&&5!==Number(a.value)}))},baleProductRules:function(t){var a=this;return[function(t){return a.$v.bale.fields.product.required||"El campo Producto es requerido."}]},baleBaleRules:function(t){var a=this;return[function(t){return a.$v.bale.fields.bale.required||"El campo Paca es requerido."}]},laminateProductRules:function(t){var a=this;return[function(t){return a.$v.laminate.fields.product.required||"El campo Producto es requerido."}]},rawMaterialProductRules:function(t){var a=this;return[function(t){return a.$v.rawMaterial.fields.product.required||"El campo Producto es requerido."}]},laminateQtyRules:function(t){var a=this;return[function(t){return a.$v.laminate.fields.qty.required||"El campo Cantidad es requerido."},function(t){return a.$v.laminate.fields.qty.decimal||"El campo Cantidad debe ser numérico."}]},inBulkProductRules:function(t){var a=this;return[function(t){return a.$v.inBulk.fields.qty.required||"El campo Cantidad es requerido."},function(t){return a.$v.inBulk.fields.qty.decimal||"El campo Cantidad debe ser numérico."}]},rawMaterialQtyRules:function(t){var a=this;return[function(t){return a.$v.rawMaterial.fields.qty.required||"El campo Cantidad es requerido."},function(t){return a.$v.rawMaterial.fields.qty.decimal||"El campo Cantidad debe ser numérico."}]},baleProductOptions:function(){var t=[],a=[];return this.availableBales.forEach((function(e){a.includes(Number(e.product_id))||(t.push({value:e.product_id,label:"".concat(e.category_code,"-").concat(e.line_code,"-").concat(e.product_name)}),a.push(Number(e.product_id)))})),t},filteredBalesOptions:function(){var t=this,a=[];if(null!=this.bale.fields.product&&null!=this.bale.fields.product.value){var e=[];this.bales.forEach((function(t){e.push(Number(t.id))}));var r=this.availableBales.filter((function(a){return Number(t.bale.fields.product.value)===Number(a.product_id)}));r.forEach((function(t){e.includes(Number(t.bale_id))||a.push({value:t.bale_id,label:"PACA ".concat(t.bale_id," (").concat(t.stock," KG.)")})}))}return a},laminateAvailableQty:function(){var t=this,a=0;return null==this.laminate.fields.product||isNaN(this.laminate.fields.product.value)||(a=this.laminateProducts.filter((function(a){return Number(a.product_id)===Number(t.laminate.fields.product.value)}))[0].stock),a},inBulkAvailableQty:function(){var t=this,a=0;return null==this.inBulk.fields.product||isNaN(this.inBulk.fields.product.value)||(a=this.inBulkProducts.filter((function(a){return Number(a.product_id)===Number(t.inBulk.fields.product.value)}))[0].stock),a},rawMaterialAvailableQty:function(){var t=this,a=0;return null==this.rawMaterial.fields.product||isNaN(this.rawMaterial.fields.product.value)||(a=this.rawMaterialProducts.filter((function(a){return Number(a.product_id)===Number(t.rawMaterial.fields.product.value)}))[0].stock),a}},created:function(){this.fetchFromServer()},methods:{formatPrice:function(t){var a=(t/1).toFixed(1).replace(".",",");return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},fetchFromServer:function(){var t=this;this.$q.loading.show();var a=this.$route.params.id;l["a"].get("/branch-transfers/".concat(a)).then((function(a){var e=a.data;e.branchTransfer||t.$router.push("/branch-transfers"),t.branchTrasfer.fields.id=e.branchTransfer.id,t.branchTrasfer.fields.originBranchOffice={value:e.branchTransfer.origin_branch_office_id,label:e.branchTransfer.origin_branch_office_name},t.branchTrasfer.fields.originStorage={value:e.branchTransfer.origin_storage_id,label:e.branchTransfer.origin_storage_name},t.branchTrasfer.fields.destinationBranchOffice={value:e.branchTransfer.destination_branch_office_id,label:e.branchTransfer.destination_branch_office_name},t.branchTrasfer.fields.destinationStorage={value:e.branchTransfer.destination_storage_id,label:e.branchTransfer.destination_storage_name},t.branchTrasfer.fields.status=e.branchTransfer.status,t.branchTrasfer.fields.statusStr=0===Number(e.branchTransfer.status)?"NO EJECUTADO":"EJECUTADO",t.branchTrasfer.fields.transactionId=Number(e.branchTransfer.transaction_id);var r=e.branchTransfer.origin_storage_id;19!==r&&21!==r&&25!==r||(t.currentTab="laminates",t.lamiTab=!1),18!==r&&24!==r&&27!==r||(t.currentTab="bulk",t.inBulkTab=!1),4!==r&&5!==r&&22!==r||(t.currentTab="bales",t.baleTab=!1),2!==r&&6!==r&&7!==r&&20!==r&&23!==r&&26!==r||(t.currentTab="rawMaterials",t.rawTab=!1),l["a"].get("/laminates/transaction/".concat(t.branchTrasfer.fields.transactionId)).then((function(a){var e=a.data;t.laminates=e.laminates,l["a"].get("/branch-transfer-details/branch-transfer/".concat(t.branchTrasfer.fields.transactionId,"/inBulk-transaction")).then((function(a){var e=a.data;t.inBulks=e.inbulks})),l["a"].get("/bales/transaction/".concat(t.branchTrasfer.fields.transactionId)).then((function(a){var e=a.data;t.bales=e.bales,t.balesUsed=[],e.bales.forEach((function(a){t.balesUsed.push(Number(a.id))})),l["a"].get("/branch-transfer-details/branch-transfer/".concat(t.branchTrasfer.fields.transactionId,"/raw-materials")).then((function(a){var e=a.data;t.rawMaterials=e.rawMaterials,t.$q.loading.hide()})),t.get_data()}))}))}))},openBranchTransferPdf:function(){var t="https://api_alpez.wasp.mx/"+"branch-transfers/pdf/".concat(this.$route.params.id);window.open(t,"_blank")},executeTransfer:function(){var t=this;this.$q.loading.show(),l["a"].put("/transactions/execute/".concat(this.branchTrasfer.fields.transactionId)).then((function(a){var e=a.data;t.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(t.$q.loading.hide(),t.fetchFromServer())}))},changeModel:function(t){var a=this;0===Number(this.branchTrasfer.fields.status)&&(this.$q.loading.show(),"bales"===t?l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/bales")).then((function(t){var e=t.data;a.availableBales=e.bales,a.$q.loading.hide()})):"bulk"===t?l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/bulk-products")).then((function(t){var e=t.data;a.inBulkProducts=[],a.inBulkProductsOptions=[],e.products.forEach((function(t){var e=a.inBulks.filter((function(a){return Number(a.product_id)===Number(t.product_id)}));e.forEach((function(a){t.stock-=a.qty})),a.inBulkProducts.push(t),a.inBulkProductsOptions.push({value:t.product_id,label:"".concat(t.category_code,"-").concat(t.line_code,"-").concat(t.product_name)})})),a.$q.loading.hide()})):"laminates"===t?l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/laminates")).then((function(t){var e=t.data;a.laminateProducts=[],a.laminateProductOptions=[],e.products.forEach((function(t){var e=a.laminates.filter((function(a){return Number(a.product_id)===Number(t.product_id)}));e.forEach((function(a){t.stock-=a.qty})),a.laminateProducts.push(t),a.laminateProductOptions.push({value:t.product_id,label:"".concat(t.category_code,"-").concat(t.line_code,"-").concat(t.product_name)})})),a.$q.loading.hide()})):"rawMaterials"===t&&l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/raw-materials")).then((function(t){var e=t.data;a.rawMaterialProducts=[],a.rawMaterialProductOptions=[],e.products.forEach((function(t){var e=a.rawMaterials.filter((function(a){return Number(a.product_id)===Number(t.product_id)}));e.forEach((function(a){t.stock-=a.qty})),a.rawMaterialProducts.push(t),a.rawMaterialProductOptions.push({value:t.product_id,label:"".concat(t.category_code,"-").concat(t.line_code,"-").concat(t.product_name)})})),a.$q.loading.hide()})))},get_data:function(){var t=this;l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/bales")).then((function(a){var e=a.data;t.availableBales=e.bales,t.$q.loading.hide()})),l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/bulk-products")).then((function(a){var e=a.data;t.inBulkProducts=[],t.inBulkProductOptions=[],e.products.forEach((function(a){var e=t.inBulks.filter((function(t){return Number(t.product_id)===Number(a.product_id)}));e.forEach((function(t){a.stock-=t.qty})),t.inBulkProducts.push(a),t.inBulkProductOptions.push({value:a.product_id,label:"".concat(a.category_code,"-").concat(a.line_code,"-").concat(a.product_name)})})),t.$q.loading.hide()})),l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/laminates")).then((function(a){var e=a.data;t.laminateProducts=[],t.laminateProductOptions=[],e.products.forEach((function(a){var e=t.laminates.filter((function(t){return Number(t.product_id)===Number(a.product_id)}));e.forEach((function(t){a.stock-=t.qty})),t.laminateProducts.push(a),t.laminateProductOptions.push({value:a.product_id,label:"".concat(a.category_code,"-").concat(a.line_code,"-").concat(a.product_name)})})),t.$q.loading.hide()})),l["a"].get("/storages/".concat(this.branchTrasfer.fields.originStorage.value,"/raw-materials")).then((function(a){var e=a.data;t.rawMaterialProducts=[],t.rawMaterialProductOptions=[],e.products.forEach((function(a){var e=t.rawMaterials.filter((function(t){return Number(t.product_id)===Number(a.product_id)}));e.forEach((function(t){a.stock-=t.qty})),t.rawMaterialProducts.push(a),t.rawMaterialProductOptions.push({value:a.product_id,label:"".concat(a.category_code,"-").concat(a.line_code,"-").concat(a.product_name)})})),t.$q.loading.hide()}))},addBale:function(){var t=this;if(this.$v.bale.fields.$reset(),this.$v.bale.fields.$touch(),this.$v.bale.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var a=[];a.branchTransferId=Number(this.$route.params.id),a.baleId=Number(s()({},this.bale.fields).bale.value),l["a"].post("/branch-transfer-details",a).then((function(a){var e=a.data;t.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result?(t.bale.fields.id=null,t.bale.fields.product=null,t.bale.fields.bale=null,t.$q.loading.hide(),t.fetchFromServer()):t.$q.loading.hide()}))},addLaminate:function(){var t=this;if(this.$v.laminate.fields.$reset(),this.$v.laminate.fields.$touch(),this.$v.laminate.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var a=[];a.branchTransferId=Number(this.$route.params.id),a.productId=Number(s()({},this.laminate.fields).product.value),a.qty=Number(s()({},this.laminate.fields).qty),this.laminate.fields.id=null,this.laminate.fields.product=null,this.laminate.fields.qty=null,l["a"].post("/branch-transfer-details",a).then((function(a){var e=a.data;t.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result?(t.$q.loading.hide(),t.fetchFromServer()):t.$q.loading.hide()}))},addBulk:function(){var t=this;if(this.$v.inBulk.fields.$reset(),this.$v.inBulk.fields.$touch(),this.$v.inBulk.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var a=[];a.branchTransferId=Number(this.$route.params.id),a.productId=Number(s()({},this.inBulk.fields).product.value),a.qty=Number(s()({},this.inBulk.fields).qty),this.inBulk.fields.id=null,this.inBulk.fields.product=null,this.inBulk.fields.qty=null,l["a"].post("/branch-transfer-details",a).then((function(a){var e=a.data;t.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result?(t.$q.loading.hide(),t.fetchFromServer()):t.$q.loading.hide()}))},addRawMaterial:function(){var t=this;if(this.$v.rawMaterial.fields.$reset(),this.$v.rawMaterial.fields.$touch(),this.$v.rawMaterial.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var a=[];a.branchTransferId=Number(this.$route.params.id),a.productId=Number(s()({},this.rawMaterial.fields).product.value),a.qty=Number(s()({},this.rawMaterial.fields).qty),this.rawMaterial.fields.id=null,this.rawMaterial.fields.product=null,this.rawMaterial.fields.qty=null,l["a"].post("/branch-transfer-details",a).then((function(a){var e=a.data;t.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result?(t.$q.loading.hide(),t.fetchFromServer()):t.$q.loading.hide()}))},removeBale:function(t){var a=this;this.$q.loading.show(),l["a"].delete("/branch-transfer-details/branch-transfer/".concat(this.$route.params.id,"/bale/").concat(t)).then((function(t){var e=t.data;a.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(a.$q.loading.hide(),a.fetchFromServer())}))},removeLaminate:function(t){var a=this;this.$q.loading.show(),l["a"].delete("/branch-transfer-details/branch-transfer/".concat(this.$route.params.id,"/laminate/").concat(t)).then((function(t){var e=t.data;a.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(a.$q.loading.hide(),a.fetchFromServer())}))},removeinBulk:function(t){var a=this;this.$q.loading.show(),l["a"].delete("/branch-transfer-details/branch-transfer/".concat(this.$route.params.id,"/inbulk/").concat(t)).then((function(t){var e=t.data;a.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(a.$q.loading.hide(),a.fetchFromServer())}))},removeRawMaterial:function(t){var a=this;this.$q.loading.show(),l["a"].delete("/branch-transfer-details/branch-transfer/".concat(this.$route.params.id,"/raw-material/").concat(t)).then((function(t){var e=t.data;a.$q.notify({message:e.message.content,position:"top",color:e.result?"positive":"warning"}),e.result&&(a.$q.loading.hide(),a.fetchFromServer())}))}}},f=u,p=e("2877"),b=e("9989"),h=e("ead5"),m=e("079e"),g=e("9c40"),v=e("ddd8"),q=e("0016"),y=e("27f9"),w=e("429b"),k=e("7460"),_=e("eb85"),$=e("adad"),T=e("823b"),S=e("eaac"),B=e("bd08"),x=e("db86"),P=e("05c0"),C=e("eebe"),M=e.n(C),O=Object(p["a"])(f,r,i,!1,null,null,null);a["default"]=O.exports;M()(O,"components",{QPage:b["a"],QBreadcrumbs:h["a"],QBreadcrumbsEl:m["a"],QBtn:g["a"],QSelect:v["a"],QIcon:q["a"],QInput:y["a"],QTabs:w["a"],QTab:k["a"],QSeparator:_["a"],QTabPanels:$["a"],QTabPanel:T["a"],QTable:S["a"],QTr:B["a"],QTd:x["a"],QTooltip:P["a"]})}}]);
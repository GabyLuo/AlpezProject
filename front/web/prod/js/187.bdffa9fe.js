(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[187],{b531:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"bg-grey-3"},[o("div",{staticClass:"q-pa-sm panel-header"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-9"},[o("div",{staticClass:"q-pa-md q-gutter-sm"},[o("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[o("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),o("q-breadcrumbs-el",{attrs:{label:"Movimientos",to:"/trade-movements"}}),o("q-breadcrumbs-el",{attrs:{label:"Nuevo Movimiento"}})],1)],1)])])]),o("div",{staticClass:"q-pa-md bg-grey-3"},[o("div",{staticClass:"row bg-white border-panel"},[o("div",{staticClass:"col q-pa-md"},[o("div",{staticClass:"row q-mb-sm"}),o("div",{staticClass:"row q-col-gutter-xs"},[o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.accountOptions,label:"Cuenta",rules:e.accountRules,error:e.$v.movement.fields.account_id.$error},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-building"}})]},proxy:!0}]),model:{value:e.movement.fields.account_id,callback:function(t){e.$set(e.movement.fields,"account_id",t)},expression:"movement.fields.account_id"}})],1),o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.outputOptions,label:"Rubro",rules:e.outputRules,error:e.$v.movement.fields.output_id.$error},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-building"}})]},proxy:!0}]),model:{value:e.movement.fields.output_id,callback:function(t){e.$set(e.movement.fields,"output_id",t)},expression:"movement.fields.output_id"}})],1),o("div",{staticClass:"col-xs-12 col-sm-2"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.movementOptions,label:"Movimiento",rules:e.movementRules,error:e.$v.movement.fields.movement_type.$error},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-building"}})]},proxy:!0}]),model:{value:e.movement.fields.movement_type,callback:function(t){e.$set(e.movement.fields,"movement_type",t)},expression:"movement.fields.movement_type"}})],1),o("div",{staticClass:"col-xs-12 col-sm-2"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Importe",rules:e.amountRules,error:e.$v.movement.fields.amount.$error},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.movement.fields.amount,callback:function(t){e.$set(e.movement.fields,"amount",t)},expression:"movement.fields.amount"}})],1),o("div",{staticClass:"col-xs-12 col-sm-2 text-center"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:e.dateRules,error:e.$v.movement.fields.date.$error,mask:"date",label:"Fecha"},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.movement.fields.date,callback:function(t){e.$set(e.movement.fields,"date",t)},expression:"movement.fields.date"}},[o("q-popup-proxy",{ref:"date_ref",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("div",{staticClass:"col-sm-12"},[o("q-date",{attrs:{color:"secondary","text-color":"white",mask:"DD/MM/YYYY","today-btn":""},on:{input:function(){return e.$refs.date_ref.hide()}},model:{value:e.movement.fields.date,callback:function(t){e.$set(e.movement.fields,"date",t)},expression:"movement.fields.date"}})],1)])],1)],1),o("div",{staticClass:"col-xs-12 col-sm-12"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",label:"Descripción"},on:{input:function(t){e.movement.fields.description=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.movement.fields.description,callback:function(t){e.$set(e.movement.fields,"description",t)},expression:"movement.fields.description"}})],1)]),o("div",{staticClass:"row q-mb-sm q-mt-md"},[o("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},[o("q-btn",{attrs:{color:"positive",icon:"save",label:"Guardar"},on:{click:function(t){return e.createCategory()}}})],1)])])])])])},n=[],i=o("ded3"),r=o.n(i),a=(o("a4d3"),o("e01a"),o("caad"),o("2532"),o("aabb")),l=o("b5ae"),u=l.required,d=l.decimal,c={name:"NewCategory",validations:{movement:{fields:{account_id:{required:u},output_id:{required:u},movement_type:{required:u},amount:{required:u,decimal:d},date:{required:u}}}},data:function(){return{movement:{fields:{account_id:null,output_id:null,movement_type:null,amount:null,date:null,description:null}},accountOptions:[],outputOptions:[],movementOptions:[{value:"CARGO",label:"CARGO"},{value:"ABONO",label:"ABONO"}]}},computed:{accountRules:function(e){var t=this;return[function(e){return t.$v.movement.fields.account_id.required||"El campo Cuenta es requerido."}]},outputRules:function(e){var t=this;return[function(e){return t.$v.movement.fields.output_id.required||"El campo Rubro es requerido."}]},movementRules:function(e){var t=this;return[function(e){return t.$v.movement.fields.movement_type.required||"El campo Movimiento es requerido."}]},amountRules:function(e){var t=this;return[function(e){return t.$v.movement.fields.amount.required||"El campo Importe es requerido."},function(e){return t.$v.movement.fields.amount.decimal||"El campo Importe es numerico."}]},dateRules:function(e){var t=this;return[function(e){return t.$v.movement.fields.date.required||"El campo Fecha es requerido."}]},descriptionRules:function(e){var t=this;return[function(e){return t.$v.movement.fields.description.required||"El campo Descripción es requerido."}]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(2)||this.$store.getters["users/roles"].includes(24)||this.$router.push("/")},mounted:function(){this.$q.loading.show(),this.getAccount(),this.getOutputs(),this.$q.loading.hide()},methods:{createCategory:function(){var e=this;if(this.$v.movement.fields.$reset(),this.$v.movement.fields.$touch(),this.$v.movement.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=r()({},this.movement.fields);t.account_id=this.movement.fields.account_id.value,t.output_id=this.movement.fields.output_id.value,t.movement_type=this.movement.fields.movement_type.value,t.date=this.movement.fields.date.substr(6,4)+"-"+this.movement.fields.date.substr(3,2)+"-"+this.movement.fields.date.substr(0,2),a["a"].post("/movement-trade",t).then((function(t){var o=t.data;e.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?(e.$q.loading.hide(),e.$router.push("/trade-movements")):e.$q.loading.hide()}))},getAccount:function(){var e=this;this.$q.loading.show(),a["a"].get("/account-trade/options").then((function(t){var o=t.data;e.accountOptions=o.options,e.$q.loading.hide()}))},getOutputs:function(){var e=this;this.$q.loading.show(),a["a"].get("/output_type/options").then((function(t){var o=t.data;e.outputOptions=o.options,e.$q.loading.hide()}))}}},m=c,v=o("2877"),p=o("9989"),f=o("ead5"),b=o("079e"),h=o("ddd8"),q=o("0016"),g=o("27f9"),$=o("7cbe"),y=o("52ee"),_=o("9c40"),C=o("eebe"),x=o.n(C),k=Object(v["a"])(m,s,n,!1,null,null,null);t["default"]=k.exports;x()(k,"components",{QPage:p["a"],QBreadcrumbs:f["a"],QBreadcrumbsEl:b["a"],QSelect:h["a"],QIcon:q["a"],QInput:g["a"],QPopupProxy:$["a"],QDate:y["a"],QBtn:_["a"]})}}]);
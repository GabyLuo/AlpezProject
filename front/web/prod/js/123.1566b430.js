(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[123],{"608a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-grey-3"},[a("div",{staticClass:"q-pa-sm panel-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[a("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Compras proveedor"}})],1)],1)]),a("div",{staticClass:"col-xs-12 col-md-6  pull-right"},[a("div",{staticClass:"q-pa-sm q-gutter-sm"},[a("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"green",icon:"fas fa-file-excel"},on:{click:function(e){return t.generateCSV()}}},[a("q-tooltip",[t._v("GENERAR CSV")])],1),a("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"red",icon:"fas fa-file-pdf"},on:{click:function(e){return t.generatePDF()}}},[a("q-tooltip",[t._v("GENERAR PDF")])],1)],1)])])]),a("div",{staticClass:"q-pa-md bg-grey-3"},[a("div",{staticClass:"row bg-white border-panel"},[a("div",{staticClass:"col q-pa-md"},[a("div",{staticClass:"row bg-white q-pb-md q-col-gutter-xs q-col-gutter-md"},[a("div",{staticClass:"col-sm-2"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"dd/mm/Y",label:"Desde"},model:{value:t.saleDatev1,callback:function(e){t.saleDatev1=e},expression:"saleDatev1"}},[a("q-popup-proxy",{ref:"date",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"col-sm-12"},[a("q-date",{attrs:{"today-btn":""},on:{input:function(e){return t.fetchFromServer()}},model:{value:t.saleDatev1,callback:function(e){t.saleDatev1=e},expression:"saleDatev1"}})],1)])],1)],1),a("div",{staticClass:"col-md-2"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",mask:"date",label:"Hasta"},model:{value:t.saleDatev2,callback:function(e){t.saleDatev2=e},expression:"saleDatev2"}},[a("q-popup-proxy",{ref:"date",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"col-sm-12"},[a("q-date",{attrs:{"today-btn":""},on:{input:function(e){return t.fetchFromServer()}},model:{value:t.saleDatev2,callback:function(e){t.saleDatev2=e},expression:"saleDatev2"}})],1)])],1)],1),a("div",{staticClass:"col-md-2"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.filteredProductOptions,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Producto","emit-value":"","map-options":""},on:{filter:t.filtrarProduct,input:function(e){return t.fetchFromServer()}},model:{value:t.product,callback:function(e){t.product=e},expression:"product"}})],1),a("div",{staticClass:"col-md-2"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:t.filteredSupplierOptions,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Proveedor","emit-value":"","map-options":""},on:{filter:t.filtrarSupplier,input:function(e){return t.fetchFromServer()}},model:{value:t.supplier,callback:function(e){t.supplier=e},expression:"supplier"}})],1)]),a("div",{staticClass:"row q-col-gutter-xs"},[a("div",{staticClass:"col-xs-12 col-sm-12"},[a("q-table",{attrs:{flat:"",bordered:"",data:t.dataShopping,columns:t.columns,"row-key":"serial",pagination:t.pagination,filter:t.filter},on:{"update:pagination":function(e){t.pagination=e},request:t.qTableRequest},scopedSlots:t._u([{key:"top",fn:function(){return[a("div",{staticStyle:{width:"100%"}},[a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar"},on:{input:function(e){t.filter=e.toUpperCase()}},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"serial",staticStyle:{"text-align":"center",width:"10%"},attrs:{props:e}},[t._v(t._s(e.row.serial))]),a("q-td",{key:"supplier",staticStyle:{"text-align":"left",width:"20%"},attrs:{props:e}},[t._v(t._s(e.row.supplier))]),a("q-td",{key:"product",staticStyle:{"text-align":"left",width:"20%"},attrs:{props:e}},[t._v(t._s(e.row.product))]),a("q-td",{key:"description",staticStyle:{"text-align":"left",width:"75%"},attrs:{props:e}},[t._v(t._s(e.row.description))]),a("q-td",{key:"receive_date",staticStyle:{"text-align":"center",width:"10%"},attrs:{props:e}},[t._v(t._s(e.row.receive_date))]),a("q-td",{key:"qty",staticStyle:{"text-align":"right",width:"5%"},attrs:{props:e}},[t._v(t._s(e.row.qty))]),a("q-td",{key:"price_unit",staticStyle:{"text-align":"right",width:"5%"},attrs:{props:e}},[t._v(t._s(e.row.price_unit))]),a("q-td",{key:"total",staticStyle:{"text-align":"right",width:"5%"},attrs:{props:e}},[t._v(t._s(e.row.total))])],1)]}}])})],1)])])])])])},i=[],s=a("7ec2"),n=a.n(s),l=a("c973"),o=a.n(l),c=(a("4de4"),a("d3b7"),a("99af"),a("aabb")),p={name:"CrmIndex",data:function(){return{supplier:"TODOS",filteredSupplierOptions:[],supplierOptions:[],saleDatev2:null,saleDatev1:null,dataShopping:[],product:"TODOS",filteredProductOptions:[],productsOptions:[],columns:[{name:"serial",align:"center",label:"ORDEN COMPRA",field:"serial",sortable:!1,style:"width: 10%"},{name:"supplier",align:"center",label:"PROVEEDOR",field:"supplier",sortable:!1,style:"width: 20%"},{name:"product",align:"center",label:"PRODUCTO",field:"product",sortable:!1,style:"width: 20%"},{name:"description",align:"center",label:"DESCRIPCIÓN",field:"description",sortable:!1,style:"width: 25%"},{name:"receive_date",align:"center",label:"FECHA ENTRADA",field:"receive_date",sortable:!1,style:"width: 10%"},{name:"qty",align:"center",label:"CANTIDAD",field:"qty",sortable:!1,style:"width: 5%"},{name:"price_unit",align:"center",label:"PRECIO UNITARIO",field:"price_unit",sortable:!1,style:"width: 5%"},{name:"total",align:"center",label:"TOTAL",field:"total",sortable:!1,style:"width: 5%"}],filter:"",pagination:{page:1,rowsPerPage:25}}},mounted:function(){this.getSuppliers(),this.getProduct(),this.fetchFromServer()},methods:{filtrarProduct:function(t,e,a){var r=this;e((function(){var e=t.toLowerCase();r.filteredProductOptions=r.productsOptions.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},getProduct:function(){var t=this;return o()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("purchase-order-details/getProducts").then((function(e){var a=e.data;a.result&&(t.productsOptions=a.products,t.productsOptions.unshift({label:"TODOS",value:"TODOS"}))}));case 2:case"end":return e.stop()}}),e)})))()},generateCSV:function(){var t=null!==this.saleDatev1?this.$formatDate(this.saleDatev1):null,e=null!==this.saleDatev2?this.$formatDate(this.saleDatev2):null,a=this.supplier,r=this.product,i="https://api_alpez.wasp.mx/"+"purchase-order-details/getReportShoppingToCSV/".concat(t,"/").concat(e,"/").concat(a,"/").concat(r);window.open(i,"_blank")},generatePDF:function(){var t=null!==this.saleDatev1?this.$formatDate(this.saleDatev1):null,e=null!==this.saleDatev2?this.$formatDate(this.saleDatev2):null,a=this.supplier,r=this.product,i="https://api_alpez.wasp.mx/"+"purchase-order-details/getReportShoppingToPDF/".concat(t,"/").concat(e,"/").concat(a,"/").concat(r);window.open(i,"_blank")},getSuppliers:function(){var t=this;return o()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/suppliers/getSuppliersToReportSales").then((function(e){var a=e.data;a.result&&(t.supplierOptions=a.suppliers,t.supplierOptions.unshift({label:"TODOS",value:"TODOS"}))}));case 2:case"end":return e.stop()}}),e)})))()},filtrarSupplier:function(t,e,a){var r=this;e((function(){var e=t.toLowerCase();r.filteredSupplierOptions=r.supplierOptions.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}))},qTableRequest:function(t){var e=this;return o()(n()().mark((function a(){var r;return n()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$q.loading.show(),r=[],r.pagination=t.pagination,r.filter=t.filter,r.dataini=e.saleDatev1,r.datafin=e.saleDatev2,r.supplier=e.supplier,r.product=e.product,a.next=10,c["a"].post("/purchase-order-details/getReportShopping",r).then((function(t){var a=t.data;a.result&&(e.dataShopping=a.shopping)}));case 10:e.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},fetchFromServer:function(){var t=this;return o()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.qTableRequest({pagination:t.pagination,filter:t.filter});case 1:case"end":return e.stop()}}),e)})))()},editSelectedRow:function(t){var e=t;this.$router.push("/compras/".concat(e))},deleteSelectedRow:function(t){var e=this;this.$q.dialog({title:"Confirmación",message:"¿Desea eliminar este COMPRAS?",persistent:!0,ok:{label:"Aceptar",color:"green"},cancel:{label:"Cancelar",color:"red"}}).onOk(o()(n()().mark((function a(){return n()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$q.loading.show(),a.next=3,c["a"].delete("/compras/".concat(t)).then((function(t){var a=t.data;e.$q.notify({message:a.message.content,position:"top",color:a.result?"positive":"warning"}),a.result&&(e.fetchFromServer(),e.$q.loading.hide())}));case 3:case"end":return a.stop()}}),a)})))).onCancel((function(){})),this.$q.loading.hide()}}},u=p,d=a("2877"),f=a("9989"),h=a("ead5"),v=a("079e"),g=a("9c40"),m=a("05c0"),b=a("ddd8"),w=a("7cbe"),q=a("52ee"),y=a("eaac"),S=a("27f9"),D=a("0016"),x=a("bd08"),C=a("db86"),O=a("eebe"),k=a.n(O),_=Object(d["a"])(u,r,i,!1,null,null,null);e["default"]=_.exports;k()(_,"components",{QPage:f["a"],QBreadcrumbs:h["a"],QBreadcrumbsEl:v["a"],QBtn:g["a"],QTooltip:m["a"],QSelect:b["a"],QPopupProxy:w["a"],QDate:q["a"],QTable:y["a"],QInput:S["a"],QIcon:D["a"],QTr:x["a"],QTd:C["a"]})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"21de":function(e,t,a){},9207:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"q-pa-md panel-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[a("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Últimas compras"}})],1)],1)]),a("div",{staticClass:"col-sm-4 q-pa-md q-gutter-sm pull-right"},[a("div",{staticClass:"col-xs-12 col-md-4 offset-md-10 pull-right"},[a("div")])])])]),a("div",{staticClass:"q-pa-md bg-grey-3"},[a("div",{staticClass:"row bg-white"},[a("div",{staticClass:"col-md-3 q-pa-md"},[a("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.productsOptions,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Productos",clearable:"","emit-value":"","map-options":""},on:{filter:e.fSelectProducts,input:function(t){return e.filterGrid()}},model:{value:e.filter.product,callback:function(t){e.$set(e.filter,"product",t)},expression:"filter.product"}})],1)]),a("div",{staticClass:"row bg-white"},[a("div",{staticClass:"col q-pa-md"},[a("q-table",{attrs:{flat:"",bordered:"",data:e.data,columns:e.columns,"row-key":"sale_date",pagination:e.pagination,filter:e.filter},on:{"update:pagination":function(t){e.pagination=t},request:e.qTableRequest},scopedSlots:e._u([{key:"top",fn:function(){return[a("div",{staticStyle:{width:"100%"}},[a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar por códigos o nombre de producto"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter.searchbar,callback:function(t){e.$set(e.filter,"searchbar",t)},expression:"filter.searchbar"}})],1)]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"code",staticStyle:{"text-align":"center"},attrs:{props:t}},[e._v(e._s(null===t.row.code?"-":t.row.code))]),a("q-td",{key:"old_code",staticStyle:{"text-align":"center"},attrs:{props:t}},[e._v(e._s(null===t.row.old_code?"-":t.row.old_code))]),a("q-td",{key:"product",staticStyle:{"text-align":"left"},attrs:{props:t}},[e._v(e._s(null===t.row.product?"-":t.row.product))]),a("q-td",{key:"requested_date",staticStyle:{"text-align":"center"},attrs:{props:t}},[e._v(e._s(null===t.row.requested_date?"-":t.row.requested_date))]),a("q-td",{key:"price",staticStyle:{"text-align":"center"},attrs:{props:t}},[e._v(e._s(null===t.row.price?"-":""+e.currencyFormatter.format(t.row.price)))]),a("q-td",{key:"supplier",staticStyle:{"text-align":"left"},attrs:{props:t}},[e._v(e._s(null===t.row.supplier?"-":t.row.supplier))])],1)]}}])})],1)])])])},r=[],l=a("7ec2"),n=a.n(l),i=a("c973"),o=a.n(i),c=(a("99af"),a("d3b7"),a("159b"),a("a9e3"),a("caad"),a("2532"),a("4de4"),a("ac1f"),a("5319"),a("aabb")),u=a("b5ae"),d=u.required,p=u.email,f={name:"IndexStorageExits",validations:{paymentMethod:{required:d},paymentDate:{required:d},qty:{required:d},emailReport:{fields:{email_cliente:{required:d,email:p},customer_select:{required:d}}}},data:function(){return{currencyFormatter:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),formatter:new Intl.NumberFormat("en-US"),shipmentDetailsModal:!1,role:null,promptEmailPagos:!1,tableWithInvoice:!1,tableWithoutInvoice:!0,interval:null,customer:"TODOS",disableBtnAddPayment:!0,disableTblPayments:!0,qty:null,paymentDate:null,paymentMethod:null,status:[],emailReport:{fields:{email_cliente:"",customer_select:null}},loadingSendingMailBtn:!1,reference:null,total_invoice:null,id_invoice:null,paymentsModal:!1,saleDatev1:null,saleDatev2:null,customerOptions:[],productsOptions:[],filteredProductsOptions:[],formaPagoOptions:[],pagination:{sortBy:"id",descending:!0,page:1,rowsNumber:0,rowsPerPage:25},columns:[{name:"code",align:"center",label:"CÓDIGO",field:"code",sortable:!0},{name:"old_code",align:"center",label:"CÓDIGO VIEJO",field:"old_code",sortable:!0},{name:"product",align:"center",label:"PRODUCTO",field:"product",sortable:!0},{name:"requested_date",align:"center",label:"ULTIMA FECHA",field:"requested_date",sortable:!0},{name:"price",align:"center",label:"ULTIMOS COSTO",field:"price",sortable:!0},{name:"supplier",align:"center",label:"PROVEEDOR",field:"proveedor",sortable:!0}],data:[],details:[],filter:{product:null,searchbar:""},statusShipment:["PENDIENTE","AUTORIZADO"],colorStatus:{PENDIENTE:"warning",AUTORIZADO:"green-6"}}},computed:{roleId:function(){var e=this.$store.getters["users/rol"];return parseInt(e)},fiberSaleDocumentFileUrl:function(){return"".concat("https://api_alpez.wasp.mx/","invoices/").concat(this.fiberSaleDocumentFile.fields.fiberSaleId,"/document-file")},totalAmounfromPayments:function(){var e=0;return this.dataPayments.forEach((function(t){e+=Number(t.amount)})),e},haspermissionv1:function(){var e=!1;return(this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(12)||this.$store.getters["users/roles"].includes(17))&&(e=!0),e},emailRule:function(e){var t=this;return[function(e){return t.$v.emailReport.fields.email_cliente.email||"El campo debe contener un correo válido."}]}},beforeRouteEnter:function(e,t,a){a((function(e){var t=e.$store.getters["users/rol"];console.log(t),1===t||2===t||12===t||17===t?a():a("/")}))},mounted:function(){this.fetchFromServer()},methods:{fSelectProducts:function(e,t){var a=this;t(""!==e?function(){var t=e.toLowerCase();a.filteredProductsOptions=a.productsOptions.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}:function(){a.filteredProductsOptions=a.productOptions})},fetchFromServer:function(){this.$q.loading.show(),this.qTableRequest({pagination:this.pagination,filter:this.filter})},qTableRequest:function(e){var t=this;return o()(n()().mark((function a(){var s;return n()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pagination=e.pagination,t.filter=e.filter,t.data=[],s=[],s.pagination=t.pagination,s.filter=t.filter,a.next=8,c["a"].get("/products/options/category/0").then((function(e){var a=e.data;t.productsOptions=a.options,t.productsOptions.push({label:"TODOS",value:"TODOS"})}));case 8:return a.next=10,c["a"].post("/products/report",s).then((function(e){var a=e.data;t.$q.loading.hide(),t.data=a.products,t.pagination.rowsNumber=a.productsCount})).catch((function(e){return e}));case 10:case"end":return a.stop()}}),a)})))()},filterGrid:function(){this.qTableRequest({pagination:this.pagination,filter:this.filter})},generatePDF:function(){var e=[],t=[];if(t=0===this.status.length?[99]:this.status,e.customer=this.customer,e.status=t,e.type=1,this.saleDatev1){e.saleDatev1=this.saleDatev1;while(e.saleDatev1.includes("/"))e.saleDatev1=e.saleDatev1.replace("/","-")}else e.saleDatev1=null;if(this.saleDatev2){e.saleDatev2=this.saleDatev2;while(e.saleDatev2.includes("/"))e.saleDatev2=e.saleDatev2.replace("/","-")}else e.saleDatev2=null;var a="https://api_alpez.wasp.mx/"+"/invoices/getPdfFromPaymentsDetails/".concat(e.type,"/").concat(e.customer,"/").concat(e.status,"/").concat(e.saleDatev1,"/").concat(e.saleDatev2);window.open(a,"_blank")},generateCSV:function(){var e=[];if(e.customer=this.customer,e.status=this.status,this.saleDatev1){e.saleDatev1=this.saleDatev1;while(e.saleDatev1.includes("/"))e.saleDatev1=e.saleDatev1.replace("/","-")}else e.saleDatev1=null;if(this.saleDatev2){e.saleDatev2=this.saleDatev2;while(e.saleDatev2.includes("/"))e.saleDatev2=e.saleDatev2.replace("/","-")}else e.saleDatev2=null;var t="https://api_alpez.wasp.mx/"+"/invoices/getCSVFromPaymentsDetails/".concat(e.customer,"/").concat(e.status,"/").concat(e.saleDatev1,"/").concat(e.saleDatev2);window.open(t,"_blank")}}},m=f,v=(a("d372"),a("2877")),b=a("9989"),h=a("ead5"),g=a("079e"),D=a("9c40"),w=a("05c0"),q=a("24e8"),y=a("f09f"),_=a("a370"),O=a("ddd8"),S=a("27f9"),C=a("4b7e"),P=a("eaac"),x=a("0016"),T=a("bd08"),I=a("db86"),k=a("eebe"),E=a.n(k),Q=Object(v["a"])(m,s,r,!1,null,null,null);t["default"]=Q.exports;E()(Q,"components",{QPage:b["a"],QBreadcrumbs:h["a"],QBreadcrumbsEl:g["a"],QBtn:D["a"],QTooltip:w["a"],QDialog:q["a"],QCard:y["a"],QCardSection:_["a"],QSelect:O["a"],QInput:S["a"],QCardActions:C["a"],QTable:P["a"],QIcon:x["a"],QTr:T["a"],QTd:I["a"]})},d372:function(e,t,a){"use strict";a("21de")}}]);
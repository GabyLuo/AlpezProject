(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{"6bb2":function(e,r,t){"use strict";t.r(r);var i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("q-page",{staticClass:"bg-grey-3"},[t("div",{staticClass:"q-pa-sm panel-header"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3"},[t("div",{staticClass:"q-pa-md q-gutter-sm"},[t("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[t("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),t("q-breadcrumbs-el",{attrs:{label:"Choferes",to:"/drivers"}}),t("q-breadcrumbs-el",{attrs:{label:"Editar"}})],1)],1)])])]),t("div",{staticClass:"q-pa-md bg-grey-3"},[t("div",{staticClass:"row bg-white border-panel"},[t("div",{staticClass:"col q-pa-md"},[t("div",{staticClass:"row",staticStyle:{"padding-bottom":"15px"}},[e._v("\n          Información General\n        ")]),t("div",{staticClass:"row q-col-gutter-xs"},[t("div",{staticClass:"col-xs-12 col-sm-5 col-md-5 col-lg-5"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.driver.fields.name.$error,label:"Nombre",rules:e.nameRules},on:{input:function(r){e.driver.fields.name=r.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.driver.fields.name,callback:function(r){e.$set(e.driver.fields,"name",r)},expression:"driver.fields.name"}})],1),t("div",{staticClass:"col-xs-12 col-sm-3 col-md-3 col-lg-3"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.driver.fields.rfc.$error,label:"RFC",rules:e.rfcRules},on:{input:function(r){e.driver.fields.rfc=r.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"insert_drive_file"}})]},proxy:!0}]),model:{value:e.driver.fields.rfc,callback:function(r){e.$set(e.driver.fields,"rfc",r)},expression:"driver.fields.rfc"}})],1),t("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 col-lg-4"},[t("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.driver.fields.license.$error,label:"Licencia",rules:e.licenseRules},on:{input:function(r){e.driver.fields.license=r.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-id-card"}})]},proxy:!0}]),model:{value:e.driver.fields.license,callback:function(r){e.$set(e.driver.fields,"license",r)},expression:"driver.fields.license"}})],1),t("div",{staticClass:"col-xs-12 col-sm-3 text-center"},[t("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:[{label:"ACTIVO",value:!0},{label:"INACTIVO",value:!1}],label:"Estatus","emit-value":"","map-options":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:e.driver.fields.active.value?"battery_full":"battery_alert"}})]},proxy:!0}]),model:{value:e.driver.fields.active,callback:function(r){e.$set(e.driver.fields,"active",r)},expression:"driver.fields.active"}})],1)]),t("div",{staticClass:"col-xs-12 col-sm-6 pull-right"},[t("q-btn",{attrs:{color:"positive",icon:"save",label:"Guardar"},on:{click:function(r){return e.updateDriver()}}})],1)])])])])},s=[],n=t("ded3"),o=t.n(n),a=t("7ec2"),c=t.n(a),l=t("c973"),d=t.n(l),u=(t("b0c0"),t("caad"),t("2532"),t("99af"),t("4de4"),t("d3b7"),t("aabb")),f=t("b5ae"),v=f.required,p=f.maxLength,b={name:"EditDriver",validations:{driver:{fields:{name:{required:v,maxLength:p(100)},rfc:{required:v,maxLength:p(15)},license:{required:v,maxLength:p(20)}}}},data:function(){return{driver:{fields:{name:null,rfc:null,license:null,active:!1,street:null,estado_id:null,municipio_id:null,postal_code_id:null,suburb_id:null,indoor_number:null,outdoor_number:null,between_street:null,city_id:null}},postal_codes:[],postal_codes_options:[],suburbs:[],suburbs_options:[],cities:[],cityOptions:[],selectMunicipio:[],MunicipioOptions:[],selectEstados:[],estadoOptions:[]}},computed:{nameRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.name.required||"El campo Nombre es requerido."},function(e){return r.$v.driver.fields.name.maxLength||"El campo Nombre no debe exceder los 100 dígitos."}]},rfcRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.rfc.required||"El campo RFC es requerido."},function(e){return r.$v.driver.fields.rfc.maxLength||"El campo RFC no debe exceder los 15 dígitos."}]},licenseRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.license.required||"El campo Licencia es requerido."},function(e){return r.$v.driver.fields.license.maxLength||"El campo Licencia no debe exceder los 20 dígitos."}]},streetRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.street.required||"El campo Calle es requerido."},function(e){return r.$v.driver.fields.street.maxLength||"El campo Calle no debe exceder los 100 dígitos."}]},cpRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.postal_code_id.required||"El campo código postal es requerido."}]},outdoor_numberRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.outdoor_number.required||"El campo Número exterior es requerido."}]},suburbRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.suburb_id.required||"El campo Colonia es requerido."}]},between_streetRules:function(e){var r=this;return[function(e){return r.$v.driver.fields.between_street.required||"El campo Entre calles es requerido."}]}},beforeCreate:function(){this.$store.getters["users/roles"].includes(1)||this.$store.getters["users/roles"].includes(3)||this.$store.getters["users/roles"].includes(7)||this.$store.getters["users/roles"].includes(2)||this.$store.getters["users/roles"].includes(8)||this.$router.push("/")},created:function(){this.fetchFromServer(),this.getEstados()},methods:{fetchFromServer:function(){var e=this;return d()(c()().mark((function r(){return c()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$q.loading.show(),u["a"].get("/drivers/".concat(e.$route.params.id)).then(function(){var r=d()(c()().mark((function r(t){var i,s,n;return c()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=t.data,i.driver){r.next=5;break}e.$router.push("/drivers"),r.next=16;break;case 5:return s=i.driver.postal_code_id,n=i.driver.suburb_id,e.driver.fields=i.driver,e.driver.fields.municipio_id=null,r.next=11,e.getPostalCodes(i.postal_code);case 11:return e.driver.fields.postal_code_id=s,r.next=14,e.getSuburbsByPostalCode(s);case 14:e.driver.fields.suburb_id=n,e.$q.loading.hide();case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))()},updateDriver:function(){var e=this;if(this.$v.driver.fields.$reset(),this.$v.driver.fields.$touch(),this.$v.driver.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var r=o()({},this.driver.fields);u["a"].put("/drivers/".concat(this.$route.params.id),r).then((function(r){var t=r.data;e.$q.notify({message:t.message.content,position:"top",color:t.result?"positive":"warning"}),t.result,e.$q.loading.hide()}))},getEstados:function(){var e=this;this.selectEstados=[],u["a"].get("/branch-offices/states").then((function(r){var t=r.data;e.selectEstados=t.options})).catch((function(e){return e}))},getPostalCodes:function(){var e=arguments,r=this;return d()(c()().mark((function t(){var i;return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:"",i=""===i?"0":i,t.next=4,u["a"].get("/branch-offices/postal_codes/".concat(i,"/").concat(r.driver.fields.municipio_id)).then((function(e){var t=e.data;r.postal_codes=t.options})).catch((function(e){return e}));case 4:case"end":return t.stop()}}),t)})))()},getMunicipiosbyEstado:function(e){var r=arguments,t=this;return d()(c()().mark((function i(){var s;return c()().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=r.length>1&&void 0!==r[1]&&r[1],t.driver.fields.postal_code_id=s?null:t.driver.fields.postal_code_id,t.driver.fields.municipio_id=null,t.driver.fields.city_id=null,t.selectMunicipio=[],t.getcities(e),i.next=8,u["a"].get("/branch-offices/municipalities/".concat(e,"/").concat(t.driver.fields.postal_code_id)).then((function(e){var r=e.data;t.selectMunicipio=r.options})).catch((function(e){return e}));case 8:case"end":return i.stop()}}),i)})))()},getcities:function(e){var r=this;return d()(c()().mark((function t(){return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.cities=[],t.next=3,u["a"].get("/branch-offices/cities/".concat(e,"/").concat(r.driver.fields.postal_code_id)).then((function(e){var t=e.data;r.cities=t.options})).catch((function(e){return e}));case 3:case"end":return t.stop()}}),t)})))()},getSuburbsByPostalCode:function(e){var r=this;return d()(c()().mark((function t(){return c()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.suburbs=[],r.driver.fields.suburb_id=null,r.driver.fields.municipio_id=null,r.driver.fields.estado_id=null,r.driver.fields.city_id=null,r.selectMunicipio=[],null===e){t.next=19;break}return r.driver.fields.estado_id=r.postal_codes.filter((function(r){return r.value===e}))[0].state_id,r.estadoOptions=r.selectEstados.filter((function(e){return e.value===r.driver.fields.estado_id})),t.next=11,r.getMunicipiosbyEstado(r.driver.fields.estado_id);case 11:return r.driver.fields.municipio_id=r.postal_codes.filter((function(r){return r.value===e}))[0].municipality_id,r.MunicipioOptions=r.selectMunicipio.filter((function(e){return e.value===r.driver.fields.municipio_id})),t.next=15,r.getcities(r.driver.fields.estado_id);case 15:return r.driver.fields.city_id=r.postal_codes.filter((function(r){return r.value===e}))[0].city_id,r.cityOptions=r.cities.filter((function(e){return e.value===r.driver.fields.city_id})),t.next=19,u["a"].get("/branch-offices/suburbs/".concat(e)).then((function(e){var t=e.data;r.suburbs=t.options,r.suburbs_options=t.options})).catch((function(e){return e}));case 19:case"end":return t.stop()}}),t)})))()},filterMunicipio:function(e,r,t){var i=this;r((function(){var r=e.toLowerCase();i.MunicipioOptions=i.selectMunicipio.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))},filterEstado:function(e,r,t){var i=this;r((function(){var r=e.toLowerCase();i.estadoOptions=i.selectEstados.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))},filterPostalCodes:function(e,r,t){var i=this;r(d()(c()().mark((function r(){var t;return c()().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=e.toLowerCase(),r.next=3,i.getPostalCodes(t);case 3:case"end":return r.stop()}}),r)}))))},filterSuburbs:function(e,r,t){var i=this;r((function(){var r=e.toLowerCase();i.suburbs_options=i.suburbs.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))},filterCity:function(e,r,t){var i=this;r((function(){var r=e.toLowerCase();i.cityOptions=i.cities.filter((function(e){return e.label.toLowerCase().indexOf(r)>-1}))}))}}},m=b,h=t("2877"),_=t("9989"),g=t("ead5"),x=t("079e"),q=t("27f9"),w=t("0016"),C=t("ddd8"),$=t("9c40"),y=t("66e5"),E=t("4074"),k=t("eebe"),L=t.n(k),O=Object(h["a"])(m,i,s,!1,null,null,null);r["default"]=O.exports;L()(O,"components",{QPage:_["a"],QBreadcrumbs:g["a"],QBreadcrumbsEl:x["a"],QInput:q["a"],QIcon:w["a"],QSelect:C["a"],QBtn:$["a"],QItem:y["a"],QItemSection:E["a"]})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[109],{e259:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"bg-grey-3"},[o("div",{staticClass:"q-pa-sm panel-header"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-9"},[o("div",{staticClass:"q-pa-md q-gutter-sm"},[o("q-breadcrumbs",{staticStyle:{"font-size":"20px"},attrs:{align:"left"}},[o("q-breadcrumbs-el",{attrs:{label:"",icon:"home",to:"/"}}),o("q-breadcrumbs-el",{attrs:{label:"Artículos",to:"/products"}}),o("q-breadcrumbs-el",{attrs:{label:"Nuevo Producto"}})],1)],1)])])]),o("div",{staticClass:"q-pa-md bg-grey-3"},[o("div",{staticClass:"row bg-white border-panel"},[o("div",{staticClass:"col q-pa-md"},[o("div",{staticClass:"row q-mb-sm"}),o("div",{staticClass:"row q-col-gutter-xs"},[o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.categoryOptions,label:"Categorías",rules:e.categoryRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-cubes"}})]},proxy:!0}]),model:{value:e.product.fields.category,callback:function(t){e.$set(e.product.fields,"category",t)},expression:"product.fields.category"}})],1),o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.filteredLineOptions,label:"Subcategoría",rules:e.lineRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-grip-lines-vertical"}})]},proxy:!0}]),model:{value:e.product.fields.line,callback:function(t){e.$set(e.product.fields,"line",t)},expression:"product.fields.line"}})],1),o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"",options:e.unitOptions,label:"Unidad",rules:e.unitRules},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-grip-lines-vertical"}})]},proxy:!0}]),model:{value:e.product.fields.unit,callback:function(t){e.$set(e.product.fields,"unit",t)},expression:"product.fields.unit"}})],1),o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-select",{attrs:{filled:"",color:"dark","bg-color":"secondary",label:"Marca",options:e.options,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":""},on:{filter:e.filterMarcas},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-grip-lines-vertical"}})]},proxy:!0},{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[e._v("\n                          No hay Resultados\n                        ")])],1)]},proxy:!0}]),model:{value:e.product.fields.mark,callback:function(t){e.$set(e.product.fields,"mark",t)},expression:"product.fields.mark"}})],1),o("div",{staticClass:"col-xs-12 col-sm-6"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.product.fields.name.$error,label:"Nombre",rules:e.nameRules},on:{input:function(t){e.product.fields.name=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.product.fields.name,callback:function(t){e.$set(e.product.fields,"name",t)},expression:"product.fields.name"}})],1),o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",rules:e.weightRules,error:e.$v.product.fields.weight.$error,label:"Peso KG"},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-weight-hanging"}})]},proxy:!0}]),model:{value:e.product.fields.weight,callback:function(t){e.$set(e.product.fields,"weight",t)},expression:"product.fields.weight"}})],1),o("div",{staticClass:"col-xs-12 col-sm-3"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",error:e.$v.product.fields.rebasa_code.$error,label:"Código Interno",rules:e.codeRebasa},on:{input:function(t){e.product.fields.rebasa_code=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.product.fields.rebasa_code,callback:function(t){e.$set(e.product.fields,"rebasa_code",t)},expression:"product.fields.rebasa_code"}})],1),o("div",{staticClass:"col-xs-12 col-sm-4"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",rules:e.codeSuplier,error:e.$v.product.fields.supplier_code.$error,label:"Código de proveedor"},on:{input:function(t){e.product.fields.supplier_code=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-box-open"}})]},proxy:!0}]),model:{value:e.product.fields.supplier_code,callback:function(t){e.$set(e.product.fields,"supplier_code",t)},expression:"product.fields.supplier_code"}})],1),o("div",{staticClass:"col-xs-12 col-sm-4"},[o("q-select",{attrs:{color:"dark","bg-color":"secondary",filled:"","use-input":"","input-debounce":"0","emit-value":"",label:"Clave producto servicio",options:e.claveProdOptions,clear:""},on:{filter:e.searchClave},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-key"}})]},proxy:!0},{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[e._v("\n                    No results\n                  ")])],1)]},proxy:!0},{key:"append",fn:function(){return[null!==e.product.fields.clave_producto_id?o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:function(t){t.stopPropagation(),e.product.fields.clave_producto_id=null}}}):e._e()]},proxy:!0}]),model:{value:e.product.fields.clave_producto_id,callback:function(t){e.$set(e.product.fields,"clave_producto_id",t)},expression:"product.fields.clave_producto_id"}})],1),o("div",{staticClass:"col-xs-12 col-sm-4"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",rules:e.barcodeRules,error:e.$v.product.fields.barcode.$error,label:"Código de barras"},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"view_week"}})]},proxy:!0}]),model:{value:e.product.fields.barcode,callback:function(t){e.$set(e.product.fields,"barcode",t)},expression:"product.fields.barcode"}})],1),o("div",{staticClass:"col-xs-12 col-sm-7"},[o("q-input",{attrs:{color:"dark","bg-color":"secondary",filled:"",autogrow:"",label:"Descripción"},on:{input:function(t){e.product.fields.description=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.product.fields.description,callback:function(t){e.$set(e.product.fields,"description",t)},expression:"product.fields.description"}})],1),o("div",{staticClass:"col-xs-12 col-sm-5"},[o("q-input",{attrs:{color:"dark",type:"textarea","bg-color":"secondary",filled:"",autogrow:"",label:"Información adicional"},on:{input:function(t){e.product.fields.additional_information=t.toUpperCase()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"fas fa-signature"}})]},proxy:!0}]),model:{value:e.product.fields.additional_information,callback:function(t){e.$set(e.product.fields,"additional_information",t)},expression:"product.fields.additional_information"}})],1)]),o("div",{staticClass:"row q-mb-sm q-mt-md"},[o("div",{staticClass:"col-xs-12 col-sm-2 offset-sm-10 pull-right"},[o("q-btn",{attrs:{color:"positive",icon:"save",label:"Guardar"},on:{click:function(t){return e.createProduct()}}})],1)])])])])])},i=[],s=(o("b0c0"),o("4de4"),o("d3b7"),o("a4d3"),o("e01a"),o("aabb")),n=o("b5ae"),a=n.required,l=n.maxLength,c=n.integer,d=n.decimal,u={name:"NewProduct",validations:{product:{fields:{name:{required:a,maxLength:l(100)},old_code:{maxLength:l(40)},family:{required:a},rebasa_code:{maxLength:l(40)},supplier_code:{maxLength:l(40)},category:{required:a},line:{required:a},unit:{required:a},barcode:{maxLength:l(20),integer:c},mark:{},code:{},weight:{required:a,decimal:d}}}},data:function(){return{product:{fields:{name:null,family:{value:null,label:"NINGUNO"},category:null,line:null,old_code:null,unit:null,cost_a:null,cost_b:null,rebasa_code:null,supplier_code:null,description:null,barcode:null,mark:null,weight:null,additional_information:null}},categoryOptions:[],lineOptions:[],markOptions:[],familyOptions:[],unitOptions:[],claveProdOptions:[],options:this.markOptions}},computed:{roleId:function(){var e=this.$store.getters["users/rol"];return parseInt(e)},priceRules:function(e){var t=this;return[function(e){return t.$v.product.fields.cost_a.required||"El campo Precio es requerido."}]},nameRules:function(e){var t=this;return[function(e){return t.$v.product.fields.name.required||"El campo Nombre es requerido."},function(e){return t.$v.product.fields.name.maxLength||"El campo Nombre no debe exceder los 100 dígitos."}]},codeRules:function(e){var t=this;return[function(e){return t.$v.product.fields.code.required||"El campo Código es requerido."},function(e){return t.$v.product.fields.code.maxLength||"El campo Código no debe exceder los 10 dígitos."}]},categoryRules:function(e){var t=this;return[function(e){return t.$v.product.fields.category.required||"El campo Categorías es requerido."}]},lineRules:function(e){var t=this;return[function(e){return t.$v.product.fields.line.required||"El campo Líneas es requerido."}]},unitRules:function(e){var t=this;return[function(e){return t.$v.product.fields.unit.required||"El campo Unidad es requerido."}]},codeRebasa:function(e){var t=this;return[function(e){return t.$v.product.fields.rebasa_code.maxLength||"El campo Código no debe exceder los 40 dígitos."}]},codeSuplier:function(e){var t=this;return[function(e){return t.$v.product.fields.supplier_code.maxLength||"El campo Código no debe exceder los 40 dígitos."}]},barcodeRules:function(e){var t=this;return[function(e){return t.$v.product.fields.barcode.maxLength||"El campo Código de barras no debe exceder 20 dígitos."},function(e){return t.$v.product.fields.barcode.integer||"El campo Código de barras es numérico."}]},filteredLineOptions:function(){var e=this;return null!=this.product.fields.category&&null!=this.product.fields.category.value?this.lineOptions.filter((function(t){return t.category===e.product.fields.category.value})):[]},weightRules:function(e){var t=this;return[function(e){return t.$v.product.fields.weight.decimal||"El campo Peso es numérico."}]}},beforeRouteEnter:function(e,t,o){o((function(e){var t=e.$store.getters["users/rol"];console.log(t),1===t||3===t||7===t||2===t||20===t||4===t||27===t||22===t?o():o("/")}))},mounted:function(){this.fetchFromServer()},methods:{fetchFromServer:function(){this.$q.loading.show(),this.getCategories(),this.getLines(),this.getMarks(),this.getProducts(),this.$q.loading.hide()},filterMarcas:function(e,t,o){var r=this;t((function(){var t=e.toLowerCase();r.options=r.markOptions.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}))},getCategories:function(){var e=this;s["a"].get("/categories/options").then((function(t){var o=t.data;e.categoryOptions=o.options}))},getLines:function(){var e=this;s["a"].get("/lines/options").then((function(t){var o=t.data;e.lineOptions=o.options}))},getMarks:function(){var e=this;s["a"].get("/marks/options").then((function(t){var o=t.data;e.markOptions=o.options}))},getProducts:function(){var e=this,t=this.$route.params.id;s["a"].get("/products/options").then((function(o){var r=o.data;e.familyOptions=r.options.filter((function(e){return null==e.family&&e.value!==t})),e.familyOptions.unshift({value:null,label:"NINGUNO"}),s["a"].get("/units/options").then((function(t){var o=t.data;e.unitOptions=o.options}))}))},createProduct:function(){var e=this;if(this.$v.product.fields.$reset(),this.$v.product.fields.$touch(),this.$v.product.fields.$error)return this.$q.dialog({title:"Error",message:"Por favor, verifique las validaciones.",persistent:!0}),!1;this.$q.loading.show();var t=[];t.name=this.product.fields.name,t.description=this.product.fields.description,t.line_id=this.product.fields.line.value,t.unit_id=this.product.fields.unit.value,t.clave_producto_id=this.product.fields.clave_producto_id,t.old_code=this.product.fields.old_code,t.barcode=this.product.fields.barcode,t.rebasa_code=this.product.fields.rebasa_code,t.supplier_code=this.product.fields.supplier_code,t.mark=this.product.fields.mark,t.code=this.product.fields.code,t.weight=this.product.fields.weight,t.additional_information=this.product.fields.additional_information,null!=this.product.fields.family&&null!=this.product.fields.family.value&&(t.family_id=this.product.fields.family.value),s["a"].post("/products",t).then((function(t){var o=t.data;e.$q.notify({message:o.message.content,position:"top",color:o.result?"positive":"warning"}),o.result?(e.$q.loading.hide(),e.$router.push("/products/".concat(o.id))):e.$q.loading.hide()}))},searchClave:function(e,t){var o=this;if(e.length<3)return!1;t((function(){s["a"].get("/products/searchClave/".concat(e)).then((function(e){var t=e.data;o.claveProdOptions=t.claves}))}))}}},p=u,f=o("2877"),m=o("9989"),v=o("ead5"),g=o("079e"),b=o("ddd8"),h=o("0016"),y=o("66e5"),q=o("4074"),_=o("27f9"),x=o("9c40"),k=o("eebe"),$=o.n(k),C=Object(f["a"])(p,r,i,!1,null,null,null);t["default"]=C.exports;$()(C,"components",{QPage:m["a"],QBreadcrumbs:v["a"],QBreadcrumbsEl:g["a"],QSelect:b["a"],QIcon:h["a"],QItem:y["a"],QItemSection:q["a"],QInput:_["a"],QBtn:x["a"]})}}]);